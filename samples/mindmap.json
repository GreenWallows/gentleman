{
    "mindmap": {
        "nature": "concrete",
        "attribute": {
            "title": {
                "alias": "my title",
                "target": "string",
                "projection": [
                    {
                        "type": "field",
                        "placeholder": "mindmap title",
                        "view": "textbox"
                    }
                ]
            },
            "short_description": {
                "target": "string",
                "required": false
            },
            "long_description": {
                "target": "string",
                "required": false
            },
            "author": {
                "target": "string",
                "required": false
            }
        },
        "component": {
            "central_topic": {
                "attribute": {
                    "id": {
                        "target": "string"
                    },
                    "topic": {
                        "target": "central_topic"
                    }
                },
                "projection": [
                    {
                        "type": "stack",
                        "element": {
                            "heading": {
                                "type": "stack",
                                "orientation": "horizontal",
                                "layout": [
                                    "Subject of discussion: #id"
                                ]
                            }
                        },
                        "orientation": "vertical",
                        "layout": [
                            "$heading",
                            "#topic"
                        ]
                    }
                ]
            }
        },
        "projection": [
            {
                "type": "stack",
                "element": {
                    "intro": {
                        "type": "stack",
                        "orientation": "horizontal",
                        "layout": [
                            "Mind map #title #short_description",
                            "#long_description"
                        ]
                    }
                },
                "orientation": "vertical",
                "layout": [
                    "#author",
                    "$intro",
                    "#central_topic:component"
                ]
            }
        ]
    },
    "topic": {
        "nature": "prototype",
        "attribute": {
            "name": {
                "target": "string"
            },
            "details": {
                "target": "string",
                "required": false
            },
            "marker": {
                "name": "marker",
                "target": "string",
                "required": false
            }
        }
    },
    "central_topic": {
        "prototype": "topic",
        "nature": "concrete",
        "component": {
            "main_topics": {
                "attribute": {
                    "topics": {
                        "target": "set",
                        "accept": "main_topic",
                        "min": 1,
                        "action": {
                            "add": {
                                "trigger": "click",
                                "pre": "null",
                                "post": "$count = $count@pre + 1",
                                "projection": [
                                    {
                                        "type": "stack",
                                        "orientation": "vertical",
                                        "layout": [
                                            "Main topic <name>",
                                            "<details>",
                                            "List of sub topics: <sub topics>"
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                },
                "projection": [
                    {
                        "type": "stack",
                        "orientation": "vertical",
                        "layout": [
                            "List of main topics:",
                            "#topics"
                        ]
                    }
                ]
            }
        },
        "projection": [
            {
                "type": "stack",
                "orientation": "vertical",
                "layout": [
                    "#name #marker",
                    "#main_topics:component"
                ]
            }
        ]
    },
    "main_topic": {
        "prototype": "topic",
        "nature": "concrete",
        "component": {
            "sub_topics": {
                "attribute": {
                    "topics": {
                        "target": "set",
                        "accept": "sub_topic",
                        "min": 5,
                        "action": {
                            "add": {
                                "projection": [
                                    {
                                        "type": "wrap",
                                        "layout": "Add a sub topic"
                                    }
                                ]
                            }
                        }
                    }
                },
                "projection": [
                    {
                        "type": "stack",
                        "orientation": "horizontal",
                        "layout": [
                            "List of sub topics:",
                            "#topics"
                        ]
                    }
                ]
            }
        },
        "projection": [
            {
                "type": "stack",
                "element": {
                    "heading": {
                        "type": "wrap",
                        "layout": "Main topic #name"
                    }
                },
                "orientation": "vertical",
                "layout": [
                    "$heading",
                    "#details",
                    "#sub_topics:component"
                ]
            }
        ]
    },
    "sub_topic": {
        "prototype": "topic",
        "nature": "concrete",
        "component": {
            "sub_topics": {
                "required": false,
                "attribute": {
                    "topics": {
                        "target": "set",
                        "accept": "sub_topic"
                    }
                },
                "projection": [
                    {
                        "type": "wrap",
                        "layout": "#topics"
                    }
                ]
            }
        },
        "projection": [
            {
                "type": "stack",
                "orientation": "vertical",
                "layout": [
                    "#name",
                    "#sub_topics:component"
                ]
            },
            {
                "type": "table",
                "disposition": "column",
                "layout": {
                    "header": {
                        "subtopics": {
                            "value": "Subtopics"
                        }
                    },
                    "cell": [
                        {
                            "header": "subtopics",
                            "value": "#name"
                        }
                    ],
                    "multiple": true
                }
            }
        ]
    },
    "@root": "mindmap",
    "@config": {
        "language": "Mind map demo",
        "settings": {
            "autosave": true
        },
        "style": {
            "attribute": {
                "inline": true,
                "spacing": {
                    "before": "2px",
                    "after": "2px"
                }
            },
            "component": {
                "inline": false,
                "size": {
                    "width": "FIT_CONTENT"
                },
                "spacing": {
                    "before": "5px",
                    "after": "5px"
                },
                "corner": {},
                "background": "#f0f0f0"
            }
        }
    }
}