<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Gentleman</title>
    <meta name="desciption" content="A web-based projectional editor. Enjoy a new way to express and interact with your DSL.">
    <link rel="stylesheet" href="../assets/css/normalize.css">
    <link rel="stylesheet" href="../assets/css/base.css">
    <link rel="stylesheet" href="../assets/css/editor.css">
    <link rel="stylesheet" href="../assets/css/state.css">
    <script type="application/json" id="model">
        {
            "notebook":{
                "name": "notebook",
                "root": true,
                "attr": {
                    "name": { "name": "name", "type": "ID" }
                },
                "composition": [
                    {
                        "name": "Store section",
                        "position": 1,
                        
                        "multiple": true,
                        "attr": {
                            "stores": { 
                                "name": "stores", "type": "store", 
                                "multiple": { "type": "list",  "min": 1 } }
                        },
                        "representation": { "type": "text", "val": "#stores" }
                    },
                    {
                        "name": "Category section",
                        "position": 2,
                        "optional": true,
                        "attr": {
                            "categories": { "name": "categories", "type": "category", "multiple": true }
                        },
                        "representation": { "type": "text", "val": "#categories" }
                    },
                    {
                        "name": "List declaration",
                        "position": 3,
                        "optional": true,
                        "attr": {
                            "list": { "name": "list", "type": "list" }
                        },
                        "representation": { "type": "text", "val": "#list" }
                    }
                ],
                "representation": { 
                    "type": "text",
                    "k1": { "type": "keyword", "val": "NOTEBOOK"},
                    "val": "$k1 #name $composition" 
                }
            },
            "store": {
                "name": "store",
                "attr": {
                    "name": { "name": "name", "type": "ID" },
                    "address": { "name": "address", "type": "string", "optional": true },
                    "hours": { "name": "hours", "type": "hour", "optional": true },
                    "phoneNumber": { "name": "phoneNumber", "type": "string", "optional": true },
                    "isFavorite": { "name": "isFavorite", "type": "boolean", "val": false },
                    "type":  { "name": "type", "type": "storetype" }
                },
                "representation": {
                    "type": "text",
                    "k1": { "type": "keyword", "val": "STORE" },
                    "val": "$k1 #name &NL #address &NL #hours &NL #phoneNumber #isFavorite &NL #type"
                }
            },
            "category": {
                "name": "category",
                "attr": {
                    "name": { "name": "name", "type": "ID" },
                    "description": { 
                        "name": "description", "type": "string", "optional": true,
                        "representation": { "type": "text", "val": "[$val]" }}
                },
                "representation": { "type": "text", "val": "#name #description" }
            },
            "list": {
                
                "name": "list",
                "attr": {
                    "name": { "name": "name", "type": "string", "optional": true },
                    "date": { "name": "date", "type": "string" }
                },
                "composition": [
                    {
                        "name": "Section",
                        "position": 1,
                        
                        "multiple": true,
                        "attr": {
                            "section": { "name": "section", "type": "section" }
                        },
                        "representation": { "type": "text", "val": "#section" }
                    },
                    {
                        "name": "Items",
                        "position": 2,
                        "optional": true,
                        "attr": {
                            "items": { "name": "items", "type": "item", "multiple": true, "min": 1, "inline": false }
                        },
                        "representation": { "type": "text", "val": "#items" }
                    }
                ],
                "representation": { 
                    "type": "text", 
                    "k1": { "type": "keyword", "val": "Liste d'Ã©picerie" },
                    "val": "$k1 #name du #date $composition"
                }
            },
            "hour": {
                "name": "hour",
                "attr": {
                    "day": { 
                        "name": "day", "type": "weekday", "val":["monday"],
                        "multiple": { "type": "array", "unique": true } 
                    },
                    "opentime": { 
                        "name": "opentime", "type": "time",
                        "multiple": { "type": "map", "key": "day" }
                    },
                    "closetime": { 
                        "name": "closetime", "type": "time",
                        "multiple": { "type": "map", "key": "day" }
                    }
                },
                "representation": {
                    "type": "table",
                    "col": { "val": "#day" },
                    "cell": { "val": "#opentime" }
                }
            },
        
            "section": {
                "name": "section",
                "attr": {
                    "name": { "name": "name", "type": "string" },
                    "category": { "name": "category", "type": "IDREF", "ref": "category" }
                },
                "composition": [
                    {
                        "name": "items",
                        "keyword": "Items",
                        "position": 1,
                        "attr": {
                            "items": { "name": "items", "type": "item", "multiple": true, "min": 1, "inline": false }
                        },
                        "representation": { "type": "text", "val": "#items" }
                    }
                ],
                "representation": {
                    "type": "text",
                    "k1": { "type": "keyword", "val": "Market" },
                    "val": "$k1 #name AS #category $composition"
                }
            },
            "item": {
                "name": "item",
                "attr": {
                    "name": { "name": "name", "type": "string" },
                    "quantity": { "name": "quantity", "type": "integer", "val": "1" },
                    "category": { "name": "category", "type": "IDREF", "ref": "category" },
                    "note": { 
                        "name": "note", "type": "string", "optional": true, 
                        "representation": { "type": "text", "val": "<<$val>>" }
                    }
                },
                "representation": {
                    "type": "text",
                    "val": "#name(#quantity) #note"
                }
            },
         
            "time": {
                "name": "time",
                "type": "data-type",
                "format": "([01]\\d|2[0-3]):([0-5]\\d)$",
                "message": "Please enter the time using the following format HH:mm."
            },
        
            "weekday": {
                "name": "weekday",
                "type": "enum",
                "values": {
                    "monday": { "val": "lundi", "representation": { "type": "text", "val": "jour $val" } },
                    "tuesday": { "val": "tuesday" },
                    "wednesday": { "val": "miercoles" },
                    "thursday": { "val": "thursday" },
                    "friday": { "val": "friday" }
                }
            },
            "storetype": {
                "name": "storetype",
                "type": "enum",
                "values": ["GROCERY", "BOUTIQUE", "FURNITURE"]
            },
        
            "@config": {
                "language": "Grocery",
                "settings": {
                    "autosave": true
                }
            },
            "@resources": ["../assets/css/grocery.css"]
        }
    </script>
    <script type="application/json" id="model-ReLiS">
        {
            "project": {
                "root": true,
                "name": "project",
                "attr": {
                    "short_name": { "name": "short_name", "type": "ID" },
                    "name": { "name": "name", "type": "string" }
                },
                "composition": [
                    {
                        "name": "Screening section",
                        "position": 1,
                        "optional": true,
                        "attr": {
                            "screen_action": { "name": "screen_action", "type": "ID", "optional": true },
                            "screening": { "name": "screening", "type": "screening", "multiple": true, "min": 1 }
                        },
                        "representation": { 
                            "type": "text", 
                            "k1": { "type": "keyword", "val": "SCREENING" },
                            "val": "$k1 #screen_action #screening" 
                        }
                    },
                    {
                        "name": "Question/Answer section",
                        "position": 2,
                        "optional": true,
                        "attr": {
                            "qa_action": { "name": "qa_action", "type": "ID", "optional": true },
                            "quality_assess": { "name": "quality_assess", "type": "qa", "multiple": true }
                        },
                        "representation": { 
                            "type": "text", 
                            "k1": { "type": "keyword", "val": "QA" },
                            "val": "$k1 #qa_action #quality_assess" 
                        }
                    },
                    {
                        "name": "Data extraction section",
                        "position": 3,
                        "attr": {
                            "class_action": { "name": "class_action", "type": "ID", "optional": true },
                            "category": { "name": "category", "type": "category", "multiple": true, "min": 1, "inline": false }
                        },
                        "representation": { 
                            "type": "text", 
                            "k1": { "type": "keyword", "val": "DATA EXTRACTION" },
                            "val": "$k1 #class_action #category" 
                        }
                    },
                    {
                        "name": "Report section",
                        "keyword": "",
                        "position": 4,
                        "optional": true,
                        "attr": { "reporting": { "name": "reporting", "type": "report", "multiple": true } },
                        "representation": { 
                            "type": "text", 
                            "k1": { "type": "keyword", "val": "SYNTHESIS" },
                            "val": "$k1 #reporting" 
                        }
                    }
                ],
                "representation": {
                    "type": "text",
                    "k1": { "type": "keyword", "val": "PROJECT" },
                    "val": "$k1 #short_name #name $composition"
                }
            },
            "screening": {
                "name": "screening",
                "composition": [{
                    "name": "reviews",
                    "keyword": "Reviews",
                    "position": 1,
                    "attr": { "review_per_paper": { "name": "review_per_paper", "type": "integer", "val": "2" } },
                    "representation": { "type": "text", "val": "$keyword #review_per_paper" }
                }, {
                    "name": "conflict",
                    "keyword": "Conflict",
                    "position": 2,
                    "attr": {
                        "conflict_type": { "name": "conflict_type", "type": "conflictType" },
                        "conflict_resolution": { "name": "conflict_resolution", "type": "conflictResolution", "val": "unanimity" }
                    },
                    "representation": { "type": "text", "val": "$keyword on #conflict_type resolved by #conflict_resolution" }
                }, {
                    "name": "criteria",
                    "keyword": "Criteria",
                    "position": 3,
                    "attr": { "exclusion_criteria": { "name":"exclusion_criteria", "type": "string", "multiple": true, "val": ["one", "two"] } },
                    "representation": { "type": "text", "val": "$keyword = [#exclusion_criteria]" }
                }, {
                    "name": "sources",
                    "keyword": "Sources",
                    "position": 4,
                    "optional": true,
                    "attr": { "source_papers": { "name": "source_papers", "type": "string", "multiple": true } },
                    "representation": { "type": "text", "val": "$keyword = [#source_papers]" }
                }, {
                    "name": "strategies",
                    "keyword": "Strategies",
                    "position": 5,
                    "optional": true,
                    "attr": { "search_strategy": { "name": "search_strategy", "type": "string", "multiple": true } },
                    "representation": { "type": "text", "val": "$keyword = [#search_strategy]" }
                }, {
                    "name": "validation",
                    "keyword": "Validation",
                    "position": 6,
                    "optional": true,
                    "attr": {
                        "validation_percentage": { "name": "validation_percentage", "type": "integer", "val": "20", "min": 0, "max": 100 },
                        "validation_assignment_mode": { "name": "validation_assignment_mode", "type": "assignmentMode", "val": "normal", "optional": true }
                    },
                    "representation": { "type": "text", "val": "$keyword #validation_percentage% #validation_assignment_mode" }
                }, {
                    "name": "phases",
                    "keyword": "Phases",
                    "position": 7,
                    "optional": true,
                    "attr": { "phases": { "name": "phases", "type": "phase", "multiple": true, "min": 1, "inline": false } },
                    "representation": { "type": "text", "val": "$keyword #phases" }
                }],
                "representation": { "type": "text", "val": "$composition" }
            },
            "phase": {
                "name": "phase",
                "attr": {
                    "title": { "name": "title", "type": "string" },
                    "description": { "name": "description", "type": "string", "optional": true },
                    "fields": { "name": "fields", "type": "field", "multiple": true }
                },
                "representation": { "type": "text", "val": "#title #description Fields (#fields)" }
            },
            "qa": {
                "name": "qa",
                "composition": [{
                    "name": "questions",
                    "keyword": "Questions",
                    "position": 1,
                    "attr": { "question": { "name": "question", "type": "string", "multiple": true, "min": 1 } },
                    "representation": { "type": "text", "val": "$keyword [#question]" }
                }, {
                    "name": "response",
                    "keyword": "Response",
                    "position": 2,
                    "attr": { "response": { "name": "response", "type": "response", "multiple": true, "min": 1 } },
                    "representation": { "type": "text", "val": "$keyword [#response]" }
                }, {
                    "name": "min_score",
                    "keyword": "Min_score",
                    "position": 3,
                    "attr": { "min_score": { "name": "min_score", "type": "double" } },
                    "representation": { "type": "text", "val": "$keyword #min_score" }
                }],
                "representation": { "type": "text", "val": "$composition" }
            },
            "response": {
                "name": "response",
                "attr": {
                    "title": { "name": "title", "type": "string" },
                    "score": { "name": "score", "type": "double" }
                },
                "representation": { "type": "text", "val": "#title:#score" }
            },
            "double": {
                "name": "double",
                "type": "data-type",
                "format": "[0-9]+([.][0-9]+)?"
            },
            "report": {
                "name": "report",
                "attr": {
                    "name": { "name": "name", "type": "ID" },
                    "title": { "name": "title", "type": "string", "optional": true },
                    "value": { "name": "value", "type": "IDREF:category" },
                    "chart": { "name": "chart", "type": "graphType", "multiple": true }
                },
                "abstract": true,
                "extension": ["simple_graph", "compare_graph"]
            },
            "simple_graph": {
                "name": "simple_graph",
                "keyword": "Simple",
                "base": "report",
                "representation": { "type": "text", "val": "$keyword #name #title on #value charts(#chart)" }
            },
            "compare_graph": {
                "name": "compare_graph",
                "keyword": "Compare",
                "base": "report",
                "attr": { "reference": { "name": "reference", "type": "IDREF:category" } },
                "representation": {
                    "type": "text",
                    "val": "$keyword #name #title on #value with #reference charts(#chart)"
                }
            },
            "category": {
                "name": "category",
                "attr": {
                    "name": { "name": "name", "type": "ID" },
                    "title": {
                        "name": "title", "type": "string", "optional": true,
                        "post": [{ "cond": [{ "regex": "?= *" }], "action": { "@mandatory": true } }]
                    },
                    "mandatory": { "name": "mandatory", "type": "boolean", "return": { "equalTo": "*" }, "val": "false", "predicate": "$val=*" },
                    "numberOfValues": {
                        "name": "numberOfValues", "type": "integer", "val": "1",
                        "rule": { "greaterThan": -1, "equalTo": -1 },
                        "ruleset": [{ "greaterThan": -1, "equalTo": -1 }],
                        "representation": { "type": "text", "val": "[$val]" }
                    },
                    "subCategory": {
                        "name": "subCategory", "type": "category", "multiple": true, "min": 1,
                        "representation": { "type": "text", "val": "{$val}" }
                    }
                },
                "named_composition": [{ "name": "subCategory", "type": "category", "multiple": true }],
                "abstract": true,
                "extension": ["freeCategory", "staticCategory", "independantDynamicCategory", "dependantDynamicCategory"]
            },
            "freeCategory": {
                "name": "freeCategory",
                "keyword": "Simple",
                "base": "category",
                "attr": {
                    "type": { "name": "type", "type": "simpleType", "val": "string" },
                    "max_char": { "name": "max_char", "type": "integer", "optional": true, "representation": { "type": "text", "val": "($val)"} },
                    "pattern": { "name": "pattern", "type": "string", "optional": true, "representation": { "type": "text", "val": "style($val)" } },
                    "initial_value": { "name": "initial_value", "type": "string", "optional": true, "representation": { "type": "text", "val": "= [$val]" } }
                },
                "representation": {
                    "type": "text",
                    "val": "$keyword #name #title #mandatory #numberOfValues : #type #max_char #pattern #initial_value #subCategory"
                }
            },
            "staticCategory": {
                "name": "staticCategory",
                "keyword": "List",
                "base": "category",
                "attr": { "values": { "name": "values", "type": "string", "multiple": true, "min": 1 } },
                "representation": {
                    "type": "text",
                    "val": "$keyword #name #title #mandatory #numberOfValues = [#values] #subCategory"
                }
            },
            "independantDynamicCategory": {
                "name": "independantDynamicCategory",
                "keyword": "DynamicList",
                "base": "category",
                "attr": {
                    "reference_name": { "name": "reference_name", "type": "string" },
                    "initial_values": { "name": "initial_values", "type": "string", "multiple": true, "min": 1, "representation": { "type": "text", "val": "= [$val]" } }
                },
                "representation": {
                    "type": "text",
                    "val": "$keyword #name #title #mandatory #numberOfValues #reference_name #initial_values #subCategory"
                }
            },
            "dependantDynamicCategory": {
                "name": "dependantDynamicCategory",
                "keyword": "DynamicList",
                "base": "category",
                "attr": { "depends_on": { "name": "depends_on", "type": "IDREF:category" } },
                "representation": {
                    "type": "text",
                    "val": "$keyword #name #title #mandatory #numberOfValues depends on #depends_on #subCategory"
                }
            },
            "simpleType": {
                "name": "simpleType",
                "type": "enum",
                "values": {
                    "bool": { "representation": { "type": "text", "val": "bool" } },
                    "date": { "representation": { "type": "text", "val": "date #max" } },
                    "int": { "representation": { "type": "text", "val": "int #max" } },
                    "real": { "representation": { "type": "text", "val": "real #max" } },
                    "string": { "representation": { "type": "text", "val": "string #max" } },
                    "text": { "representation": { "type": "text", "val": "text #max" } }
                }
            },
            "assignmentMode": {
                "name": "assignmentMode",
                "type": "enum",
                "values": {
                    "info": { "val": "Info" },
                    "normal": { "val": "Normal" },
                    "veto": { "val": "Veto" }
                }
            },
            "conflictType": {
                "name": "ConflictType",
                "type": "enum",
                "values": {
                    "exclusionCriteria": { "val": "Criteria" },
                    "includeExclude": { "val": "Decision" }
                }
            },
            "conflictResolution": {
                "type": "enum",
                "values": {
                    "majority": { "val": "majority", "representation": { "type": "text", "val": "$val" } },
                    "unanimity": { "val": "unanimity", "representation": { "type": "text", "val": "$val" } }
                }
            },
            "graphType": {
                "type": "enum",
                "values": {
                    "bar": { "val": "bar" },
                    "line": { "val": "line" },
                    "pie": { "val": "pie" }
                }
            },
            "field": {
                "type": "enum",
                "values": {
                    "abstract": { "val": "abstract" },
                    "bibtex": { "val": "bibtex" },
                    "link": { "val": "link" },
                    "preview": { "val": "preview" },
                    "title": { "val": "title" }
                }
            },
            "@config": {
                "language": "ReLiS",
                "settings": {
                    "autosave": true
                }
            },
            "@resources": ["css/relis.css"]
        }
    </script>
</head>

<body>
    <div data-gentleman-editor></div>

    <script src="../src/helpers/helpers.js"></script>
    <script src="../src/utils/utils.js"></script>
    <script src="../src/utils/effects.js"></script> 
    <script src="../src/utils/interactive.js"></script>
    <script src="../src/exception.js"></script>
    <script src="../src/autocomplete.js"></script>
    <script src="../src/projection.js"></script>
    <script src="../src/model/modelAttribute.js"></script>
    <script src="../src/model/modelElement.js"></script>
    <script src="../src/model/model.js"></script>
    <script src="../src/editor.js"></script>
</body>

</html>