(()=>{"use strict";var e={12:e=>{e.exports=JSON.parse('{"concept":[{"name":"model element","nature":"prototype","attributes":[{"name":"name","target":{"name":"name"},"required":true},{"name":"description","target":{"name":"string"},"required":true}]},{"name":"model concept","description":"A prototype of a concept.","nature":"prototype","prototype":"model element","attributes":[{"name":"attributes","target":{"name":"set","accept":{"name":"attribute"},"min":0},"required":true,"description":"The list of attributes of your concept."},{"name":"properties","target":{"name":"set","accept":{"name":"property"},"min":0},"required":true,"description":"The list of properties of your concept."},{"name":"prototype","target":{"name":"reference","accept":{"name":"prototype concept"}}}]},{"name":"prototype concept","description":"A prototype creates a base skeleton to provide reusability and extension to concepts of the model. Any concept can reuse a prototype and would inherit its structure.","nature":"concrete","prototype":"model concept","build":{"nature":"prototype"}},{"name":"concrete concept","description":"A concrete concept represents the model\'s actual concepts. Projections can be defined against its structure.","nature":"concrete","prototype":"model concept","build":{"nature":"concrete"}},{"name":"derivative concept","description":"A derivative concept represents...","nature":"concrete","prototype":"model concept","attributes":[{"name":"base","target":{"name":"primitive"},"required":true}],"build":{"nature":"derivative"}},{"name":"structure","nature":"prototype","prototype":"model element","attributes":[{"name":"alias","target":{"name":"string"},"required":false,"description":"The alias of the structure."}]},{"name":"attribute","nature":"concrete","prototype":"structure","attributes":[{"name":"required","target":{"name":"boolean"},"required":true,"description":"The value indicating whether the structure is required for the parent concept."},{"name":"target","target":{"name":"primitive"},"required":true,"description":"The target concept of the attribute structure."}]},{"name":"property","nature":"concrete","prototype":"structure","attributes":[{"name":"target","target":{"name":"value"},"required":true,"description":"The target concept of the property structure."}]},{"name":"primitive","nature":"prototype","attributes":[]},{"name":"string primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"string"},"description":"Default value."},{"name":"length","target":{"name":"number constraint"},"required":false},{"name":"values","target":{"name":"set","accept":{"name":"string"},"min":1},"required":false,"description":"The list of string values accepted by the string instance."}]},{"name":"number constraint","nature":"prototype","attributes":[]},{"name":"number constraint value","nature":"concrete","prototype":"number constraint","attributes":[{"name":"value","target":{"name":"number"}}]},{"name":"number constraint range","nature":"concrete","prototype":"number constraint","attributes":[{"name":"min","target":{"name":"number constraint range value"},"description":"Defines the minimum number of characters the user must input. This must be an integer value 0 or higher. If no minlength is specified, or an invalid value is specified, the input has no minimum length."},{"name":"max","target":{"name":"number constraint range value"},"description":"Defines the maximum number of characters the user can input. This must be an integer value 0 or higher. If no maxlength is specified, or an invalid value is specified, the input has no maximum length."}]},{"name":"number constraint range value","nature":"concrete","attributes":[{"name":"value","target":{"name":"number"},"description":"Value of a range"},{"name":"included","target":{"name":"boolean"},"description":"Value is included in the range"}]},{"name":"number primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"number"}},{"name":"value","target":{"name":"number constraint"},"required":false},{"name":"values","target":{"name":"set","accept":{"name":"number"},"min":1},"required":false}]},{"name":"boolean primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"boolean"}}]},{"name":"reference primitive","nature":"concrete","prototype":"$primitive","attributes":[{"name":"accept","target":{"name":"concept primitive"},"required":true}]},{"name":"set primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"accept","target":{"name":"primitive"},"required":true},{"name":"ordered","target":{"name":"boolean"},"required":true},{"name":"cardinality","target":{"name":"number constraint"},"required":false}]},{"name":"concept primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"concept","target":{"name":"reference","accept":{"prototype":"model concept"}},"required":true}]},{"name":"value","nature":"prototype","attributes":[]},{"name":"string value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"string"}}]},{"name":"number value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"number"}}]},{"name":"boolean value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"boolean"}}]},{"name":"name","nature":"derivative","base":"string","min":1,"max":100}],"projection":[{"concept":{"name":"prototype concept"},"type":"layout","global":true,"tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-concept","prototype-concept"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["model-concept-header","prototype-concept-header"]},"disposition":[{"type":"text","style":{"css":"model-concept-header__title"},"content":"Prototype concept "},{"type":"attribute","name":"name"}]}},{"type":"layout","layout":{"type":"stack","orientation":"vertical","style":{"css":["model-concept-body","prototype-concept-body"]},"disposition":[{"type":"attribute","name":"description","tag":"description-string"},{"type":"attribute","name":"attributes","tag":"attribute-set","optional":{"type":"layout","layout":{"type":"wrap","help":"Define inheritable attributes","style":{"css":["model-concept-option","model-concept-option--attributes"]},"disposition":[{"type":"text","content":"Attributes"}]}}}]}}]}},{"concept":{"name":"prototype concept"},"type":"layout","tags":["reference-value"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"prototype concept"},"type":"layout","tags":["reference-choice"],"projection":{"type":"wrap","focusable":false,"style":{"css":["link-choice","link-choice--prototype"]},"disposition":[{"type":"text","content":"Prototype concept"},{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"concrete concept"},"type":"layout","global":true,"tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-concept","concrete-concept"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["model-concept-header","concrete-concept-header"]},"disposition":[{"type":"static","static":{"type":"text","style":{"css":"model-concept-header__title"},"content":"Concrete concept "}},{"type":"attribute","name":"name"}]}},{"type":"layout","layout":{"type":"stack","orientation":"vertical","style":{"css":["model-concept-body","concrete-concept-body"]},"disposition":[{"type":"attribute","name":"description","tag":"description-string"},{"type":"attribute","name":"prototype","tag":"prototype-reference","optional":{"type":"layout","layout":{"type":"wrap","style":{"css":["model-concept-option","model-concept-option--prototype"]},"disposition":[{"type":"static","static":{"type":"text","content":"Use a prototype"}}]}}},{"type":"layout","layout":{"type":"wrap","style":{"css":["model-concept-structure"]},"disposition":[{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title","model-concept-structure__title","model-concept-structure__title--attributes"]}}},{"type":"attribute","name":"attributes","tag":"attribute-set"},{"type":"static","static":{"type":"text","content":"Properties","style":{"css":["title","model-concept-structure__title","model-concept-structure__title--properties"]}}},{"type":"attribute","name":"properties","tag":"property-set"}]}}]}}]}},{"concept":{"name":"concrete concept"},"type":"layout","tags":["reference-value"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"concrete concept"},"type":"layout","tags":["reference-choice"],"projection":{"type":"wrap","focusable":false,"style":{"css":["link-choice","link-choice--concrete"]},"disposition":[{"type":"static","static":{"type":"text","content":"Concrete concept"}},{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"derivative concept"},"type":"layout","global":true,"tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-concept","prototype-concept"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["model-concept-header","derivative-concept-header"]},"disposition":[{"type":"static","static":{"type":"text","style":{"css":"model-concept-header__title"},"content":"Derivative concept "}},{"type":"attribute","name":"name"}]}},{"type":"layout","layout":{"type":"stack","orientation":"vertical","style":{"css":["model-concept-body","derivative-concept-body"]},"disposition":[{"type":"attribute","name":"description","tag":"description-string"},{"type":"static","static":{"type":"text","content":"Base","style":{"css":["title","model-concept-structure__title","model-concept-structure__title--properties"]}}},{"type":"attribute","name":"base"}]}}]}},{"concept":{"name":"derivative concept"},"type":"layout","tags":["reference-value"],"projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Derivative"}},{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"derivative concept"},"type":"layout","tags":["reference-choice"],"projection":{"type":"wrap","focusable":false,"style":{"css":["link-choice","link-choice--derivative"]},"disposition":[{"type":"static","static":{"type":"text","content":"Derivative concept"}},{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"name":"attribute-table","concept":{"name":"attribute"},"type":"template","tags":[],"template":"table","projection":{"type":"row","row":[{"header":{"style":{"css":["attribute-table__header-cell"]},"content":{"type":"static","static":{"type":"text","content":"Required"}}},"body":{"style":{"css":["attribute-table__body-cell","attribute-table__body-cell--required"]},"content":{"type":"attribute","name":"required","tag":"required-boolean"}}},{"header":{"style":{"css":["attribute-table__header-cell"]},"content":{"type":"static","static":{"type":"text","content":"Name"}}},"body":{"style":{"css":["attribute-table__body-cell"]},"content":{"type":"attribute","name":"name","tag":"textfield-outlined"}}},{"header":{"style":{"css":["attribute-table__header-cell"]},"content":{"type":"static","static":{"type":"text","content":"Target"}}},"body":{"style":{"css":["attribute-table__body-cell"]},"content":{"type":"attribute","name":"target"}}}]}},{"name":"attribute-list","concept":{"name":"attribute"},"type":"template","template":"list","tags":[],"projection":{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"name"}]}}},{"name":"property-table","concept":{"name":"property"},"type":"template","tags":[],"template":"table","projection":{"type":"row","row":[{"header":{"style":{"css":["property-table__header-cell"]},"content":{"type":"static","static":{"type":"text","content":"Name"}}},"body":{"style":{"css":["property-table__body-cell"]},"content":{"type":"attribute","name":"name","tag":"textfield-outlined"}}},{"header":{"style":{"css":["property-table__header-cell"]},"content":{"type":"static","static":{"type":"text","content":"Target"}}},"body":{"style":{"css":["property-table__body-cell"]},"content":{"type":"attribute","name":"target"}}}]}},{"concept":{"name":"primitive"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["target-choice"]},"choice":{"style":{"css":["target-choice-list"]},"option":{"style":{"css":["target-choice-option"]}}}}},{"concept":{"name":"string primitive"},"type":"layout","tags":["choice-selection","choice-selection-base"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"default","tag":"default-string"},{"type":"projection","tag":"choice-selection-full","content":{"type":"static","static":{"type":"text","content":"Show constraints"}},"style":{"css":["projection-constraints","projection-constraints--show"]}}]}},{"concept":{"name":"string primitive"},"type":"layout","tags":["choice-selection","choice-selection-full"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"default","tag":"default-string"},{"type":"layout","layout":{"type":"wrap","style":{"css":["target-constraint"]},"disposition":[{"type":"projection","tag":"choice-selection-base","content":{"type":"static","static":{"type":"text","content":"Hide"}},"style":{"css":["projection-constraints","projection-constraints--hide"]}},{"type":"static","static":{"type":"text","content":"Constraints","style":{"css":["title","target-constraint-title"]}}},{"type":"attribute","name":"length","tag":"length","style":{"css":["target-constraint-component"]},"optional":{"type":"static","static":{"type":"text","content":"Restrict length","style":{"css":["string-primitive-option","string-primitive-option--values"]}}}},{"type":"attribute","name":"values","tag":"value-set","style":{"css":["target-constraint-component"]},"optional":{"type":"static","static":{"type":"text","content":"Restrict accepted values","style":{"css":["string-primitive-option","string-primitive-option--values"]}}}}]}}]}},{"concept":{"name":"string primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"String"}}]}},{"concept":{"name":"number constraint"},"type":"field","tags":["length"],"projection":{"type":"choice","style":{"css":["constraint-choice","constraint-choice--length"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Length","style":{"css":["title","target-constraint__title"]}}}},"choice":{"style":{"css":["constraint-choice-list"]},"option":{"style":{"css":["constraint-choice-option"]}}}}},{"concept":{"name":"number constraint"},"type":"field","tags":["value"],"projection":{"type":"choice","style":{"css":["constraint-choice","constraint-choice--value"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Value","style":{"css":["title","target-constraint__title"]}}}},"choice":{"style":{"css":["constraint-choice-list"]},"option":{"style":{"css":["constraint-choice-option"]}}}}},{"concept":{"name":"number constraint"},"type":"field","tags":["cardinality"],"projection":{"type":"choice","style":{"css":["constraint-choice","constraint-choice--cardinality"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Cardinality","style":{"css":["title","target-constraint__title"]}}}},"choice":{"style":{"css":["constraint-choice-list"]},"option":{"style":{"css":["constraint-choice-option"]}}}}},{"concept":{"name":"number constraint"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["constraint-choice"]},"choice":{"style":{"css":["constraint-choice-list"]},"option":{"style":{"css":["constraint-choice-option"]}}}}},{"concept":{"name":"number constraint value"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value"}]}},{"concept":{"name":"number constraint value"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Fixed value"}}]}},{"concept":{"name":"number constraint range"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"min"},{"type":"attribute","name":"max"}]}},{"concept":{"name":"number constraint range"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Range"}}]}},{"concept":{"name":"number constraint range value"},"type":"layout","tags":[],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"value"},{"type":"attribute","name":"included"}]}},{"concept":{"name":"number primitive"},"type":"layout","tags":["choice-selection","choice-selection-base"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"default","tag":"default-number"},{"type":"projection","tag":"choice-selection-full","content":{"type":"static","static":{"type":"text","content":"Show constraints"}},"style":{"css":["projection-constraints","projection-constraints--show"]}}]}},{"concept":{"name":"number primitive"},"type":"layout","tags":["choice-selection","choice-selection-full"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"default","tag":"default-number"},{"type":"layout","layout":{"type":"wrap","style":{"css":["target-constraint"]},"disposition":[{"type":"projection","tag":"choice-selection-base","content":{"type":"static","static":{"type":"text","content":"Hide"}},"style":{"css":["projection-constraints","projection-constraints--hide"]}},{"type":"static","static":{"type":"text","content":"Constraints","style":{"css":["title","target-constraint-title"]}}},{"type":"attribute","name":"value","tag":"value","style":{"css":["target-constraint-component"]},"optional":{"type":"static","static":{"type":"text","content":"Restrict value","style":{"css":["string-primitive-option","string-primitive-option--values"]}}}},{"type":"attribute","name":"values","tag":"value-set","style":{"css":["target-constraint-component"]},"optional":{"type":"static","static":{"type":"text","content":"Restrict accepted values","style":{"css":["string-primitive-option","string-primitive-option--values"]}}}}]}}]}},{"concept":{"name":"number primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Number"}}]}},{"concept":{"name":"boolean primitive"},"type":"layout","tags":["choice-selection"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"default","tag":"default-boolean"}]}},{"concept":{"name":"boolean primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Boolean"}}]}},{"concept":{"name":"reference primitive"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"accept"}]}},{"concept":{"name":"reference primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Reference"}}]}},{"concept":{"name":"set primitive"},"type":"layout","tags":["choice-selection","choice-selection-base"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"ordered"},{"type":"layout","layout":{"type":"wrap","style":{"css":["target-accept"]},"disposition":[{"type":"static","static":{"type":"text","content":"Element target","style":{"css":["title","target-accept-title"]}}},{"type":"attribute","name":"accept"}]}},{"type":"projection","tag":"choice-selection-full","content":{"type":"static","static":{"type":"text","content":"Show constraints"}},"style":{"css":["projection-constraints","projection-constraints--show"]}}]}},{"concept":{"name":"set primitive"},"type":"layout","tags":["choice-selection","choice-selection-full"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"ordered"},{"type":"layout","layout":{"type":"wrap","style":{"css":["target-accept"]},"disposition":[{"type":"static","static":{"type":"text","content":"Element target","style":{"css":["title","target-accept-title"]}}},{"type":"attribute","name":"accept"}]}},{"type":"layout","layout":{"type":"wrap","style":{"css":["target-constraint"]},"disposition":[{"type":"projection","tag":"choice-selection-base","content":{"type":"static","static":{"type":"text","content":"Hide"}},"style":{"css":["projection-constraints","projection-constraints--hide"]}},{"type":"static","static":{"type":"text","content":"Constraints","style":{"css":["title","target-constraint-title"]}}},{"type":"attribute","name":"cardinality","tag":"cardinality","style":{"css":["target-constraint-component"]},"optional":{"type":"static","static":{"type":"text","content":"Restrict cardinality","style":{"css":["string-primitive-option","string-primitive-option--values"]}}}}]}}]}},{"concept":{"name":"set primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Set"}}]}},{"concept":{"name":"concept primitive"},"type":"layout","tags":["choice-selection"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"concept","tag":"concept-reference"}]}},{"concept":{"name":"concept primitive"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Containment"}}]}},{"concept":{"name":"value"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["target-choice"]},"choice":{"style":{"css":["target-choice-list"]},"option":{"style":{"css":["target-choice-option"]}}}}},{"concept":{"name":"number value"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value"}]}},{"concept":{"name":"number value"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Number"}}]}},{"concept":{"name":"string value"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"outlined-string"}]}},{"concept":{"name":"string value"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"String"}}]}},{"concept":{"name":"boolean value"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"choice-boolean"}]}},{"concept":{"name":"boolean value"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Boolean"}}]}},{"concept":{"name":"boolean"},"type":"field","tags":[],"projection":{"type":"binary","label":{"projection":{"type":"property","name":"name"}}}},{"concept":{"name":"boolean"},"type":"field","tags":["required-boolean"],"projection":{"type":"binary","label":false}},{"concept":{"name":"boolean"},"type":"field","tags":["default-boolean"],"projection":{"type":"choice","choice":{"option":{"style":{"css":["boolean-choice-option"]}},"style":{"css":["boolean-choice-list"]}},"before":{"projection":{"type":"static","static":{"type":"text","content":"Default value: ","style":{"css":["boolean-choice__label","label"]}}}},"style":{"css":["boolean-choice"]}}},{"concept":{"name":"boolean"},"type":"field","tags":["choice-boolean"],"projection":{"type":"choice","choice":{"option":{"style":{"css":["boolean-choice-option"]}},"style":{"css":["boolean-choice-list"]}},"style":{"css":["boolean-choice"]}}},{"concept":{"name":"number"},"type":"field","tags":[],"projection":{"type":"text","content":[{"type":"input","input":{"type":"number"}}],"style":{"css":["textfield--outlined"]}}},{"concept":{"name":"number"},"type":"field","tags":["default-number"],"projection":{"type":"text","content":[{"type":"static","static":{"type":"text","content":"Default value: ","style":{"css":["textfield--outlined__label","label"]}}},{"type":"input","input":{"placeholder":"default value","type":"number"}}],"style":{"css":["textfield--outlined"]}}},{"concept":{"name":"number"},"type":"field","tags":["list-item"],"projection":{"type":"text","content":[{"type":"input","input":{"type":"number"}}]}},{"concept":{"name":"reference"},"type":"field","tags":[],"projection":{"type":"link"}},{"concept":{"name":"reference"},"type":"field","tags":["prototype-reference"],"projection":{"type":"link","placeholder":{"type":"static","static":{"type":"text","content":"Select a prototype"}},"choice":{"style":{"css":["link--prototype__choices"]},"option":{"style":{"css":["link--prototype__choice"]}}},"style":{"css":["link--prototype"]}}},{"concept":{"name":"reference"},"type":"field","tags":["concept-reference"],"projection":{"type":"link","placeholder":{"type":"static","static":{"type":"text","content":"Select a concept"}},"choice":{"style":{"css":["link--concept__choices"]},"option":{"style":{"css":["link--concept__choice"]}}},"style":{"css":["link--concept"]}}},{"concept":{"name":"prototype"},"type":"field","tags":[],"projection":{"type":"choice"}},{"concept":{"name":"set"},"type":"field","tags":[],"projection":{"type":"list"}},{"concept":{"name":"set"},"type":"field","tags":["attribute-set"],"projection":{"type":"table","orientation":"column","table":{"header":{"style":{"css":["attribute-table-header"]}},"body":{"style":{"css":["attribute-table-body"]}},"style":{"css":["attribute-table"]}},"template":{"concept":"attribute"},"action":{"add":{"projection":{"type":"static","static":{"type":"text","help":"Add an attribute","content":"Add"}}},"remove":{"style":{"css":"cell-list__btn-remove"},"projection":{"type":"static","static":{"type":"text","help":"Remove attribute","content":"Remove"}}}}}},{"concept":{"name":"set"},"type":"field","tags":["attribute-set"],"projection":{"type":"list","orientation":"horizontal","template":{"concept":"attribute"},"list":{"style":{"css":["attribute-list"]},"item":{"style":{"css":["attribute-list-item"]}}},"action":{"add":{"projection":{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","help":"Add an attribute","content":"Add"}}]}}},"remove":{"projection":{"type":"layout","layout":{"type":"wrap","style":{"css":"attribute-list__btn-remove"},"disposition":[{"type":"static","static":{"type":"text","help":"Remove attribute","content":""}}]}}}},"style":{"css":["attribute-list-container"]}}},{"concept":{"name":"set"},"type":"field","tags":["property-set"],"projection":{"type":"table","orientation":"column","table":{"header":{"style":{"css":["attribute-table-header"]}},"body":{"style":{"css":["attribute-table-body"]}},"style":{"css":["attribute-table"]}},"template":{"concept":"property","name":"property-table"},"action":{"add":{"projection":{"type":"static","static":{"type":"text","help":"Add a property","content":"Add"}}},"remove":{"style":{"css":"cell-list__btn-remove"},"projection":{"type":"static","static":{"type":"text","help":"Remove property","content":"Remove"}}}}}},{"concept":{"name":"set"},"type":"field","tags":["value-set"],"projection":{"type":"list","orientation":"horizontal","style":{"css":["value-list-container"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Restricted values","style":{"css":["title","value-list-title"]}}}},"list":{"style":{"css":["value-list"]},"item":{"template":{"tag":"list-item"},"style":{"css":["value-list-item"]}}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","help":"Add a value","content":"Add","style":{"css":["css-list__btn-add"]}}}},"remove":{"projection":{"type":"static","static":{"type":"text","help":"Remove value","content":"","style":{"css":["css-list__btn-remove"]}}}}}}},{"concept":{"name":"set"},"type":"field","tags":["string-set"],"projection":{"type":"list","orientation":"vertical","list":{"style":{"css":["string-list"]},"item":{"template":{"tag":"list-item"},"style":{"css":["string-list-item"]}}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","help":"Add a value","content":"Add","style":{"css":["string-list__btn-add"]}}}}}}},{"concept":{"name":"name"},"type":"field","tags":[],"projection":{"type":"text","content":[{"type":"input"}]}},{"concept":{"name":"name"},"type":"field","tags":["readonly-string"],"projection":{"type":"text","content":[{"type":"input"}],"readonly":true}},{"concept":{"name":"name"},"type":"field","tags":["textfield-outlined"],"projection":{"type":"text","content":[{"type":"input"}],"style":{"css":["textfield--outlined"]}}},{"concept":{"name":"string"},"type":"field","tags":[],"projection":{"type":"text","content":[{"type":"input"}]}},{"concept":{"name":"string"},"type":"field","tags":["readonly-string"],"projection":{"type":"text","readonly":true,"content":[{"type":"input"}]}},{"concept":{"name":"string"},"type":"field","tags":["list-item"],"projection":{"type":"text","content":[{"type":"input"}]}},{"concept":{"name":"string"},"type":"field","tags":["description-string"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"Description"}}],"multiline":true,"style":{"css":["textfield--description"]}}},{"concept":{"name":"string"},"type":"field","tags":["default-string"],"projection":{"type":"text","content":[{"type":"static","static":{"type":"text","content":"Default value: ","style":{"css":["textfield--outlined__label","label"]}}},{"type":"input","input":{"placeholder":"default value"}}],"style":{"css":["textfield--outlined"]}}},{"concept":{"name":"string"},"type":"field","tags":["outlined-string"],"projection":{"type":"text","content":[{"type":"input"}],"style":{"css":["textfield--outlined"]}}}],"editor":{"name":"Gentleman concept","body":{"css":"model-concept-list"},"build":"gentleman_concept"}}')},26:e=>{e.exports=JSON.parse('{"concept":[{"name":"projection","nature":"prototype","attributes":[{"name":"global","target":{"name":"boolean"},"value":false,"required":true},{"name":"concept","target":{"name":"concept"},"required":true},{"name":"name","target":{"name":"string","min":2},"required":true},{"name":"tags","target":{"name":"set","accept":{"name":"tag"}},"min":0}]},{"name":"template projection","nature":"concrete","prototype":"projection","attributes":[{"name":"template","target":{"name":"template"}}]},{"name":"concept projection","nature":"concrete","prototype":"projection","attributes":[{"name":"projection","target":{"name":"component"}}]},{"name":"component","nature":"prototype","attributes":[]},{"name":"layout component","nature":"concrete","prototype":"component","attributes":[{"name":"layout","target":{"name":"layout"}}],"build":{"type":"layout"}},{"name":"field component","nature":"concrete","prototype":"component","attributes":[{"name":"field","target":{"name":"field"}}],"build":{"type":"field"}},{"name":"concept","nature":"concrete","attributes":[{"name":"name","target":{"name":"string","min":2}},{"name":"prototype","target":{"name":"string","min":2}}]},{"name":"global","nature":"concrete","attributes":[{"name":"tags","target":{"name":"set","accept":{"name":"tag"}}}],"unique":true},{"name":"tag","nature":"derivative","base":"string","pattern":"^\\\\w+(-\\\\w+)*$"},{"name":"render","nature":"prototype","attributes":[{"name":"style","target":{"name":"style"},"required":false}]},{"name":"field","nature":"prototype","prototype":"render","attributes":[{"name":"readonly","target":{"name":"boolean"},"value":false},{"name":"disabled","target":{"name":"boolean"},"value":false}]},{"name":"text field","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"element"},"min":1}},{"name":"multiline","target":{"name":"boolean"},"value":false}],"build":{"contentType":"field","elementType":"text"}},{"name":"binary field","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"state element"},"min":1,"max":2}}],"build":{"contentType":"field","elementType":"binary"}},{"name":"state element","nature":"concrete","attributes":[{"name":"state","target":{"name":"boolean"},"required":false},{"name":"content","target":{"name":"element"}}]},{"name":"choice field","nature":"concrete","prototype":"field","attributes":[{"name":"choice template","target":{"name":"template reference"}},{"name":"selection template","target":{"name":"template reference"}}],"build":{"contentType":"field","elementType":"choice"}},{"name":"link field","nature":"concrete","prototype":"field","attributes":[{"name":"choice template","target":{"name":"template reference"}},{"name":"value template","target":{"name":"template reference"}}],"build":{"contentType":"field","elementType":"link"}},{"name":"template reference","nature":"concrete","attributes":[{"name":"tag","target":{"name":"tag"}},{"name":"name","target":{"name":"string"}}]},{"name":"list field","nature":"concrete","prototype":"field","attributes":[{"name":"orientation","target":{"name":"string","values":["horizontal","vertical"]}},{"name":"action","target":{"name":"list field action"}},{"name":"item template","target":{"name":"template reference"}}],"build":{"contentType":"field","elementType":"list"}},{"name":"list field action","nature":"concrete","attributes":[{"name":"add","target":{"name":"action"}},{"name":"remove","target":{"name":"action"}}]},{"name":"action","nature":"concrete","prototype":"render","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"static element"}}}]},{"name":"table field","nature":"concrete","prototype":"$field","attributes":[{"name":"orientation","target":{"name":"string","values":["column","row"]}},{"name":"template","target":{"name":"reference","accept":{"name":"template"}}},{"name":"table","target":{"name":"table"}}],"build":{"contentType":"field","elementType":"table"}},{"name":"table","nature":"concrete","prototype":"render","attributes":[{"name":"header","target":{"name":"style"},"required":false},{"name":"body","target":{"name":"style"},"required":true},{"name":"footer","target":{"name":"style"},"required":false}]},{"name":"element","nature":"prototype","prototype":"render","attributes":[{"name":"name","target":{"name":"string"}}]},{"name":"layout","nature":"prototype","prototype":"element","attributes":[{"name":"elements","target":{"name":"set","accept":{"name":"element"},"min":1}}]},{"name":"stack layout","nature":"concrete","prototype":"layout","attributes":[{"name":"orientation","target":{"name":"string","values":["horizontal","vertical"]}}],"build":{"contentType":"layout","elementType":"stack"}},{"name":"wrap layout","nature":"concrete","prototype":"layout","build":{"contentType":"layout","elementType":"wrap"}},{"name":"table layout","nature":"concrete","prototype":"$layout","attributes":[{"name":"elements","target":{"name":"set","accept":{"name":"row"},"min":1}}],"build":{"contentType":"layout","elementType":"table"}},{"name":"relative layout","nature":"concrete","prototype":"$layout","attributes":[{"name":"elements","target":{"name":"set","accept":{"name":"element"},"min":1}}],"build":{"contentType":"layout","elementType":"relative"}},{"name":"row","nature":"concrete","prototype":"render","attributes":[{"name":"cells","target":{"name":"set","accept":{"name":"cell"},"min":1}}]},{"name":"cell","nature":"concrete","prototype":"render","attributes":[{"name":"span","target":{"name":"number","min":0}},{"name":"content","target":{"name":"element"}}]},{"name":"template","nature":"prototype","attributes":[{"name":"style","target":{"name":"style"},"required":false}]},{"name":"table template","nature":"concrete","prototype":"template","attributes":[{"name":"row","target":{"name":"set","accept":{"name":"table cell"},"min":1}}]},{"name":"table cell","nature":"concrete","attributes":[{"name":"header","target":{"name":"static element"}},{"name":"body","target":{"name":"attribute element"}}]},{"name":"table header cell","nature":"concrete","prototype":"render","attributes":[{"name":"content","target":{"name":"static element"}}]},{"name":"table body cell","nature":"concrete","prototype":"render","attributes":[{"name":"content","target":{"name":"attribute element"}}]},{"name":"static element","nature":"prototype","prototype":"element","attributes":[]},{"name":"atomic element","nature":"prototype","prototype":"static element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"static text","nature":"concrete","prototype":"atomic element","attributes":[{"name":"content type","alias":"contentType","target":{"name":"string","values":["text","html"]}}],"build":{"contentType":"static","elementType":"text"}},{"name":"static image","nature":"concrete","prototype":"atomic element","attributes":[{"name":"height","target":{"name":"number"}},{"name":"width","target":{"name":"number"}},{"name":"url","alias":"src","target":{"name":"string"}},{"name":"alternative text","alias":"alt","target":{"name":"string"}}],"build":{"contentType":"static","elementType":"image"}},{"name":"static HTML","nature":"concrete","prototype":"atomic element","attributes":[{"name":"selector","target":{"name":"string"}}],"build":{"contentType":"static","elementType":"html"}},{"name":"static link","nature":"concrete","prototype":"static element","attributes":[{"name":"url","alias":"href","target":{"name":"string"}},{"name":"url type","alias":"urlType","target":{"name":"string","values":["link","email","phone"]}},{"name":"content","target":{"name":"set","accept":{"name":"static element"}}},{"name":"download","target":{"name":"boolean"}}],"build":{"contentType":"static","elementType":"link"}},{"name":"dynamic element","nature":"prototype","prototype":"element","attributes":[]},{"name":"input","nature":"concrete","prototype":"dynamic element","attributes":[{"name":"placeholder","target":{"name":"string"}}],"build":{"contentType":"dynamic","elementType":"input"}},{"name":"checkbox","nature":"concrete","prototype":"dynamic element","attributes":[{"name":"label","target":{"name":"string"}}],"build":{"contentType":"dynamic","elementType":"checkbox"}},{"name":"attribute element","nature":"concrete","prototype":"element","attributes":[{"name":"value","target":{"name":"string"}},{"name":"tag","target":{"name":"tag"},"required":false}],"build":{"contentType":"attribute"}},{"name":"style","nature":"concrete","attributes":[{"name":"css","target":{"name":"set","accept":{"name":"string"},"min":1}}]}],"projection":[{"concept":{"name":"global"},"type":"layout","tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["model-projection-header"]},"disposition":[{"type":"static","static":{"type":"text","content":"Global","style":{"css":["model-projection-header__title"]}}}]}},{"type":"layout","layout":{"type":"stack","orientation":"vertical","style":{"css":["model-projection-body"]},"disposition":[{"type":"attribute","name":"tags","tag":"tag-set"}]}}]}},{"concept":{"name":"template projection"},"type":"layout","global":false,"tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["model-projection-header"]},"disposition":[{"type":"static","static":{"type":"text","content":"Template Projection","style":{"css":["model-projection-header__title"]}}},{"type":"attribute","name":"name"}]}},{"type":"layout","layout":{"type":"stack","orientation":"vertical","style":{"css":["model-projection-body"]},"disposition":[{"type":"attribute","name":"concept"},{"type":"attribute","name":"tags","tag":"tag-reference-set","optional":{"type":"layout","layout":{"type":"wrap","style":{"css":["projection-option","projection-option--tags"]},"disposition":[{"type":"static","static":{"type":"text","content":"Define tags"}}]}}},{"type":"attribute","name":"template"}]}}]}},{"concept":{"name":"concept projection"},"type":"layout","global":true,"tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["line","model-projection__line"]},"disposition":[{"type":"static","static":{"type":"text","content":"Define projection as","style":{"css":["keyword"]}}},{"type":"attribute","name":"global","tag":"global-boolean"}]}},{"type":"attribute","name":"concept"},{"type":"attribute","name":"tags","tag":"tag-set"},{"type":"layout","layout":{"type":"wrap","style":{"css":["line","model-projection__line"]},"disposition":[{"type":"static","static":{"type":"text","content":"PROJECTION COMPONENT","style":{"css":["title"]}}}]}},{"type":"attribute","name":"projection"}]}},{"concept":{"name":"component"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["component-choice"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Define component as","style":{"css":["keyword"]}}}},"input":{"style":{"css":["component-choice-input"]}},"choice":{"style":{"css":["component-choice-list"]},"option":{"style":{"css":["component-choice-option"]}}},"selection":{"style":{"css":["component-choice-selection"]}}}},{"concept":{"name":"layout component"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["layout-component"]},"disposition":[{"type":"attribute","name":"layout"}]}},{"concept":{"name":"layout component"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Layout component","content":"Layout"}}]}},{"concept":{"name":"field component"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-component"]},"disposition":[{"type":"attribute","name":"field"}]}},{"concept":{"name":"field component"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Layout component","content":"Field"}}]}},{"concept":{"name":"concept"},"type":"layout","tags":[],"projection":{"type":"stack","orientation":"vertical","style":{"css":["block"]},"disposition":[{"type":"static","static":{"type":"text","content":"For concept with ","help":"Projection target concept","style":{"css":["keyword","block__line"]}}},{"type":"layout","layout":{"type":"wrap","style":{"css":["block__content"]},"disposition":[{"type":"attribute","name":"name","tag":"concept-string"},{"type":"attribute","name":"prototype","tag":"concept-string"}]}}]}},{"concept":{"name":"style"},"type":"layout","readonly":true,"tags":[],"projection":{"type":"wrap","style":{"css":["projection-style-container"]},"disposition":[{"type":"attribute","name":"css","tag":"css-set"}]}},{"concept":{"name":"field"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["field-choice"]},"before":{"projection":{"type":"static","static":{"type":"text","help":"Layout component","content":"Define field as","style":{"css":["keyword"]}}}},"input":{"style":{"css":["field-choice-input"]}},"choice":{"style":{"css":["field-choice-list"]},"option":{"style":{"css":["field-choice-option"]}}}}},{"concept":{"name":"text field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config","field-config--text"]},"disposition":[{"type":"attribute","name":"disabled","tag":"field-binary-state"},{"type":"attribute","name":"readonly","tag":"field-binary-state"},{"type":"attribute","name":"multiline","tag":"field-binary-state"},{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"text field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Text Field","content":"TextField"}}]}},{"concept":{"name":"binary field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config","field-config--binary"]},"disposition":[{"type":"attribute","name":"disabled","tag":"field-binary-state"},{"type":"attribute","name":"readonly","tag":"field-binary-state"},{"type":"attribute","name":"content","tag":"state-element-set"}]}},{"concept":{"name":"binary field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Binary Field","content":"BinaryField"}}]}},{"concept":{"name":"choice field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config-container"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["field-state-properties"]},"disposition":[{"type":"attribute","name":"disabled","tag":"field-binary-state"},{"type":"attribute","name":"readonly","tag":"field-binary-state"},{"type":"static","static":{"type":"text","content":"Use choice option template with ","style":{"css":["keyword","block__line"]}}},{"type":"attribute","name":"choice template"},{"type":"static","static":{"type":"text","content":"Use choice selection template with ","style":{"css":["keyword","block__line"]}}},{"type":"attribute","name":"selection template"}]}}]}},{"concept":{"name":"choice field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Choice Field","content":"ChoiceField"}}]}},{"concept":{"name":"link field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config-container"]},"disposition":[{"type":"attribute","name":"disabled","tag":"field-binary-state"},{"type":"attribute","name":"readonly","tag":"field-binary-state"},{"type":"static","static":{"type":"text","content":"Use reference choice template with ","style":{"css":["keyword","block__line"]}}},{"type":"attribute","name":"choice template"},{"type":"static","static":{"type":"text","content":"Use reference value template with ","style":{"css":["keyword","block__line"]}}},{"type":"attribute","name":"value template"}]}},{"concept":{"name":"link field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Link Field","content":"LinkField"}}]}},{"concept":{"name":"list field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["listfield-config"]},"disposition":[{"type":"attribute","name":"orientation","tag":"concept-string"},{"type":"static","static":{"type":"text","content":"Use item template with ","style":{"css":["keyword","block__line"]}}},{"type":"attribute","name":"item template"},{"type":"attribute","name":"action"}]}},{"concept":{"name":"list field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"List Field","content":"ListField"}}]}},{"concept":{"name":"list field action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-action-config"]},"disposition":[{"type":"static","static":{"type":"text","content":"List actions","style":{"css":["title"]}}},{"type":"static","static":{"type":"text","content":"Define \'add\' action:","style":{"css":["keyword"]}}},{"type":"attribute","name":"add"},{"type":"static","static":{"type":"text","content":"Define \'remove\' action:","style":{"css":["keyword"]}}},{"type":"attribute","name":"remove"}]}},{"concept":{"name":"action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["action-config"]},"disposition":[{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"table field"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config-container"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["field-state-properties"]},"disposition":[{"type":"attribute","name":"disabled","tag":"field-binary-state"},{"type":"attribute","name":"readonly","tag":"field-binary-state"}]}},{"type":"attribute","name":"concept","tag":"concept-string"},{"type":"attribute","name":"template","tag":"template-string"}]}},{"concept":{"name":"table field"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Table Field","content":"TableField"}}]}},{"concept":{"name":"input"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["input-config"]},"disposition":[{"type":"attribute","name":"placeholder","tag":"placeholder-string"}]}},{"concept":{"name":"input"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"HTML input","content":"Input"}}]}},{"concept":{"name":"checkbox"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["checkbox-config"]},"disposition":[{"type":"attribute","name":"label","tag":"concept-string"}]}},{"concept":{"name":"checkbox"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"HTML checkbox","content":"Checkbox"}}]}},{"concept":{"name":"layout"},"type":"field","tags":[],"projection":{"type":"choice","style":{"css":["layout-choice"]},"before":{"projection":{"type":"static","static":{"type":"text","help":"Layout component","content":"Begin layout with","style":{"css":["keyword"]}}}},"input":{"style":{"css":["layout-choice-input"]}},"choice":{"style":{"css":["layout-choice-list"]},"option":{"style":{"css":["layout-choice-option"]}}}}},{"concept":{"name":"stack layout"},"type":"layout","tags":["choice-selection","choice-selection--content"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"attribute","name":"orientation","tag":"concept-string"},{"type":"attribute","name":"elements","tag":"stack-elements"},{"type":"projection","tag":"choice-selection--style","content":{"type":"static","static":{"type":"text","content":"Go to style"}},"style":{"css":["projection-style","projection-style--show"]}}]}},{"concept":{"name":"stack layout"},"type":"layout","tags":["choice-selection","choice-selection--style"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"projection","tag":"choice-selection--content","content":{"type":"static","static":{"type":"text","content":"Return to content"}},"style":{"css":["projection-style","projection-style--hide"]}},{"type":"attribute","name":"style"}]}},{"concept":{"name":"stack layout"},"type":"layout","tags":["choice"],"context":{"name":"stack"},"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Stack Layout","content":"StackLayout"}}]}},{"concept":{"name":"wrap layout"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["stack-layout-body"]},"disposition":[{"type":"attribute","name":"elements","tag":"element-set"}]}}]}},{"concept":{"name":"wrap layout"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["stack-layout-body"]},"disposition":[{"type":"attribute","name":"elements","tag":"element-set"}]}}]}},{"concept":{"name":"wrap layout"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Wrap Layout","content":"WrapLayout"}}]}},{"concept":{"name":"table layout"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["stack-layout-body"]},"disposition":[{"type":"attribute","name":"elements","tag":"element-set"}]}}]}},{"concept":{"name":"table layout"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Table Layout","content":"Table"}}]}},{"concept":{"name":"row"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config-container"]},"disposition":[{"type":"attribute","name":"cells"}]}},{"concept":{"name":"cell"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["field-config-container"]},"disposition":[{"type":"attribute","name":"span"},{"type":"attribute","name":"content"}]}},{"concept":{"name":"relative layout"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Wrap Layout","content":"Relative"}}]}},{"concept":{"name":"template"},"type":"field","tags":[],"projection":{"type":"choice","choice":{"style":{"css":["template-choice"]},"option":{"style":{"css":["template-choice-option"]}}}}},{"concept":{"name":"table template"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["stack-layout"]},"disposition":[{"type":"layout","layout":{"type":"wrap","style":{"css":["stack-layout-body"]},"disposition":[{"type":"text","style":{"css":["table-section-title"]},"content":"Header"},{"type":"attribute","name":"header","tag":"cell-set"},{"type":"text","style":{"css":["table-section-title"]},"content":"Body"},{"type":"attribute","name":"body","tag":"cell-set"}]}}]}},{"concept":{"name":"table template"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"text","content":"Table template"}]}},{"concept":{"name":"table header cell"},"type":"layout","tags":["list-item"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"projection"}]}},{"concept":{"name":"table cell"},"type":"layout","tags":["list-item"],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"projection"}]}},{"concept":{"name":"template reference"},"type":"layout","tags":[],"projection":{"type":"wrap","disposition":[{"type":"attribute","name":"tag","tag":"tag-string"},{"type":"attribute","name":"name","tag":"concept-string"}],"style":{"css":["block__content"]}}},{"concept":{"name":"state element"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"state"},{"type":"attribute","name":"content"}]}},{"concept":{"name":"element"},"type":"field","tags":["list-item"],"projection":{"type":"choice","style":{"css":["element-choice"]},"choice":{"style":{"css":["element-choice-list"]},"option":{"style":{"css":["element-choice-option"]}}},"input":{"style":{"css":["element-choice-input"]}},"action":{"filter":{"projection":{"type":"text","content":"Filter"}},"reset":{"projection":{"type":"text","content":"Reset"}}}}},{"concept":{"name":"static element"},"type":"field","tags":["list-item"],"projection":{"type":"choice","style":{"css":["static-choice-field"]},"choice":{"style":{"css":["static-choice"]},"option":{"style":{"css":["static-choice-option"]}}}}},{"concept":{"name":"static element"},"type":"field","tags":["field-extra"],"projection":{"type":"choice","style":{"css":["static-choice-field"]},"choice":{"style":{"css":["static-choice"]},"option":{"style":{"css":["static-choice-option"]}}}}},{"concept":{"name":"static text"},"type":"layout","tags":["choice-selection","choice-selection--content"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"content","tag":"text-string"},{"type":"attribute","name":"content type","tag":"concept-string"},{"type":"projection","tag":"choice-selection--style","content":{"type":"static","static":{"type":"text","content":"style"}},"style":{"css":["projection-style","projection-style--show"]}}],"style":{"css":["static-text"]}}},{"concept":{"name":"static text"},"type":"layout","tags":["choice-selection","choice-selection--style"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"projection","tag":"choice-selection--content","content":{"type":"static","static":{"type":"text","content":"Back"}},"style":{"css":["projection-style","projection-style--hide"]}},{"type":"attribute","name":"style"}]}},{"concept":{"name":"static text"},"type":"layout","tags":["choice","stack-choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Text"}}]}},{"concept":{"name":"static HTML"},"type":"layout","tags":["choice-selection"],"projection":{"type":"wrap","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"selector","tag":"concept-string"}]}},{"concept":{"name":"static HTML"},"type":"layout","tags":["choice","stack-choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"HTML"}}]}},{"concept":{"name":"static image"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["static-image"]},"disposition":[{"type":"attribute","name":"url","tag":"concept-string"},{"type":"attribute","name":"alternative text","tag":"concept-string"}]}},{"concept":{"name":"static image"},"type":"layout","tags":["choice","stack-choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Image"}}]}},{"concept":{"name":"static link"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"url","tag":"concept-string"},{"type":"attribute","name":"url type","tag":"concept-string"},{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"static link"},"type":"layout","tags":["choice","stack-choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Link"}}]}},{"concept":{"name":"attribute element"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","style":{"css":["attribute-element"]},"disposition":[{"type":"attribute","name":"value","tag":"concept-string"},{"type":"attribute","name":"tag","tag":"tag-string"}]}},{"concept":{"name":"attribute element"},"type":"layout","tags":["choice","stack-choice"],"projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Attribute"}}]}},{"concept":{"name":"boolean"},"type":"field","tags":[],"projection":{"type":"binary"}},{"concept":{"name":"boolean"},"type":"field","tags":["global-boolean"],"projection":{"type":"binary","style":{"css":["global-switch-field"]},"label":{"style":{"css":["global-switch-field__label"]}},"state":[{"rule":{"type":"eq","eq":[{"prop":"value"},true]},"result":{"label":{"projection":{"type":"static","static":{"type":"text","content":"Global projection"}}}}},{"rule":{"type":"eq","eq":[{"prop":"value"},false]},"result":{"label":{"projection":{"type":"static","static":{"type":"text","content":"Non Global"}}}}}],"input":{"style":{"css":["global-switch-field__input"]}}}},{"concept":{"name":"boolean"},"type":"field","tags":["field-binary-state"],"projection":{"type":"binary","style":{"css":["yesno-field"]},"label":{"style":{"css":["yesno-field__value"]}},"before":{"projection":{"type":"property","style":{"css":["label","yesno-field__label"]},"name":"name"}},"state":[{"rule":{"type":"eq","eq":[{"prop":"value"},true]},"result":{"label":{"projection":{"type":"static","static":{"type":"text","content":"yes"}}}}},{"rule":{"type":"eq","eq":[{"prop":"value"},false]},"result":{"label":{"projection":{"type":"static","static":{"type":"text","content":"no"}}}}}],"input":{"style":{"css":["yesno-field__input"]}}}},{"concept":{"name":"number"},"type":"field","tags":[],"projection":{"type":"text"}},{"concept":{"name":"prototype"},"type":"field","tags":[],"projection":{"type":"choice"}},{"concept":{"name":"reference"},"type":"field","tags":[],"projection":{"type":"link"}},{"concept":{"name":"reference"},"type":"field","tags":["tag-reference"],"projection":{"type":"link","placeholder":{"type":"static","static":{"type":"text","content":"null"}}}},{"concept":{"name":"set"},"type":"field","tags":[],"projection":{"type":"list"}},{"concept":{"name":"set"},"type":"field","tags":["cell-set"],"projection":{"type":"list","orientation":"horizontal","style":{"css":["cell-list-container"]},"list":{"style":{"css":["cell-list"]},"item":{"style":{"css":["cell-list-item"]}}},"action":{"add":{"projection":{"type":"text","help":"Add a cell","content":"Add"}},"remove":{"style":{"css":["cell-list__btn-remove"]},"projection":{"type":"text","help":"Delete cell","content":""}}}}},{"concept":{"name":"set"},"type":"field","tags":["tag-set"],"projection":{"type":"list","orientation":"horizontal","style":{"css":["tag-list-container"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Tags","style":{"css":["tag-list-title"]}}}},"list":{"style":{"css":["tag-list"]},"item":{"template":{"tag":"tag-item"},"style":{"css":["tag-list-item"]}}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","content":"Add"}}},"remove":{"projection":{"type":"static","static":{"type":"text","style":{"css":["tag-list__btn-remove"]},"content":""}}}}}},{"concept":{"name":"set"},"type":"field","tags":["tag-reference-set"],"projection":{"type":"list","orientation":"horizontal","style":{"css":["tag-list-container"]},"before":{"projection":{"type":"static","static":{"type":"text","style":{"css":["keyword"]},"content":"Using tags"}}},"list":{"item":{"template":{"tag":"tag-reference"},"style":{"css":["tag-list-item"]}},"style":{"css":["tag-list"]}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","content":"Add"}}},"remove":{"projection":{"type":"static","static":{"type":"text","content":"","style":{"css":["tag-list__btn-remove"]}}}}}}},{"concept":{"name":"set"},"type":"field","tags":["css-set"],"projection":{"type":"list","orientation":"horizontal","style":{"css":["css-list-container"]},"before":{"projection":{"type":"text","style":{"css":["tag-list-title"]},"content":"CSS class selectors"}},"list":{"item":{"template":{"tag":"css-string"},"style":{"css":["css-list-item"]}},"style":{"css":["css-list"]}},"action":{"add":{"projection":{"type":"text","content":"Add class"}},"remove":{"projection":{"type":"text","content":"","style":{"css":["css-list__btn-remove"]}}}}}},{"concept":{"name":"set"},"type":"field","tags":["element-set","stack-elements"],"projection":{"type":"list","style":{"css":["element-list-container"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Elements","style":{"css":["title","element-list__title"]}}}},"list":{"style":{"css":["element-list"]},"item":{"template":{"tag":"list-item"},"style":{"css":["element-list-item"]}}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","style":{"css":["element-list__btn-add"]},"content":"+"}}},"remove":{"projection":{"type":"static","static":{"type":"text","style":{"css":["element-list__btn-remove"]},"content":""}}}}}},{"concept":{"name":"set"},"type":"field","tags":["state-element-set"],"projection":{"type":"list","style":{"css":["element-list-container"]},"before":{"projection":{"type":"static","static":{"type":"text","content":"Elements","style":{"css":["title","element-list__title"]}}}},"list":{"style":{"css":["element-list"]},"item":{"template":{"tag":"list-item"},"style":{"css":["element-list-item"]}}},"action":{"add":{"projection":{"type":"static","static":{"type":"text","style":{"css":["element-list__btn-add"]},"content":"+"}}},"remove":{"projection":{"type":"static","static":{"type":"text","style":{"css":["element-list__btn-remove"]},"content":""}}}}}},{"concept":{"name":"string"},"type":"field","tags":[],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":""}}]}},{"concept":{"name":"string"},"type":"field","tags":["attribute-string"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"name","style":{"css":["textfield--attribute__input"]}}}],"style":{"css":["textfield--attribute"]}}},{"concept":{"name":"string"},"type":"field","tags":["value-string"],"projection":{"type":"text","content":[{"type":"input","input":{"style":{"css":["textfield--value__input"]}}}],"style":{"css":["textfield--value"]}}},{"concept":{"name":"string"},"type":"field","tags":["tag-string"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"Tag","style":{"css":["textfield--tag__input"]}}}],"style":{"css":["textfield--tag"]}}},{"concept":{"name":"string"},"type":"field","tags":["css-string"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"class","style":{"css":["textfield--css__input"]}}}],"style":{"css":["textfield--css"]}}},{"concept":{"name":"string"},"type":"field","tags":["concept-string"],"projection":{"type":"text","placeholder":"name","content":[{"type":"property","style":{"css":["label","textfield--concept__label"]},"name":"name"},{"type":"input","input":{"style":{"css":["textfield--concept__input"]},"placeholder":"null"}}],"style":{"css":["textfield--concept"]}}},{"concept":{"name":"string"},"type":"field","tags":["placeholder-string"],"projection":{"type":"text","content":[{"type":"static","static":{"type":"text","style":{"css":["textfield--placeholder__label"]},"content":"Placeholder"}},{"type":"input","input":{"style":{"css":["textfield--placeholder__input"]}}}],"style":{"css":["textfield--placeholder"]}}},{"concept":{"name":"string"},"type":"field","tags":["text-string"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"enter text...","style":{"css":["textfield--text__input"]}}}],"multiline":true,"style":{"css":["textfield--text"]}}},{"concept":{"name":"string"},"type":"field","tags":["table-concept-string"],"projection":{"type":"text","content":[{"type":"static","static":{"type":"text","content":"Table concept","style":{"css":["textfield--template__label"]}}},{"type":"input","input":{"style":{"css":["textfield--template__input"]}}}],"style":{"css":["textfield--template"]}}},{"concept":{"name":"tag"},"type":"field","tags":["tag-item"],"projection":{"type":"text","content":[{"type":"input","input":{"placeholder":"Tag","style":{"css":["textfield--tag__input"]}}}],"style":{"css":["textfield--tag"]}}},{"concept":{"name":"tag"},"type":"field","tags":["tag-string"],"projection":{"type":"text","placeholder":"name","content":[{"type":"property","style":{"css":["label","textfield--concept__label"]},"name":"name"},{"type":"input","input":{"style":{"css":["textfield--concept__input"]},"placeholder":"Tag"}}],"style":{"css":["textfield--concept"]}}}],"editor":{"body":{"css":["model-concept-list"]},"build":"gentleman_projection"}}')}},t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}(()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?m(e)?t:e:y(e)?t:e}function o(e){return h(e)&&0===e.length}function r(e){return"string"==typeof e||e instanceof String}function c(e){return"function"==typeof e}function l(t){return!y(t)&&"object"===e(t)}function h(e){return!y(e)&&"function"==typeof e[Symbol.iterator]}function p(e){return h(e)&&!r(e)}function d(e){return null===e}function u(e){return!e||r(e)&&(0===e.length||/^\s*$/.test(e))}function m(e){return void 0===e}function y(e){return d(e)||m(e)}var f=Object.prototype.hasOwnProperty,b=(Object.prototype.isPrototypeOf,function(e,t){return f.call(e,t)});function g(e){if(y(e)||!l(e))return e;var t=e.constructor();for(var i in e)b(e,i)&&(e.isActiveClone=null,t[i]=g(e[i]),delete e.isActiveClone);return t}function v(e){return u(e)?e:e.toLowerCase().replace(/\b\w/g,(function(e){return e.toUpperCase()}))}var j=function(e,i){if(!Array.isArray(e)||!c(i))throw new TypeError("Bad argument");for(var n=0;n<e.length;n++){var s=e[n];if(!i.apply(void 0,t(Array.isArray(s)?s:[s])))return!1}return!0},w=function(e){return!y(e)&&e.nodeType===Node.ELEMENT_NODE},x=function(e){return e instanceof Node},E=function(e){return w(e)&&e instanceof Element},C=function(e,t){return!!(w(e)&&e instanceof HTMLElement)&&(!h(t)||(i=e,s=Array.isArray(t)?t:[t],a=function(e){return i instanceof e},r=function(e){return i.tagName===e.toUpperCase()},c=function(e){return Array.isArray(e)?e.includes(i.type):i.type===e},s.some((function(e){if(!h(e))return!1;var t,i,s=e,l=null;if(Array.isArray(e)){var d=(i=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,s=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,i)||n(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());s=d[0],l=d[1]}s=s.toLowerCase();var m,y="HTML".concat(b(k,s)?k[s]:u(m=s)?m:v(m.replace(/[_-]+/g," ").replace(/\s+/g," ").trim()).replace(/\s+/g,""),"Element");return!(!a(window[y])&&!r(s))&&(!(p(l)&&!o(l))||c(l))}))));var i,s,a,r,c},k={a:"Anchor",br:"BR",dl:"DList",datalist:"DataList",fieldset:"FieldSet",frameset:"FrameSet",hr:"HR",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",li:"LI",ol:"OList",optgroup:"OptGroup",p:"Paragraph",q:"Quote",blockquote:"Quote",caption:"TableCaption",td:"TableCell",th:"TableCell",col:"TableCol",tr:"TableRow",tbody:"TableSection",thead:"TableSection",tfoot:"TableSection",textarea:"TextArea",ul:"UList"},T=function(e){return function(e){return!y(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(e)&&e instanceof DocumentFragment};function L(e,t){if(!r(t))return null;var i=document.createElement("template");return i.innerHTML=t.trim(),i.content[e]}var _=L.bind(null,"firstChild");function A(e,t,i){e[t]=i}function O(e,t,i){e.setAttribute(t,i)}L.bind(null,"childNodes");var S="accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,html,style,tabindex,text,title",V={accesskey:[A,"accessKey"],autocapitalize:[A,"autocapitalize"],class:[function(e,i){var n;if(!C(e))throw new Error("Bad argument: The passed `element` argument is not a valid HTML Element");return(n=e.classList).add.apply(n,t(Array.isArray(i)?i:[i])),e}],dataset:[function(e,t,i){Object.assign(e[t],i)},"dataset"],draggable:[A,"draggable"],editable:[A,"contentEditable"],hidden:[A,"hidden"],id:[A,"id"],inputmode:[A,"inputMode"],lang:[A,"lang"],html:[A,"innerHTML"],style:[A,"style"],tabindex:[A,"tabIndex"],text:[A,"textContent"],title:[A,"title"],data:[A,"data"],cite:[A,"cite"],download:[A,"download"],ping:[A,"ping"],target:[A,"target"],coords:[A,"coords"],shape:[A,"shape"],autoplay:[A,"autoplay"],buffered:[A,"buffered"],controls:[A,"controls"],loop:[A,"loop"],muted:[A,"muted"],playsinline:[O,"playsinline"],poster:[A,"poster"],preload:[A,"preload"],crossorigin:[A,"crossOrigin"],decoding:[A,"decoding"],height:[A,"height"],ismap:[A,"isMap"],loading:[A,"loading"],srcset:[A,"srcset"],width:[A,"width"],alt:[A,"alt"],as:[A,"as"],media:[A,"media"],rel:[A,"rel"],src:[A,"src"],sizes:[A,"sizes"],reversed:[A,"reversed"],start:[A,"start"],accept:[A,"accept"],"accept-charset":[A,"acceptCharset"],action:[A,"action"],autocomplete:[A,"autocomplete"],autofocus:[A,"autofocus"],capture:[A,"capture"],checked:[A,"checked"],cols:[A,"cols"],disabled:[A,"disabled"],dirname:[A,"dirName"],enctype:[A,"enctype"],for:[A,"for"],form:[A,"form"],formaction:[A,"formAction"],formenctype:[A,"formEnctype"],formmethod:[A,"formMethod"],formnovalidate:[A,"formNoValidate"],formtarget:[A,"formTarget"],high:[A,"high"],label:[A,"label"],list:[A,"list"],low:[A,"low"],max:[A,"max"],maxlength:[A,"maxLength"],method:[A,"method"],min:[A,"min"],minlength:[A,"minLength"],multiple:[A,"multiple"],name:[A,"name"],novalidate:[A,"noValidate"],optimum:[A,"optimum"],pattern:[A,"pattern"],placeholder:[A,"placeholder"],readonly:[A,"readOnly"],required:[A,"required"],rows:[A,"rows"],selected:[A,"selected"],size:[A,"size"],spellcheck:[O,"spellcheck"],step:[A,"step"],wrap:[A,"wrap"],default:[A,"default"],kind:[A,"kind"],srclang:[A,"srclang"],abbr:[A,"abbr"],colspan:[A,"colSpan"],span:[A,"span"],rowspan:[A,"rowSpan"],scope:[A,"scope"],href:[A,"href"],hreflang:[A,"hreflang"],datetime:[A,"dateTime"],type:[A,"type"],value:[A,"value"],usemap:[A,"useMap"]};function P(e,i,n){var s=document.createElement(e);return C(s)?(l(n)&&function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!C(e))throw new Error("Bad argument: The given element argument is not a valid HTML Element");if(!l(i))return e;for(var s=function(e){return S.includes(e)||n.includes(e)},a=0,o=Object.keys(i);a<o.length;a++){var r=o[a];if(s(r)){var c=i[r],h=V[r].slice(0);h.shift().apply(void 0,[e].concat(t(h),[c]))}}}(s,n,a(i,"")),s):null}function M(e,t,i,n){var s=P(e,t,i);return C(s)?(y(n)||de(s,n),s):null}function N(e,t,i,n,s){var a=P(e,t,n);return C(a)?(y(s)||de(a,s,i),a):null}function I(e){var t=document.createDocumentFragment();return y(e)||de(t,e),t}P.bind(null,"link","as,crossorigin,disabled,href,hreflang,media,rel,sizes,type"),M.bind(null,"template","");var R=M.bind(null,"header",""),$=(M.bind(null,"footer",""),M.bind(null,"main",""),M.bind(null,"article",""),M.bind(null,"section","")),B=(M.bind(null,"nav",""),M.bind(null,"aside",""),M.bind(null,"h1",""),M.bind(null,"h2","")),q=(M.bind(null,"h3",""),M.bind(null,"h4",""),M.bind(null,"h5",""),M.bind(null,"h6",""),M.bind(null,"div","")),D=(M.bind(null,"object","data,height,name,type,usemap,width"),P.bind(null,"embed","height,src,type,width"),P.bind(null,"br",""),P.bind(null,"hr",""),M.bind(null,"p","")),H=(M.bind(null,"blockquote","cite"),function(e){return C(e,"li")?e:U(null,e)}),F=N.bind(null,"ul","",H),U=(N.bind(null,"ol","reversed,start,type",H),M.bind(null,"li","value")),z=(M.bind(null,"dl",""),M.bind(null,"dt",""),M.bind(null,"dd",""),M.bind(null,"a","download,href,hreflang,ping,rel,target,type")),W=(P.bind(null,"area","alt,coords,download,href,hreflang,media,ping,rel,shape,target"),P.bind(null,"base","href,target"),P.bind(null,"img","alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width")),G=M.bind(null,"audio","autoplay,controls,crossorigin,loop,muted,preload,src"),J=(M.bind(null,"video","autoplay,controls,crossorigin,height,loop,muted,playsinline,poster,preload,src,width"),P.bind(null,"source","media,sizes,src,srcset,type"),P.bind(null,"track","default,kind,label,src,srclang"),M.bind(null,"picture",""),M.bind(null,"figure",""),M.bind(null,"figcaption",""),M.bind(null,"span","")),X=M.bind(null,"strong",""),Y=(M.bind(null,"em",""),M.bind(null,"mark",""),M.bind(null,"samp",""),M.bind(null,"sub",""),M.bind(null,"sup",""),M.bind(null,"del","cite,datetime"),M.bind(null,"ins","cite,datetime"),M.bind(null,"q","cite"),M.bind(null,"abbr",""),M.bind(null,"b",""),M.bind(null,"i","")),K=(M.bind(null,"s",""),M.bind(null,"u",""),M.bind(null,"cite",""),M.bind(null,"time","datetime"),M.bind(null,"code",""),M.bind(null,"form","accept-charset,action,autocomplete,enctype,method,name,novalidate,rel,target"),P.bind(null,"input","accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width")),Q=M.bind(null,"textarea","autocomplete,autofocus,cols,disabled,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,value,wrap"),Z=M.bind(null,"label","for"),ee=(N.bind(null,"select","autocomplete,autofocus,disabled,multiple,name,required,size",(function(e){return C(e,["option","optgroup"])?e:Array.isArray(e)?ie(null,e):ee(null,e)})),M.bind(null,"option","disabled,label,selected,value")),te=function(e){return C(e,"option")?e:ee(null,e)},ie=N.bind(null,"optgroup","disabled,label",te),ne=(M.bind(null,"fieldset","disabled,name"),M.bind(null,"legend",""),N.bind(null,"datalist","",te),M.bind(null,"meter","high,low,max,min,optimum,value"),M.bind(null,"progress","max,value"),M.bind(null,"output","name,value"),M.bind(null,"button","autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,name,type,value")),se=M.bind(null,"table",""),ae=(M.bind(null,"caption",""),function(e){return C(e,"tr")?e:le(null,e)}),oe=N.bind(null,"thead","",ae),re=N.bind(null,"tbody","",ae),ce=N.bind(null,"tfoot","",ae),le=(P.bind(null,"col","span"),N.bind(null,"colgroup","span",(function(e){return C(e,"col")?e:null})),N.bind(null,"tr","",(function(e){return C(e,["th","td"])?e:pe(null,e)}))),he=M.bind(null,"th","abbr,colspan,rowspan,scope"),pe=M.bind(null,"td","colspan,rowspan");function de(e,t,i){var n=Array.isArray(t)?t:[t];return c(i)&&(n=n.map((function(e){return i(e)}))),function(e,t){if(!x(e))throw new TypeError("Bad argument: The given `parent` is not a valid Node");if(!(t instanceof HTMLCollection||p(t)))throw new TypeError("Bad argument: The given `children` is not a valid HTMLCollection/HTMLElement array");var i=T(e)?e:document.createDocumentFragment();Array.from(t).forEach((function(e){var t;y(e)||i.appendChild(x(e)?e:(t=e.toString(),document.createTextNode(t.toString())))})),e!==i&&e.appendChild(i)}(e,n),e}var ue=function(e){return/^\.[a-zA-Z0-9_-]+$/.test(e)};function me(e,t){var i=a(t,document);return u(e)?null:T(i)?i.querySelector(e):function(e){return/^#[a-zA-Z0-9_-]+$/.test(e)}(e)?document.getElementById(e.substring(1)):ue(e)?i.getElementsByClassName(e.substring(1))[0]:i.querySelector(e)}function ye(e,t,i){if(!C(t))return null;var n=t[e];if(c(i))for(;E(n)&&!i(n);)n=n[e];return n}var fe=ye.bind(null,"previousElementSibling"),be=ye.bind(null,"nextElementSibling");function ge(e,t,i){if(!E(e))throw new TypeError("Bad argument: The given target parameter is not a valid HTML Element");if(!c(t))throw new TypeError("Bad argument: The given pred parameter is not a valid Function");var n=e.parentElement;return i>0?je(n,t,i-1):ve(n,t)}function ve(e,t){return y(e)?null:t(e)?e:ve(e.parentElement,t)}function je(e,t,i){return y(e)||0===i?null:t(e)?e:je(e.parentElement,t,i-1)}function we(e,t){if(!x(e))throw new TypeError("Bad argument: The given `node` is not a valid Node");return c(t)?(Array.from(e.childNodes).forEach((function(i){t(i)&&e.removeChild(i)})),e):function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);return e}(e)}var xe=function(e){return e.dataset.state},Ee=function(e,t){return e.dataset.state=t},Ce=function(e,t){return Ee(e,a(t,"checked"))},ke=function(e,t){return Ee(e,a(t,"unchecked"))},Te={name:"form-selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,i=0;i<this.items.length;i++){var n=this.items[i];n.isChecked()&&this.setSelectedItem(n),n.value===e&&(t=n)}return d(this.selectedItem)&&!d(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("change",(function(t){var i=t.target,n=!1;if(c(e.beforeChange)&&(n=!1===e.beforeChange(e,t)),n)return i.checked=!1,void e.items[e.selectedIndex].setChecked(!0);var s=e.items.find((function(e){return e.index===+a(i.dataset.selectorIndex,-1)}));y(s)||(e.setSelectedItem(s),c(e.afterChange)&&e.afterChange(e,t))}))}},Le=function(e){return'[data-type="'.concat(e.name,'"]')},_e={BaseSelector:Le({name:"selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,i=0;i<this.items.length;i++){var n=this.items[i];n.isChecked()&&this.setSelectedItem(n),n.value===e&&(t=n)}return d(this.selectedItem)&&!d(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",(function(t){var i=t.target;if(b(i.dataset,"selector")){var n=!1;if(c(e.beforeChange)&&(n=!1===e.beforeChange(e,t)),!n){var s=e.items.find((function(e){return e.index===+a(i.dataset.selectorIndex,-1)}));y(s)||(e.setSelectedItem(s),c(e.afterChange)&&e.afterChange(e,t))}}}))}}),FormSelector:Le(Te)};new Error("Missing container: A selector requires a container"),new Error("Missing input: FormSelector requires an input in the container"),[_e.BaseSelector,_e.FormSelector].join(","),new Error("Missing container: A switch requires a container"),new Error("Missing input: FormSwitch requires an input in the container");var Ae="on",Oe=function(e){return'[data-type="'.concat(e.name,'"]')},Se={name:"form-switch",container:null,input:null,beforeChange:null,afterChange:null,get value(){return this.input.value},isChecked:function(){return xe(this.container)===Ae},setChecked:function(e){return!y(e)&&(this.input.checked=e,e?Ce(this.container,Ae):ke(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.input.checked&&this.setChecked(!0),this.bindEvents(),this},bindEvents:function(){var e=this;this.input.addEventListener("change",(function(t){var i=!1;c(e.beforeChange)&&(i=!1===e.beforeChange(e,t)),i?e.input.checked=!e.input.checked:(e.toggle(),c(e.afterChange)&&e.afterChange(e,t))}))}};[Oe({name:"switch",container:null,beforeChange:null,afterChange:null,get value(){return this.container.dataset.value},isChecked:function(){return xe(this.container)===Ae},setChecked:function(e){return!y(e)&&(e?Ce(this.container,Ae):ke(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.isChecked()&&Ce(this.container,Ae),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",(function(t){var i=!1;c(e.beforeChange)&&(i=!1===e.beforeChange(e,t)),i||(e.toggle(),c(e.afterChange)&&e.afterChange(e,t))}))}}),Oe(Se)].join(","),new Error("Missing container: A collapsible requires a container"),new Error("Missing container: An accordion requires a container"),encodeURIComponent;const Ve=e=>e.classList.remove(Fe.HIDDEN),Pe=e=>e.classList.add(Fe.HIDDEN),Me=e=>{e.classList.contains("shake")||(e.classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),1e3))},Ne="Backspace",Ie="Enter",Re="Control",$e="Escape",Be="ArrowUp",qe="ArrowRight",De="ArrowDown",He="Delete",Fe=function(){const e="BUTTON",t="ATTRIBUTE";return{ATTR_WRAPPER:"attr-wrapper",COLLAPSE:"collapse",CHECKED:"checked",DISABLED:"disabled",EMPTY:"empty",HIDDEN:"hidden",SELECTED:"selected",Element:{ANCHOR:{name:"ANCHOR"},ATTRIBUTE:{name:t,class:"attr",toClass:()=>".attr",toString:()=>"ATTRIBUTE"},ATTRIBUTE_ABSTRACT:{name:t,class:"attr attr--extension",toString:()=>"ABSTRACT ATTRIBUTE"},ATTRIBUTE_BOOLEAN:{name:t,class:"attr--bool",toString:()=>"BOOLEAN ATTRIBUTE"},BUTTON:{name:e,class:"btn",toString:()=>"BUTTON"},BUTTON_ADD:{name:e,class:"btn btn-add",toString:()=>"ADD BUTTON"},BUTTON_DELETE:{name:e,class:"btn btn-delete",toString:()=>"DELETE BUTTON"},BUTTON_MENU:{name:e,class:"btn btn-menu",toString:()=>"MENU BUTTON"},OPTION:{name:"OPTION",class:"option",toString:()=>"OPTION"}}}}(),Ue={events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var i=0;i<this.events[e].length;i++)if(this.events[e][i]===t){this.events[e].splice(i,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}},ze=function(){var e={},t=[];for(let e=0;e<256;e++)t[e]=e<16?"0"+e.toString(16):e.toString(16);return e.generate=function(){var e=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&s]+t[s>>8&255]+t[s>>16&255]+t[s>>24&255]},e}();function We(e){const t=e=>!b(e.dataset,"ignore");return t(e)?e:ge(e,t,10)}const Ge={create(e,t){const i=Object.create(this);return i.concept=e,i.schema=t,i},model:null,schema:null,source:null,id:null,value:null,object:"structure",init(e){throw new Error("This function has not been implemented")}};Object.defineProperty(Ge,"model",{get(){return this.concept.model}}),Object.defineProperty(Ge,"alias",{get(){return this.schema.alias}}),Object.defineProperty(Ge,"name",{get(){return this.schema.name}}),Object.defineProperty(Ge,"description",{get(){return this.schema.description}}),Object.defineProperty(Ge,"required",{get(){return a(this.schema.required,!0)}});const Je={object:"attribute",target:null,init(e){return this.target=this.model.createConcept(this.schema.target,{value:a(e,this.schema.value),parent:this.concept,ref:this}),this},getValue(){return this.target.value},export(){return{[`${this.name}:attribute`]:{id:this.target.id,name:this.target.name}}},toString(){return{[`attribute.${this.name}`]:this.target.toString()}}},Xe=Object.assign(Object.create(Ge),Je),Ye={attributes:null,initAttribute(){return this.attributes=[],this.attributes._created=new Set,this.attributes._updated=new Set,this.attributes._deleted=new Set,this},getAttributes(){return this.attributes},getAttribute(e){if(y(e))throw new TypeError("Bad argument");return"id"===e.type?this.getAttributeById(e.value):this.getAttributeByName(e)},getAttributeSchema(e){if(u(e))throw new TypeError("Bad argument");if(!this.hasAttribute(e))throw new Error(`Attribute '${e}' does not exist`);return g(this.attributeSchema.find((t=>t.name===e)))},getAttributeByName(e){if(u(e))throw new TypeError("Bad argument");var t=this.attributes.find((t=>t.name===e));return y(t)&&(t=this.createAttribute(e)),t},getAttributeById(e){if(u(e))throw new TypeError("Bad argument");return this.attributes.find((t=>t.id===e))},createAttribute(e,t){if(!this.hasAttribute(e))throw new Error(`Attribute not found: The concept '${this.name}' does not contain an attribute named ${e}`);const i=this.attributeSchema.find((t=>t.name===e));var n=Xe.create(this,i).init(t);return this.addAttribute(n),n},addAttribute(e){if(y(e)||"attribute"!==e.object)throw new Error("Bad argument: 'attribute' must be an attribute object");return this.attributes.push(e),this.attributes._created.add(e.name),this.notify("attribute.added",e),this},hasAttributes(){return!o(this.attributeSchema)||!o(this.attributes)},hasAttribute(e){return-1!==this.attributeSchema.findIndex((t=>t.name===e))},isAttributeRequired(e){return a(this.attributeSchema.find((t=>t.name===e)).required,!0)},isAttributeCreated(e){return this.attributes._created.has(e)},listAttributes(){const e=[];return this.attributeSchema.forEach((t=>{e.push({type:"attribute",name:t.name,alias:t.alias,description:t.description,target:t.target,accept:t.accept,required:this.isAttributeRequired(name),created:this.isAttributeCreated(name)})})),e},removeAttribute(e){if(this.isAttributeRequired(e))return{message:`The attribute '${e}' is required.`,success:!1};var t=this.attributes.findIndex((t=>t.name===e));if(-1===t)return{message:`The attribute '${e}' was not found.`,success:!1};var i=this.attributes.splice(t,1)[0];return this.attributes._created.delete(e),this.notify("attribute.removed",i),{message:`The attribute '${e}' was successfully removed.`,success:!0}}},Ke={listeners:null,initObserver(){return this.listeners=[],this},register(e){return this.listeners.includes(e)||this.listeners.push(e),!0},unregister(e){var t=this.listeners.indexOf(e);return-1!==t&&(this.listeners.splice(t,1),!0)},notify(e,t){this.listeners.forEach((i=>{i.update(e,t)}))}},Qe={model:null,schema:null,source:null,id:null,name:null,description:null,alias:null,ref:null,actions:null,operations:null,accept:null,parent:null,references:null,value:null,values:null,action:null,shadows:null,history:null,kind:"concept",init(e={}){return this.accept=e.accept,this.parent=e.parent,this.ref=e.ref,this.values=a(e.values,a(this.schema.values,[])),this.alias=a(e.alias,this.schema.alias),this.description=a(e.description,this.schema.description),this.min=a(e.min,a(this.schema.min,1)),this.max=a(e.max,this.schema.max),this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(){throw new Error("This function has not been implemented")},getName(){return a(this.ref.name,this.name)},getAlias(){return a(this.alias,this.getName())},getAcceptedValues(){return!h(this.accept)&&y(this.accept.name)?"":r(this.accept)?this.accept:b(this.accept,"name")?this.accept.name:Array.isArray(this.accept)?this.accept.map((e=>this.getAcceptedValues.call({accept:e}))).join(" or "):void 0},getCandidates(){return this.values.forEach((e=>{l(e)&&(e.type="value")})),this.values},getStructure(){return[...this.listAttributes()]},getBuildProperty(e){const{build:t}=this.schema;return y(t)||!b(t,e)?null:t[e]},getProperty(e){return"name"===e?this.getName():this.schema[e]},hasParent(){return!this.isRoot()},getParent(e){if(this.isRoot())return null;if(u(e))return this.parent;const t=this.parent;return t.name===e?t:t.getParent(e)},getParentWith(e){if(this.isRoot())return null;if(u(e))return this.parent;const t=this.parent;return t.hasPrototype(e)?t:t.getParentWith(e)},hasPrototype(e){for(var t=this.model.getConceptSchema(this.schema.prototype);!y(t);){if(t.name===e)return!0;let i=this.model.getConceptSchema(t);t=i?i.prototype:null}return!1},getAncestor(e){const t=[];for(var i=this.getParent(e);i;)t.push(i),i=i.getParent(e);return t},getChildren(e){const t=[];return y(e)?this.getAttributes().forEach((e=>{t.push(e.target)})):this.getAttributes().forEach((i=>{i.target.name===e?t.push(...i.target):t.push(...i.target.getChildren(e))})),t},getDescendant(e){const t=[];return this.getChildren(e).forEach((i=>{t.push(i),t.push(...i.getDescendant(e))})),t},delete(e=!1){if(!e){const e=this.getParent().removeAttribute(this.ref.name);if(!e.success)return e}return this.getChildren().forEach((e=>{e.delete(!0)})),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},isRoot(){return y(this.parent)},export(){var e={id:this.id,root:this.isRoot(),name:this.name};return this.getAttributes().forEach((t=>{Object.assign(e,t.export())})),e},toString(){var e={};return this.attributes.forEach((t=>{Object.assign(e,t.toString())})),e}},Ze=Object.assign(Qe,Ke,Ye);Object.defineProperty(Ze,"attributeSchema",{get(){return this.schema.attributes}});function et(e){switch(e){case 400:return{success:!1,message:"The value is not a boolean."};case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const tt={nature:"primitive",init(e={}){return this.parent=e.parent,this.ref=e.ref,this.alias=this.schema.alias,this.description=this.schema.description,this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){return y(e)?(this.value=!0,this):(l(e)?(this.id=e.id,this.setValue(e.value)):this.setValue(e),this)},hasValue(){return!y(this.value)},getValue(){return this.value},setValue(e){var t=this.validate(e);return 200!==t?{success:!1,message:"Validation failed: The value could not be updated.",errors:[et(t).message]}:(this.value=function(e){var t=a(e,!1);return r(t)&&"true"===t.toLowerCase()||Number.isInteger(t)&&1===t||!0===t}(e),this.notify("value.changed",e),{success:!0,message:"The value has been successfully updated."})},update:(e,t)=>!0,getCandidates:()=>[!0,!1],getChildren:e=>[],validate:e=>r(e)&&["true","false"].includes(e.toLowerCase())||Number.isInteger(e)&&[1,0].includes(e)||[!0,!1].includes(e)?200:400,build(){return this.getValue()},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}}},it=Object.assign(Object.create(Ze),tt);function nt(e){switch(e){case 400:return{success:!1,message:"The value is not a number."};case 401:return{success:!1,message:"The value is not included in the list of valid values."};case 403:return{success:!1,message:`The value is greater than the maximum allowed: ${this.max}.`};case 402:return{success:!1,message:`The value is less than the minimum allowed: ${this.min}.`}}}const st={nature:"primitive",init(e={}){return this.parent=e.parent,this.ref=e.ref,this.values=a(this.schema.values,[]),this.alias=this.schema.alias,this.description=this.schema.description,this.min=this.schema.min,this.max=this.schema.max,this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){return y(e)?(this.value=null,this):(l(e)?(this.id=e.id,this.setValue(e.value)):this.setValue(e),this)},hasValue(){return!(u(this.value)||isNaN(this.value))},getValue(){return this.hasValue()?+this.value:null},setValue(e){var t=this.validate(e);return 200!==t?{success:!1,message:"Validation failed: The value could not be updated.",errors:[nt.call(this,t).message]}:(this.value=e,this.notify("value.changed",e),{success:!0,message:"The value has been successfully updated."})},getCandidates(){return this.values.forEach((e=>{l(e)&&(e.type="value")})),this.values},getChildren:e=>[],update:(e,t)=>!0,validate(e){if(isNaN(e))return 400;if(this.min&&e<this.min)return 402;if(this.max&&e>this.max)return 403;if(u(e)||o(this.values))return 200;var t=!1;for(let i=0;!t&&i<this.values.length;i++){const n=this.values[i];t=l(n)?n.value==e:n==e}return t?200:401},build(){return this.getValue()},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}}},at=Object.assign(Object.create(Ze),st);function ot(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const rt={reference:null,path:null,init(e={}){return this.parent=e.parent,this.ref=e.ref,this.accept=this.schema.accept,this.path=this.schema.path,this.values=a(this.schema.values,[]),this.alias=this.schema.alias,this.description=this.schema.description,this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){return y(e)||(this.id=e.id,this.setValue(e.value)),this},hasValue(){return!u(this.value)},getValue(){return y(this.value)?null:this.value},getReference(){return y(this.reference)?null:this.reference},setValue(e){var t=this.validate(e);return 200!==t?{success:!1,message:"Validation failed: The value could not be updated.",errors:[ot(t).message]}:y(e)||this.value===e?void 0:(this.reference&&this.reference.unregister(this),this.reference=this.model.getConcept(e),this.reference.register(this),this.value=e,this.notify("value.changed",this.reference),{success:!0,message:"The value has been successfully updated."})},getCandidates(){if(y(this.accept))throw new Error("Bad reference: 'accept' property is not defined");var e=ct.call(this,this.accept);return this.path&&lt(this,this.path).map((e=>({type:this.accept.type,value:e}))),e.map((e=>({type:"concept",value:e})))},getChildren(e){return y(this.reference)||e&&this.reference.name!==e?[]:[this.reference]},delete(e=!1){if(!e){let e=this.getParent().remove(this);if(!e.success)return e}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(e,t){switch(e){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference)}return!0},validate(e){return u(e)||o(this.values),200},build(){return this.getValue()},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){var e=[];return this.value.forEach((t=>{e.push(t.toString())})),e}};function ct(e){const{name:t,prototype:i,scope:n,rel:s}=e;return"parent"===s?this.getParent(n).getChildren(t):i?this.model.getConceptsByPrototype(i):this.model.getConcepts(t)}function lt(e,t){if(y(t))return e;const{target:i,value:n,rel:s}=t;var a=[];return"parent"===s?a.push(e.getParentWith(i)):"children"===s?a.push(...e.getChildren(i)):"property"===s&&a.push(e.getProperty(i)),a.map((e=>lt(e,n))).flat()}const ht=Object.assign({},Ze,rt),pt={nature:"primitive",init(e={}){return this.parent=e.parent,this.ref=e.ref,this.accept=this.schema.accept,this.path=this.schema.path,this.values=a(this.schema.values,[]),this.alias=this.schema.alias,this.description=this.schema.description,this.min=a(this.schema.min,0),this.max=this.schema.max,this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){if(this.value=[],y(e)){for(let e=0;e<this.min;e++)this.createElement();return this}const{id:t,value:i}=e;this.id=t;for(let e=0;e<i.length;e++)this.createElement(i[e]);var n=this.min-i.length;for(let e=0;e<n;e++)this.createElement();return this},hasValue(){return!o(this.value)},getValue(e=!1){const t=this.value.map((e=>this.model.getConcept(e)));return e?t.map((e=>e.getValue())):t},setValue(e){if(Array.isArray(e)){this.removeAllElement();for(let t=0;t<e.length;t++)this.createElement(e[t]);this.notify("value.changed",e)}},getElements(){return this.value.map((e=>this.model.getConcept(e)))},getElement(e){var t=this.value.find((t=>t===e));if(!y(t))return this.model.getConcept(t)},getElementAt(e){if(!(e<0||e>=this.value.length))return this.model.getConcept(this.value[e])},getFirstElement(){return this.getElementAt(0)},getLastElement(){return this.getElementAt(this.count-1)},addElement(e){return!y(e)&&(this.value.push(e.id),e.index=this.value.length-1,this.notify("value.added",e),!0)},addElementAt(e,t=0){return y(e)&&(e=this.createElement()),this.value.splice(t,0,e.id),this},removeElement(e){var t=this.value.indexOf(e.id);return-1!==t&&this.removeElementAt(t)},removeElementAt(e){if(!Number.isInteger(e)||e<0)return{message:"The element was not removed. The given 'index' is not valid.",success:!1};var t=this.getElementAt(e);if(y(t))return{message:`The element at index '${e}' was not found.`,success:!1};t.delete(!0),this.value.splice(e,1);const i=this.getValue();for(let t=e;t<i.length;t++)i[t].index=t;return this.notify("value.removed",t),{message:`The element '${t.name}' was successfully removed.`,success:!0}},removeAllElement(){return this.value.forEach((e=>{this.model.removeConcept(e)})),this.value=[],this.notify("value.changed",this.value),this},createElement(e){const t={value:e,parent:this,ref:this},i=this.model.createConcept(this.accept,t);return this.addElement(i),i},getCandidates(){return dt.call(this,this.accept)},getChildren(e){if(!this.hasValue())return[];const t=this.getElements();return y(e)?t:t.filter((t=>t.name===e))},build(){return this.getValue().map((e=>e.build()))},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue().map((e=>e.id))}},toString(){var e=[];return this.value.forEach((t=>{e.push(t.toString())})),e}};function dt(e){return this.model.getConceptSchema(e)}const ut=Object.assign(Object.create(Ze),pt);Object.defineProperty(ut,"count",{get(){return this.value.length}}),Object.defineProperty(ut,"canAddValue",{get:()=>!0});const mt=200;function yt(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."};case 403:return{success:!1,message:`The length of the value exceeds the maximum allowed: ${this.max}.`};case 402:return{success:!1,message:`The length of the value is beneath the minimum allowed: ${this.min}.`};case 404:return{success:!1,message:"The value does not match the valid pattern."}}}const ft={nature:"primitive",pattern:null,init(e={}){return this.parent=e.parent,this.ref=e.ref,this.values=a(this.schema.values,[]),this.alias=this.schema.alias,this.description=this.schema.description,this.min=a(this.schema.min,0),this.max=this.schema.max,this.pattern=this.schema.pattern,this.history=[],this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){return y(e)?(this.value="",this):(l(e)?(this.id=e.id,this.setValue(e.value)):this.setValue(e),this)},hasValue(){return!u(this.value)},getValue(){return this.value},setValue(e){var t=this.validate(e);return t!==mt?{success:!1,message:"Validation failed: The value could not be updated.",errors:[yt.call(this,t).message]}:(this.history.push(e),this.value=e,this.notify("value.changed",e),{success:!0,message:"The value has been successfully updated."})},getCandidates(){return this.values.forEach((e=>{l(e)&&(e.type="value")})),this.values},getChildren:e=>[],update:(e,t)=>!0,validate(e){if(u(e))return mt;if(this.min&&e.length<this.min)return 402;if(this.max&&e.length>this.max)return 403;if(this.pattern&&!new RegExp(this.pattern,"gi").test(e))return 404;if(o(this.values))return mt;var t=!1;for(let i=0;!t&&i<this.values.length;i++){const n=this.values[i];t=l(n)?n.value===e:n===e}return t?mt:401},build(){return this.getValue()},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value}},bt=Object.assign(Object.create(Ze),ft),gt={nature:"concrete",initValue(e){if(y(e))return!1;this.id=e.id;for(const t in e){const i=e[t],[n,s]=t.split(":");switch(s){case"attribute":this.createAttribute(n,i)}}return!0},build(){}},vt=Object.assign(Object.create(Ze),gt),jt=200;function wt(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const xt={name:"prototype",nature:"prototype",initValue(e){if(y(e))return this;var t=this.createConcept(e.name,e);return this.value=t,this},getValue(){return this.value},setValue(e){var t=this.validate(e);if(t!==jt)return{success:!1,message:"Validation failed: The value could not be updated.",errors:[wt(t).message]};var i=e;return r(e)&&(i=this.createConcept(e)),this.value&&(this.value.getChildren().forEach((e=>{e.delete(!0)})),this.model.removeConcept(this.value.id),this.value.notify("delete")),this.value=i,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},hasValue(){return!y(this.value)},getCandidates(){return Et.call(this,this.accept)},getChildren(e){if(!this.hasValue())return[];const t=[],i=this.getValue();return(y(e)||i.name===e)&&t.push(i),t},getDescendant:e=>[],createConcept(e,t){const i={parent:this.parent,ref:this.ref};t&&(i.value=t);const n=this.model.createConcept({name:e},i);return n.prototype=this,n},validate(e){if(u(e))return jt;if(o(this.values))return jt;var t=!1;for(let i=0;!t&&i<this.values.length;i++){const n=this.values[i];t=l(n)?n.value===e:n===e}return t?jt:401},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.hasValue()?this.getValue().name:null}}};function Et(e){const t=this.model.getConcreteConcepts(this.name);return y(e)?t:Array.isArray(e)?t.filter((t=>e.includes(t.name))):t.filter((t=>e===t.name))}const Ct=Object.assign({},Ze,xt);function kt(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const Tt={name:"meta",reference:null,initValue(e){return y(e)||(this.id=e.id,this.setValue(e.value)),this},hasValue(){return!u(this.value)},getValue(){return y(this.value)?null:this.value},getProperty(e){const t=this.schema[e];if(l(t)){const e=[];for(const i in t){const n=t[i];e.push(Object.assign({},{name:i},n))}return e}return t},setValue(e){var t=this.validate(e);return 200!==t?{success:!1,message:"Validation failed: The value could not be updated.",errors:[kt(t).message]}:y(e)||this.value===e?void 0:(this.reference&&this.reference.unregister(this),this.reference=this.model.getConcept(e),this.reference.register(this),this.value=e,this.notify("value.changed",this.reference),{success:!0,message:"The value has been successfully updated."})},getChildren:e=>[],delete(e=!1){if(!e){let e=this.getParent().remove(this);if(!e.success)return e}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(e,t){switch(e){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference)}return!0},validate(e){return u(e)||o(this.values),200},export(){return{id:this.id,name:this.name,value:this.value}},toString(){var e=[];return this.value.forEach((t=>{e.push(t.toString())})),e}},Lt=Object.assign({},Ze,Tt);function _t(e,t){return{object:{value:"concept"},model:{value:e},name:{value:t.name},schema:{value:t,writable:!0}}}const At={boolean:(e,t)=>Object.create(it,_t(e,t)),number:(e,t)=>Object.create(at,_t(e,t)),reference:(e,t)=>Object.create(ht,_t(e,t)),set:(e,t)=>Object.create(ut,_t(e,t)),string:(e,t)=>Object.create(bt,_t(e,t)),meta:(e,t)=>Object.create(Lt,_t(e,t))},Ot={primitive:(e,t)=>At[t.name](e,t),prototype:(e,t)=>Object.create(Ct,_t(e,t)),concrete:(e,t)=>Object.create(vt,_t(e,t)),derivative:(e,t)=>At[t.base](e,t)},St={createConcept(e,t,i){const n=Ot[t.nature];if(y(n))throw new Error(`Missing handler: The '${name}' concept could not be handled`);const s=n(e,t);if(y(s))throw new Error(`Bad request: The '${name}' concept could not be created`);return s.init(i),y(s.id)&&(s.id=ze.generate()),s}},Vt=[{concept:{name:"set"},type:"field",tags:[],projection:{type:"list"}},{concept:{name:"string"},type:"field",tags:[],projection:{type:"text",content:[{type:"input"}]}},{concept:{name:"boolean"},type:"field",tags:[],projection:{type:"binary"}},{concept:{name:"number"},type:"field",tags:[],projection:{type:"text"}},{concept:{name:"reference"},type:"field",tags:[],projection:{type:"link"}},{concept:{name:"prototype"},type:"field",tags:[],projection:{type:"choice"}}],Pt="attributes",Mt="base",Nt="global",It="name",Rt="required",$t="properties",Bt="prototype",qt="tags",Dt={concepts:null,listeners:null,watchers:null,init(e,t){return this.concepts=[],this.listeners=[],this.watchers=[],Array.isArray(e)&&e.forEach((e=>{var t=this.createConcept({name:e.name},{value:e});this.addConcept(t)})),this},register(e,t){return this.listeners.includes(e)||(this.listeners.push(e),this.watchers.push(t)),!0},unregister(e){var t=this.listeners.indexOf(e);return-1!==t&&(this.listeners.splice(t,1),!0)},notify(e,t){this.listeners.forEach((i=>{i.update(e,t)}))},createConcept(e,t){const i=this.getCompleteModelConcept(e);var n=St.createConcept(this,i,t);return this.addConcept(n),n},getConcepts(e){if(h(e)){const t=Array.isArray(e)?t=>e.includes(t.name):t=>t.name===e;return this.concepts.filter((e=>t(e)))}return this.concepts.slice()},getConceptsByPrototype(e){return this.concepts.filter((t=>t.schema.prototype===e))},getConcept(e){if(!r(e)||o(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");return this.concepts.find((t=>t.id===e))},addConcept(e){if(y(e))throw new TypeError("Bad request: The 'concept' argument must be a Concept");return this.concepts.push(e),this.watchers.includes(e.name)&&this.notify("concept.added",e),this},removeConcept(e){if(!l(e)&&!r(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");var t=this.concepts.findIndex((t=>t.id===e));return-1===t?null:this.concepts.splice(t,1)[0]},isConcept(e){return-1!==this.schema.findIndex((t=>t.name===e))},isConcrete(e){const t=this.schema.find((t=>t.name===e));return!y(t)&&"concrete"===t.nature},isPrototype(e){const t=this.schema.find((t=>t.name===e));return!y(t)&&"prototype"===t.nature},getConceptSchema(e){const t=ei(this.schema,e);var i;if(!y(t))return i=t,JSON.parse(JSON.stringify(i))},getCompleteModelConcept(e){const t=this.getConceptSchema(e.name);if(y(t))return;Object.assign(t,e),b(t,"attributes")||(t.attributes=[]);const i=Qt.call(this,t.prototype);return t.attributes.push(...i.attributes),t},getConcreteConcepts(e){const t=t=>{for(var i=t.prototype;!y(i);){if(i===e)return!0;i=a(ei(this.schema,i),{}).prototype}return!1},i=this.schema.filter((e=>"concrete"===e.nature));return e?i.filter((e=>t(e))):i},getDerivedConcepts(e){if(y(e))throw new TypeError("Bad argument");return this.schema.filter((t=>t.base===e))},build(){const e=[];return this.getConcepts(["prototype concept","concrete concept","derivative concept"]).forEach((t=>{let i={id:t.id,name:Gt(t),description:Jt(t),nature:{"concrete concept":"concrete","prototype concept":"prototype","derivative concept":"derivative"}[t.name],attributes:t.isAttributeCreated("attributes")?Yt(Ut(t,"attributes")):[]};if(t.isAttributeCreated("prototype")&&zt(t,"prototype")&&(i.prototype=Gt(Ft(t,"prototype"))),"derivative concept"===t.name){const e=Ut(t,"base");if(i.base=Xt[e.name](e),e.isAttributeCreated("accept")){let t=Ut(e,"accept");i.accept=Xt[t.name](t)}["min","max"].forEach((t=>{e.isAttributeCreated(t)&&zt(e,t)&&(i[t]=+Ut(e,t))}))}e.push(i)})),JSON.stringify(e)},buildConcept(){const e=[];return this.getConcepts(["prototype concept","concrete concept","derivative concept"]).forEach((t=>{e.push(this.buildSingleConcept(t).message)})),JSON.stringify(e)},buildSingleConcept(e){const t=[],i=Gt(e),n=Jt(e),s=[],a=[];if(u(i)&&t.push("The concept's 'name' is missing a value."),e.isAttributeCreated(Pt)&&Ut(e,Pt).forEach((e=>{const i=Yt(e);i.success?s.push(i.message):t.push(...i.errors)})),e.isAttributeCreated($t)&&Ut(e,$t).forEach((e=>{const i=function(e){const t=[],i=Gt(e),n=Jt(e);u(i)&&t.push("The property's 'name' is missing a value."),Wt(e,"target")&&zt(e,"target")||t.push(`The property '${i}' 'target' is missing a value.`);var s=Ut(e,"target");return o(t)?{success:!0,message:{name:Gt(e),description:n,value:Ut(s,"value")}}:{success:!1,message:"Validation failed: The concept could not be built.",errors:t}}(e);i.success?a.push(i.message):t.push(...i.errors)})),!o(t))return{success:!1,message:"Validation failed: The concept could not be built.",errors:t};let r={id:e.id,name:i,description:n,nature:e.getBuildProperty("nature"),attributes:s,properties:a};if(e.isAttributeCreated(Bt)&&zt(e,Bt)&&(r.prototype=Gt(Ft(e,Bt))),e.isAttributeCreated(Mt)&&zt(e,Mt)){const t=Ut(e,Mt);r.base=Kt(t)}return{success:!0,message:r}},buildProjection(){const e=[...Vt];return this.getConcepts(["concept projection","template projection"]).forEach((t=>{e.push(this.buildSingleProjection(t).message)})),JSON.stringify(e)},buildSingleProjection(e){const t=[],i=!(!Wt(e,Nt)||!zt(e,Nt))&&Ut(e,Nt),n=Wt(e,qt)?Ht(e,qt).build():[],s={layout:e=>ii(Ut(e,"layout")),field:e=>function(e){var t={readonly:Ut(e,"readonly"),disabled:Ut(e,"disabled")};if(e.isAttributeCreated("style")&&(t.style=ai(Ht(e,"style"))),"text field"===e.name)t.type="text",t.multiline=Ut(e,"multiline"),t.content=[],Ut(e,"content").filter((e=>e.hasValue())).forEach((e=>{const i=e.getValue();t.content.push(ni(i))}));else if("binary field"===e.name)t.type="binary",t.state=[],Ut(e,"content").forEach((e=>{Wt(e,"state")?t.state.push({rule:{type:"eq",eq:[{prop:"value"},Ut(e,"state")]},result:{label:{projection:ni(Ut(e,"content"))}}}):t.label={projection:ni(Ut(e,"content"))}}));else if("choice field"===e.name){t.type="choice";let i=Ht(e,"choice template"),n=Ht(e,"selection template");t.choice={option:{template:{tag:Ut(i,"tag"),name:Ut(i,"name")}},selection:{template:{tag:Ut(n,"tag"),name:Ut(n,"name")}}}}else if("link field"===e.name){t.type="link";let i=Ht(e,"choice template"),n=Ht(e,"value template");t.choice={option:{template:{tag:Ut(i,"tag"),name:Ut(i,"name")}},selection:{template:{tag:Ut(n,"tag"),name:Ut(n,"name")}}}}else if("list field"===e.name){t.type="list",Wt("orientation")&&(t.orientation=Ut(e,"orientation"));let i=Ht(e,"item template");t.list={item:{template:{tag:Ut(i,"tag"),name:Ut(i,"name")}}}}else if("table field"===e.name){let i={};e.isAttributeCreated("template")&&(i.name=Ht(e,"template").getValue()),e.isAttributeCreated("concept")&&(i.concept=Ht(e,"concept").getValue()),t.template=i,t.type="table"}return t}(Ut(e,"field")),template:e=>function(e){var t={};if("table template"===e.name){let i=[],n=[];Ut(e,"header").forEach((e=>{const t=Ht(e,"projection");i.push({content:ni(t)})})),Ut(e,"body").forEach((e=>{const t=Ht(e,"projection");n.push({content:ni(t)})})),Object.assign(t,{type:"table",header:{cell:i},body:{cell:n}})}return t}(Ut(e,"template"))};if(zt(e,"projection")||t.push("The projection's 'type' is missing a value."),!o(t))return{success:!1,message:"Validation failed: The concept could not be built.",errors:t};const a=Ut(e,"projection"),r=a.getBuildProperty("type");let c={id:e.id,concept:ti(Ht(e,"concept")),type:r,global:i,tags:n,projection:s[r](a)};return Wt(e,It)&&zt(e,It)&&(c.name=Gt(e)),{success:!0,message:c}},export(){const e=[];return this.getConcepts().forEach((t=>{e.push(t.export())})),e},toString(){return JSON.stringify({[this.root.name]:this.root.toString()})}},Ht=(e,t)=>e.getAttributeByName(t).target,Ft=(e,t)=>Ht(e,t).getReference(),Ut=(e,t,i=!1)=>Ht(e,t).getValue(i),zt=(e,t)=>Ht(e,t).hasValue(),Wt=(e,t)=>e.isAttributeCreated(t),Gt=e=>Ut(e,It).toLowerCase(),Jt=e=>Ut(e,"description"),Xt={"string primitive":e=>"string","number primitive":e=>"number","boolean primitive":e=>"boolean","reference primitive":e=>"reference","set primitive":e=>"set","concept primitive":e=>Gt(Ft(e,"concept"))};function Yt(e){const t=Gt(e),i=Jt(e),n=!Wt(e,Rt)||!zt(e,Rt)||Ut(e,Rt),s=[];return u(t)&&s.push("The attribute's 'name' is missing a value."),Wt(e,"target")&&zt(e,"target")||s.push(`The attribute '${t}' 'target' is missing a value.`),o(s)?{success:!0,message:{name:t,description:i,required:n,target:Kt(Ut(e,"target"))}}:{success:!1,message:"Validation failed: The concept could not be built.",errors:s}}function Kt(e){const t={name:Xt[e.name](e)};if(e.isAttributeCreated("accept")){let i=Ut(e,"accept");t.accept=Kt(i)}return Wt(e,"default")&&zt(e,"default")&&(t.default=Ut(e,"default")),["length","value","cardinality"].forEach((i=>{if(Wt(e,i)&&zt(e,i)){let n=Ut(e,i),s={};if("number constraint value"===n.name)zt(n,"value")&&(s.value=Ut(n,"value"));else if("number constraint range"===n.name){let e=Ht(n,"min");zt(e,"value")&&(s.min={value:Ut(e,"value"),included:Ut(e,"included")});let t=Ht(n,"max");zt(t,"value")&&(s.max={value:Ut(t,"value"),included:Ut(t,"included")})}t[i]=s}})),Wt(e,"values")&&zt(e,"values")&&(t.values=Ut(e,"values",!0)),t}function Qt(e){var t=e;const i=[];for(;!y(t);){const e=a(this.getConceptSchema(t),{});n=e.attributes,Array.isArray(n)&&n.forEach((e=>{const t=i.find((t=>t.name===e.name));y(t)?i.push(e):(e.required&&(t.required=e.required),e.description&&(t.description=e.description))})),t=e.prototype}var n;return{attributes:i}}const Zt=[{name:"string",nature:"primitive"},{name:"number",nature:"primitive"},{name:"boolean",nature:"primitive"},{name:"reference",nature:"primitive"},{name:"set",nature:"primitive"}];function ei(e,t){var i=e.find((e=>e.name===t));return y(i)&&(i=Zt.find((e=>e.name===t))),i}function ti(e){const t={};return Wt(e,It)&&(t.name=zt(e,It)?Ut(e,It):null),Wt(e,Bt)&&(t.prototype=zt(e,Bt)?Ut(e,Bt):null),t}function ii(e){var t={},i=[];return"stack layout"===e.name?(t.type="stack",t.orientation=Ut(e,"orientation"),Ut(e,"elements").filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue();i.push(ni(t))}))):"wrap layout"===e.name?(t.type="wrap",Ut(e,"elements").filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue();i.push(ni(t))}))):"table layout"===e.name?t.type="table":"relative layout"===e.name&&(t.type="relative"),e.isAttributeCreated("style")&&(t.style=ai(Ht(e,"style"))),t.disposition=i,t}function ni(e){const t=e.getBuildProperty("contentType"),i=e.getBuildProperty("elementType");if("static"===t)return{type:t,static:si(e,i)};if("dynamic"===t)return function(e,t){let i={type:t};return"input"===t?i.placeholder=Ut(e,"placeholder"):"checkbox"===t?i.label=Ut(e,"label"):"list"===t&&(i.selector=Ut(e,"item")),Wt(e,"style")&&(i.style=ai(Ht(e,"style"))),i}(e,i);if("attribute"===t){let i={type:t,name:Ut(e,"value")};return e.isAttributeCreated("tag")&&(i.tag=Ut(e,"tag")),i}return"layout"===t?{type:t,layout:ii(e)}:null}function si(e,t){let i={type:t};return"text"===t?(i.content=Ut(e,"content"),i.contentType=Ut(e,"content type")):"image"===t?(i.url=Ut(e,"url"),i.alt=Ut(e,"alternative text"),i.width=Ut(e,"width"),i.height=Ut(e,"height")):"html"===t?i.selector=Ut(e,"selector"):"link"===t&&(i.url=Ut(e,"url"),i.urlType=Ut(e,"url type"),i.content=[],Ut(e,"content").filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue();i.content.push(ni(t))}))),Wt(e,"style")&&(i.style=ai(Ht(e,"style"))),i}function ai(e){return e.isAttributeCreated("css")?{css:Ht(e,"css").build()}:null}const oi=[],ri={createModel(e){var t=Object.create(Dt,{schema:{value:e}});return oi.push(t),t}},ci={text:function(e,t){for(const i in t){const n=t[i];switch(i){case"bold":e.style.fontWeight=di(n);break;case"italic":e.style.fontStyle="italic";break;case"underline":e.style.textDecoration="underline";break;case"strikethrough":e.style.textDecoration="line-through";break;case"color":e.style.color=pi(n);break;case"font":e.style.fontFamily=n;break;case"highlight":e.style.backgroundColor=pi(n);break;case"size":e.style.fontSize=ui(n);break;case"align":e.style.textAlign=n;break;case"space":e.style.lineHeight=ui(n)}}return e},box:function(e,t){for(const i in t){const n=t[i];switch(i){case"space":mi(e,n);break;case"border":fi(e,n);break;case"background":yi(e,n);break;case"width":e.style.width=ui(n,"%");break;case"height":e.style.height=ui(n,"%");break;case"overflow":e.style.overflow=n}}return e},css:function(e,t){return h(t)?(hi(e,t),e):e},size:function(e,t){for(const e in t)t[e];return e}};function li(e,t){if(!l(t))return e;for(const i in t){const n=t[i];ci[i](e,n)}return e}function hi(e,t){if(Array.isArray(t))e.classList.add(...t);else{let i=t.replace(/\s+/g," ").trim();u(e.className)?e.className=i:hi(e,i.split(" "))}return e}function pi(e){const{type:t,value:i}=e;switch(t){case"rgb":return l(i)?`rgb(${i.red}, ${i.green}, ${i.blue})`:i;default:return e}}function di(e){const{type:t,value:i}=e;return Number.isInteger(e)?`${e}`:"bold"}function ui(e,t="px"){const{type:i,value:n}=e;return Number.isInteger(e)?`${e}${t}`:0}function mi(e,t){const{inner:i={},outer:n={}}=t;if(Number.isInteger(i))e.style.padding=`${i}px`;else for(const t in i){const n=i[t];switch(t){case"top":e.style.paddingTop=`${n}px`;break;case"right":e.style.paddingRight=`${n}px`;break;case"bottom":e.style.paddingBottom=`${n}px`;break;case"left":e.style.paddingLeft=`${n}px`}}if(Number.isInteger(n))e.style.margin=`${n}px`;else for(const t in n){const i=n[t];switch(t){case"top":e.style.marginTop=`${i}px`;break;case"right":e.style.marginRight=`${i}px`;break;case"bottom":e.style.marginBottom=`${i}px`;break;case"left":e.style.marginLeft=`${i}px`}}}function yi(e,t){e.style.backgroundColor=pi(t)}function fi(e,t){if(t.size)e.style.borderStyle="solid",e.style.borderWidth=ui(t.size),e.style.borderColor=pi(t.color);else for(const i in t){const n=t[i];switch(i){case"top":e.style.borderTopStyle="solid",e.style.borderTopWidth=ui(n.size),e.style.borderTopColor=pi(n.color);break;case"right":e.style.borderRightStyle="solid",e.style.borderRightWidth=ui(n.size),e.style.borderRightColor=pi(n.color);break;case"bottom":e.style.borderBottomStyle="solid",e.style.borderBottomWidth=ui(n.size),e.style.borderBottomColor=pi(n.color);break;case"left":e.style.borderLeftStyle="solid",e.style.borderLeftWidth=ui(n.size),e.style.borderLeftColor=pi(n.color)}}t.radius&&function(e,t){if(Number.isInteger(t))e.style.borderRadius=ui(t);else for(const i in t){const n=t[i];switch(i){case"top":e.style.borderTopLeftRadius=ui(n);break;case"right":e.style.borderTopRightRadius=ui(n);break;case"bottom":e.style.borderBottomRightRadius=ui(n);break;case"left":e.style.borderBottomLeftRadius=ui(n)}}}(e,t.radius)}function bi(e,t){const{name:i,optional:n,style:s,tag:o}=e;if(!t.hasAttribute(i))throw new Error(`Attribute '${i}' does not exist in the concept '${t.name}'`);let r={name:i,schema:e,required:!0,optional:null,element:null};this.projection.attributes.push(r);var c=null;if(t.isAttributeRequired(i)||t.isAttributeCreated(i)){let{target:e,description:n,schema:a}=t.getAttributeByName(i);var l=this.projection.model.createProjection(e,o).init();l.parent=this.projection,li(c=l.render(),s),r.element=c}else{const{alias:e,description:s}=t.getAttributeSchema(i);(c=n?On.call(this,n,t):Y({class:["projection-element","projection-element--optional"],dataset:{object:"attribute",id:i}},`Add ${a(e,i)}`)).addEventListener("click",(e=>{t.createAttribute(i)})),r.required=!1,r.optional=c}return c}function gi(e){if(!Array.isArray(e))return!1;var t=null;for(let i=0;i<e.length;i++){const n=e[i],{rule:s,result:a}=n;let o=!1,r=vi[s.type];c(r)&&(o=r.call(this,s[s.type])),o&&(t=a)}this.state=t}const vi={eq:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(o(e))return null;const t=ji.call(this,e[0]);for(let i=0;i<e.length;i++)if(ji.call(this,e[i])!==t)return!1;return!0},lt:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return ji.call(this,e[0])<ji.call(this,e[1])},gt:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return ji.call(this,e[0])>ji.call(this,e[1])}};function ji(e){return l(e)?this[e.prop]:e}const wi={init(){throw new Error("This function has not been implemented")},element:null,statusElement:null,attached:null,errors:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasError(){return!o(this.errors)},get hasAttached(){return!o(this.attached)},attach(e,t){this.attached.push(e)},detach(e){this.attached.slice(this.attached.indexOf(e),1)},getAttached(e){return c(e)?this.attached.filter((t=>e(t))):this.attached},show(){return Ve(this.element),this.visible=!0,this.active=!0,this},hide(){return Pe(this.element),this.visible=!1,this},focus(){return this.element.contentEditable=!1,this.element.focus(),this.focused=!0,this},enable(){return this.disabled=!1,this},disable(){return this.disabled=!0,this},clear:()=>!0,delete(){var e=this.source.delete();e.success?(this.source.unregister(this),this.clear(),we(this.element),this.element.remove()):(this.environment.notify(e.message),Me(this.element))},enterHandler(e){this.focusOut()},backspaceHandler(e){console.warn("BACKSPACE_HANDLER NOT IMPLEMENTED")},clickHandler(e){console.warn("CLICK_HANDLER NOT IMPLEMENTED")},arrowHandler(e){console.warn("ARROW_HANDLER NOT IMPLEMENTED")}},xi=Object.assign(wi,Ke),Ei={input:null,label:null,checked:!1,value:"",state:null,init(){return this.source.register(this),this},render(){const e=I(),{before:t={},label:i={},input:n={},after:s={}}=this.schema;var a,o;if(C(this.element)||(this.element=(a=this.id,q({id:a,class:["field","field--binary"],tabindex:-1,dataset:{nature:"field",view:"binary",id:a}})),this.readonly&&this.element.classList.add("readonly"),li(this.element,this.schema.style)),C(this.notification)||(this.notification=function(e){return q({class:["field-notification"],dataset:{nature:"field-component",view:"binary",id:e}})}(this.id),e.appendChild(this.notification)),C(this.statusElement)||(this.statusElement=function(e){return Y({class:["field-status"],dataset:{nature:"field-component",view:"binary",id:e}})}(this.id),this.notification.appendChild(this.statusElement)),t.projection){let i=On.call(this,t.projection);i.classList.add("field--binary__before"),e.appendChild(i)}if(!C(this.input)){const{before:t,projection:i,after:s,style:a}=n;this.input=function(e){return K({id:`checkbox${e}`,type:"checkbox",class:["field--binary__input"],tabindex:0,dataset:{nature:"field-component",view:"binary",id:e}})}(this.id),this.input.checked=!("concept"!==(o=this.source).object||!o.hasValue())&&o.getValue(),this.checked=this.input.checked,this.value=this.input.checked,this.readonly&&(this.input.classList.add("readonly"),this.input.disabled=!0),li(this.input,a),e.appendChild(this.input)}if(!C(this.label)){const{style:t,projection:n,value:s}=i;this.label=Z({class:["field--checkbox__label"],for:this.input.id,tabindex:0,dataset:{nature:"field-component",view:"binary",id:this.id}}),this.label.htmlFor=this.input.id,n&&this.label.append(On.call(this,n)),li(this.label,t),e.appendChild(this.label)}if(s.projection){let t=On.call(this,s.projection);t.classList.add("field--binary__after"),e.appendChild(t)}return e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),this.refresh(),this.element},update(e,t){switch(e){case"value.changed":this.input.checked=t;break;default:console.warn(`The message '${e}' was not handled for check field`)}this.refresh()},focusIn(){return this.focused=!0,this.value=this.input.checked,this.checked=this.input.checked,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.hasChanges()&&this.setValue(this.input.checked),this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.choice&&Pe(this.choice),this.input.blur(),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!==this.input.checked},hasValue(){return this.input.checked},getValue(){return this.input.checked},setValue(e){var t=this.source.setValue(e);t.success?this.errors=[]:(this.environment.notify(t.message),this.errors.push(...t.errors)),this.input.checked=e,this.value=e,this.checked=e,this.refresh()},getCandidates(){return this.source.getCandidates()},enable(){this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1},disable(){this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0},refresh(){gi.call(this,this.schema.state),this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change");const e=a(this.state,this.schema);if(e){const{label:t}=e;if(we(this.label),t){const{style:e,projection:i,value:n}=t;i&&this.label.append(On.call(this,i)),li(this.label,e)}}var t,i;this.input.checked?this.element.dataset.state="on":this.element.dataset.state="off",we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.input.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(("error",t=this.errors,i=J({class:["notification-message","notification-message--error"]},t),Array.isArray(t)?i.style.minWidth=`${Math.min(.5*t[0].length,30)}em`:i.style.minWidth=`${Math.min(.5*t.length,30)}em`,i))):(this.element.classList.remove("error"),this.input.classList.remove("error"),this.statusElement.classList.remove("error"))},append(e){if(!C(e))throw new TypeError("Bad argument: The 'element' argument must be an HTML Element");return this.element.appendChild(e),this},escapeHandler(e){this.input.focus(),this.messageElement&&Pe(this.messageElement),this.choice&&Pe(this.choice)},enterHandler(e){this.setValue(!this.input.checked)},bindEvents(){this.element.addEventListener("change",(e=>{this.setValue(this.getValue())}))}},Ci=Object.assign(Object.create(xi),Ei);function ki(e,t){var i=J({class:["notification-message",`notification-message--${e}`]},t);return Array.isArray(t)?i.style.minWidth=`${Math.min(.5*t[0].length,30)}em`:i.style.minWidth=`${Math.min(.5*t.length,30)}em`,i}function Ti(e){const t=e=>e.parentElement===this.choices;return t(e)?e:ge(e,t,5)}function Li(e){return e.dataset.value}const _i={value:null,choices:null,input:null,items:null,selection:null,selectionElement:null,init(){return this.source.register(this),this.items=new Map,b(this.schema,"choice")||(this.schema.choice={}),this},update(e,t){switch(e){case"value.changed":if("concept"===t.object){let e=this.model.createProjection(t,"choice-selection").init();this.setChoice(t.name),this.setSelection(e.render())}else this.setChoice(t);break;default:console.warn(`The message '${e}' was not handled for choice field`)}},hasChanges(){return this.value!==this.selected},reset(){this.setValue(null)},hasValue(){return!y(this.selection)},getValue(){return this.selection},setValue(e){var t=this.source.setValue(e);t.success?this.errors=[]:(this.environment.notify(t.message),this.errors.push(...t.errors)),this.value=e,this.refresh()},render(){const e=I(),{before:t={},choice:i,selection:n={},after:s={},input:a={},style:o}=this.schema;if(C(this.element)||(this.element=q({id:this.id,class:["field","field--choice"],tabindex:-1,dataset:{nature:"field",view:"choice",input:"",id:this.id}}),li(this.element,o)),C(this.notification)||(this.notification=q({class:["field-notification","hidden"],dataset:{nature:"field-component",view:"choice",id:this.id}}),e.appendChild(this.notification)),C(this.statusElement)||(this.statusElement=Y({class:["field-status"],dataset:{nature:"field-component",view:"choice",id:this.id}}),this.notification.appendChild(this.statusElement)),C(this.messageElement)||(this.messageElement=Y({class:["field-message","hidden"],dataset:{nature:"field-component",view:"choice",id:this.id}}),this.notification.appendChild(this.messageElement)),t.projection){let i=On.call(this,t.projection);i.classList.add("field--choice__before"),e.appendChild(i)}if(!C(this.input)){const{before:t={},after:i={},style:n}=a;this.input=K({type:"text",class:["field--choice__input"],dataset:{nature:"field-component",view:"choice",id:this.id}}),li(this.input,n),e.append(this.input)}if(!C(this.choices)){const{style:t}=i;this.choices=F({class:["bare-list","field--choice__choices"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}}),li(this.choices,t),e.appendChild(this.choices)}if(!C(this.selectionElement)){const{style:t}=n;this.selectionElement=q({class:["field--choice__selection"],dataset:{nature:"field-component",view:"choice",id:this.id}}),li(this.selectionElement,t),e.appendChild(this.selectionElement)}if(s.projection){let t=On.call(this,s.projection);t.classList.add("field--choice__after"),e.appendChild(t)}if(e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),we(this.choices),this.source.getCandidates().forEach((e=>{this.choices.appendChild(this.createChoiceOption(e))})),this.source.hasValue()){let e=this.source.getValue();if("concept"===e.object){let t=this.model.createProjection(e,"choice-selection").init();this.setChoice(e.name),we(this.selectionElement).appendChild(t.render())}else this.setChoice(e)}return this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return u(this.input.value)&&(this.input.value=""),this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("querying"),C(this.selection)&&(Ve(this.selection),this.input.value=""),this.focused=!1,this},enable(){return this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1,this},disable(){return this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0,this},refresh(){return this.hasValue()?this.element.classList.remove("empty"):this.element.classList.add("empty"),this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change"),this.element.classList.remove("querying"),we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.input.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(ki("error",this.errors))):(this.element.classList.remove("error"),this.input.classList.remove("error"),this.statusElement.classList.remove("error")),this},filterChoice(e){const{children:t}=this.choices;if(this.element.dataset.input=e.trim(),u(e)){for(let e=0;e<t.length;e++){const i=t[e];Ve(i),i.hidden=!1}return}this.element.classList.add("querying");let i=e.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let e=0;e<t.length;e++){const n=t[e],{value:s}=n.dataset;i.some((e=>s.toLowerCase().includes(e)))?(Ve(n),n.hidden=!1):(Pe(n),n.hidden=!0)}return!0},createChoiceOption(e){const t=U({class:["field--choice__choice"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,value:e.name||e}}),{before:i={},style:n,template:s,after:o={}}=a(this.schema.choice.option,{});if(i.projection){let e=On.call(this,i.projection);e.classList.add("field--choice__option__before"),t.appendChild(e)}if(l(e)){let i=this.model.createProjection(e,a(s,"choice")).init(this.source);const{context:n}=i.getSchema();if(n)for(const e in n){const i=n[e];t.dataset[`choice${r=e,u(r)?r:r.charAt(0).toUpperCase()+r.slice(1)}`]=i}t.append(i.render())}else t.append(e.toString());var r;if(li(t,n),o.projection){let e=On.call(this,o.projection);e.classList.add("field--choice__option__after"),t.appendChild(e)}return this.items.set(e.name,t),t},setChoice(e){const{children:t}=this.choices;for(let i=0;i<t.length;i++){const n=t[i];Li(n)===e?(n.classList.add("selected"),n.dataset.selected="selected",this.selection=n,Ve(n)):(n.classList.remove("selected"),delete n.dataset.selected,Pe(n))}return this},setSelection(e){we(this.selectionElement).appendChild(e)},spaceHandler(e){const t=I();this.source.getCandidates().forEach((e=>{t.appendChild(this.createChoiceOption(e))})),we(this.choices).appendChild(t),this.filterChoice(this.input.value),Ve(this.choices),this.element.classList.add("querying"),this.messageElement.appendChild(ki("info","Select an element from the list.")),Ve(this.messageElement)},escapeHandler(e){this.input.focus(),this.messageElement&&Pe(this.messageElement)},enterHandler(e){const t=Ti.call(this,e);if(t){const e=Li(t);this.setValue(e)}},backspaceHandler(e){Ti.call(this,e)&&this.input.focus()},clickHandler(e){const t=Ti.call(this,e);if(C(t)&&this.selection!==t){let e=Li(t);this.setValue(e),this.focusOut()}},arrowHandler(e,t){const i=Ti.call(this,t);if(C(i)){let t=null;"up"===e?t=fe(i,(e=>!e.hidden)):"down"===e&&(t=be(i,(e=>!e.hidden))),C(t)&&t.focus()}},bindEvents(){this.element.addEventListener("input",(e=>{this.filterChoice(this.input.value)}))}},Ai=Object.assign(Object.create(xi),_i);function Oi(){return C(this.messageElement)||(this.messageElement=Y({class:["field-message","hidden"],dataset:{nature:"field-component",view:"choice",id:this.id}}),this.notification.appendChild(this.messageElement)),this.messageElement}function Si(){var e=q({class:["field","field--link","empty"],tabindex:-1,dataset:{nature:"field",view:"link",id:this.id}});return this.source.hasValue()&&e.classList.remove("empty"),li(e,this.schema.style),e}function Vi(e){const t=e=>e.parentElement===this.choices;return t(e)?e:ge(e,t,5)}function Pi(e){const{before:t={},style:i,after:n={}}=a(this.schema.choice.option,{}),s=U({class:["field--link__choice"],tabindex:0,dataset:{nature:"field-component",component:"choice",id:this.id,value:(o=e,"concept"===o.type?o.value.id:"value"===o.type?o.value:o)}});var o,r=null;"concept"===e.type&&(r=e.value);const c=this.model.createProjection(r,"reference-choice");return s.appendChild(c.init().render()),li(s,i),s}const Mi="info";function Ni(e,t){var i=J({class:["notification-message",`notification-message--${e}`]},t);return Array.isArray(t)?i.style.minWidth=`${Math.min(.5*t[0].length,30)}em`:i.style.minWidth=`${Math.min(.5*t.length,30)}em`,i}const Ii={input:null,selector:null,choices:null,selectionElement:null,value:null,init(){return this.source.register(this),b(this.schema,"choice")||(this.schema.choice={}),this},render(){const{placeholder:e,before:t={},input:i,choice:n,after:s={}}=this.schema,a=I();if(C(this.element)||(this.element=Si.call(this),this.element.id=this.id,li(this.element,this.schema.style)),C(this.notification)||(this.notification=q({class:["field-notification"],dataset:{nature:"field-component",view:"link",id:this.id}}),a.append(this.notification)),C(this.statusElement)||(this.statusElement=Y({class:["field-status"],dataset:{nature:"field-component",view:"link",id:this.id}}),this.notification.append(this.statusElement)),C(this.selector)||(this.selector=q({class:["field--link__placeholder"],tabindex:-1,dataset:{nature:"field-component",component:"selector",view:"link",id:this.id}},On.call(this,e)),a.append(this.selector)),C(this.input)||(this.input=K({type:"text",class:["field--link__input"],dataset:{nature:"field-component",component:"input",view:"link",id:this.id}}),a.appendChild(this.input)),!C(this.choices)){const{style:e}=n;this.choices=F({class:["bare-list","field--link__choices"],tabindex:-1,dataset:{nature:"field-component",component:"choices",view:"link",id:this.id}}),li(this.choices,e),a.appendChild(this.choices)}if(C(this.selectionElement)||(this.selectionElement=q({class:["field--link__selection"],dataset:{nature:"field-component",component:"selection",view:"link",id:this.id}}),a.appendChild(this.selectionElement)),t.projection){let e=On.call(this,t.projection);e.classList.add("field--link__before"),a.appendChild(e)}if(this.source.hasValue()){let e=this.getValue();var o=this.model.createProjection(e);this.element.appendChild(o.init().render())}if(s.projection){let e=On.call(this,s.projection);e.classList.add("field--link__after"),a.appendChild(e)}return a.hasChildNodes()&&(this.element.appendChild(a),this.bindEvents()),this.refresh(),this.element},update(e,t){var i=null;switch(e){case"value.changed":y(t)?(this.value=null,this.clear()):(i=this.model.createProjection(t,"reference-value").init(),we(this.selectionElement).appendChild(i.render()),this.value=t.id);break;default:console.warn(`The message '${e}' was not handled for link field`)}this.refresh()},hasChanges:()=>!1,hasValue(){return!u(this.value)},getValue(){return this.selection},setValue(e){var t=this.source.setValue(e);t.success?this.errors=[]:(this.environment.notify(t.message),this.errors.push(...t.errors)),this.value=e,this.refresh()},enable(){this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1},disable(){this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0},clear(){we(this.choices),this.input.textContent=""},refresh(){this.hasValue()?(Pe(this.selector),Pe(this.input),Pe(this.choices)):(Ve(this.selector),Pe(this.input),Ve(this.choices)),this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change"),we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.input.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(Ni("error",this.errors))):(this.element.classList.remove("error"),this.input.classList.remove("error"),this.statusElement.classList.remove("error"))},focusIn(){this.focused=!0,this.element.classList.add("active")},focusOut(){this.readonly||(u(this.input.value)&&(this.input.value=""),this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1)},openChoice(){we(this.choices),Oi.call(this),we(this.messageElement);const e=this.source.getCandidates();if(o(e))return this.messageElement.appendChild(Ni(Mi,"There are currently no valid references.")),void Ve(this.messageElement);e.forEach((e=>{var t=Pi.call(this,e);this.choices.appendChild(t)})),Ve(this.choices),this.choices.focus()},filterChoice(e){const{children:t}=this.choices;if(!u(e)){for(let i=0;i<t.length;i++){const n=t[i],{value:s}=n.dataset;e.trim().replace(/\s+/g," ").split(" ").some((e=>s.includes(e)))?Ve(n):Pe(n)}return!0}for(let e=0;e<t.length;e++){const i=t[e];Ve(i)}},selectChoice(e){if(!C(e))return;const t=function(e){return e.dataset.value}(e);return this.setValue(t),this},escapeHandler(e){this.input.focus(),this.messageElement&&Pe(this.messageElement),this.choices&&Pe(this.choices)},spaceHandler(){we(this.choices),Oi.call(this),we(this.messageElement);const e=this.source.getCandidates();if(o(e))return this.messageElement.appendChild(Ni(Mi,"There are currently no valid references.")),void Ve(this.messageElement);e.forEach((e=>{var t=Pi.call(this,e);this.choices.appendChild(t)})),Ve(this.choices),this.choices.focus()},enterHandler(e){const t=Vi.call(this,e);t&&this.selectChoice(t)},backspaceHandler(e){Vi.call(this,e)&&this.input.focus()},clickHandler(e){const{component:t}=e.dataset;if("selector"===t||"selection"===t)this.openChoice();else{const t=Vi.call(this,e);C(t)&&this.selectChoice(t)}},bindEvents(){this.element.addEventListener("input",(e=>{this.filterChoice(this.input.value)}))}},Ri=Object.assign(Object.create(xi),Ii),$i={projection:{type:"static",static:{type:"text",content:"Add"}}},Bi={projection:{type:"static",static:{type:"text",content:"Remove"}}};function qi(){return C(this.messageElement)||(this.messageElement=Y({class:["field-message","hidden"],dataset:{nature:"field-component",view:"text",id:this.id}}),this.notification.appendChild(this.messageElement)),this.messageElement}function Di(e){const{action:t={}}=this.schema,{before:i={},style:n,template:s,after:o={}}=this.schema.list.item,r=U({class:["field--list-item"],tabindex:0,dataset:{nature:"field-component",view:"list",id:this.id,value:e.id,name:e.name,index:a(e.index,this.items.size)}});var{projection:c,style:l}=a(t.remove,Bi),h=On.call(this,c),p=ne({class:["btn","btn-remove"],tabindex:-1,dataset:{nature:"field-component",view:"list",id:this.id,action:"remove",index:r.dataset.index}},h);if(li(p,l),r.appendChild(p),i.projection){let e=On.call(this,i.projection);e.classList.add("field--list-item__before"),r.appendChild(e)}var d=this.model.createProjection(e,s.tag);if(console.log(d.schema),r.appendChild(d.init().render()),o.projection){let e=On.call(this,o.projection);e.classList.add("field--list-item__after"),r.appendChild(e)}return this.items.set(e.id,r),li(r,n),r}function Hi(e,t){var i=J({class:["notification-message",`notification-message--${e}`]},t);return Array.isArray(t)?i.style.minWidth=`${Math.min(.5*t[0].length,30)}em`:i.style.minWidth=`${Math.min(.5*t.length,30)}em`,i}const Fi={list:null,items:null,selection:null,init(){return this.source.register(this),this.items=new Map,this},update(e,t){switch(e){case"value.added":this.addItem(t);break;case"value.removed":this.removeItem(t);break;case"delete":this.source.unregister(this),we(this.element),this.element.remove();break;default:console.warn(`The message '${e}' was not handled for list field`)}this.refresh()},render(){const e=I(),{before:t={},list:i={},after:n={},action:s={}}=this.schema;if(C(this.element)||(this.element=q({id:this.id,class:["field","field--list"],tabindex:-1,dataset:{nature:"field",view:"list",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),li(this.element,this.schema.style)),C(this.notification)||(this.notification=q({class:["field-notification"],dataset:{nature:"field-component",view:"list",id:this.id}}),e.appendChild(this.notification)),C(this.statusElement)||(this.statusElement=Y({class:["field-status"],dataset:{nature:"field-component",view:"list",id:this.id}}),this.notification.appendChild(this.statusElement)),t.projection){console.log(t);let i=On.call(this,t.projection);i.classList.add("field--list__before"),e.appendChild(i)}C(this.list)||(this.list=F({class:["bare-list","field--list__list"],dataset:{nature:"field-component",view:"list",id:this.id}}),this.source.hasValue()||this.list.classList.add("empty"),li(this.list,i.style),e.appendChild(this.list)),this.source.getValue().forEach((e=>{var t=Di.call(this,e);this.list.appendChild(t)}));var{projection:o,style:r,position:c="after"}=a(s.add,$i),l=On.call(this,o,null),h=(["first","last"].includes(c)?U:ne)({class:["field--list__add"],tabindex:0,dataset:{nature:"field-component",view:"list",id:this.id,action:"add"}},[l]);switch(c){case"before":this.list.before(h);break;case"first":this.list.prepend(h);break;case"last":this.list.appendChild(h);break;case"after":this.list.after(h);break;default:console.warn(`This position ${c} is not valid. "last" used instead`),this.list.appendChild(h)}if(li(h,r),n.projection){let t=On.call(this,n.projection);t.classList.add("field--list__after"),e.appendChild(t)}return e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),this.refresh(),this.element},hasChanges:()=>!1,getValue(){return this.list.children},hasValue(){return this.items.size>0},clear(){this.items.clear(),we(this.list)},focusIn(e){this.focused=!0,this.element.classList.add("active")},focusOut(e){if(!this.readonly)return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){this.hasValue()?(this.element.classList.remove("empty"),this.list.classList.remove("empty")):(this.element.classList.add("empty"),this.list.classList.add("empty")),this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change"),we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.list.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(Hi("error",this.errors))):(this.element.classList.remove("error"),this.list.classList.remove("error"),this.statusElement.classList.remove("error"))},createElement(){return this.source.createElement()},getItem(e){return this.items.get(e)},addItem(e){const t=Di.call(this,e);e.index?this.list.children[e.index-1].after(t):this.list.appendChild(t)},removeItem(e){let t=this.getItem(e.id);if(!C(t))throw new Error("List error: Item not found");const i=+t.dataset.index;this.items.delete(e.id),we(t),t.remove();for(let e=i;e<this.list.children.length;e++){const t=this.list.children[e],{index:i}=t.dataset;t.dataset.index=+i-1}},append(e){if(!C(e))throw new TypeError("Bad argument: The 'element' argument must be an HTML Element");return this.element.appendChild(e),this},delete(e){if(e===this.element)return void this.source.remove();const{index:t}=e.dataset;this.source.removeElementAt(+t)?this.environment.notify("The element was successfully deleted"):(this.environment.notify("This element cannot be deleted"),Me(e))},spaceHandler(e){qi.call(this),we(this.messageElement),this.messageElement.appendChild(Hi("info","Enter any text.")),Ve(this.messageElement)},escapeHandler(e){this.messageElement&&Pe(this.messageElement)},enterHandler(e){},backspaceHandler(e){},clickHandler(e){const t=e=>{const{nature:t,id:i}=e.dataset;return"field-component"===t&&i===this.id},i=t(n=e)?n:ge(n,(e=>t(e)),5);var n;if(y(i))return;const{action:s,index:a,name:o}=i.dataset;"add"===s?(this.selection=i,this.createElement()):"remove"===s&&(this.selection=i.parentElement,this.delete(i.parentElement))},arrowHandler(e,t){const i=t;if(!C(i))return;const n=this.list.children,{top:s,right:a,bottom:o,left:r}=i.getBoundingClientRect();let c=null,l=99999,h=99999;if("up"===e)for(let e=0;e<n.length;e++){const t=n[e],{bottom:i,left:a}=t.getBoundingClientRect();let o=Math.abs(s-i),p=Math.abs(r-a);s>i&&(o<l||p<h)&&(c=t,l=o,h=p)}else if("down"===e)for(let e=0;e<n.length;e++){const t=n[e],{top:i,left:s}=t.getBoundingClientRect();let a=Math.abs(o-i),p=Math.abs(r-s);o<i&&(a<l||p<h)&&(c=t,l=a,h=p)}else if("left"===e)for(let e=0;e<n.length;e++){const t=n[e],{top:i,right:o}=t.getBoundingClientRect();let p=Math.abs(s-i),d=Math.abs(a-o);r>o&&(p<l||d<h)&&(c=t,l=p,h=d)}else if("right"===e)for(let e=0;e<n.length;e++){const t=n[e],{top:i,left:o}=t.getBoundingClientRect();let p=Math.abs(s-i),d=Math.abs(r-o);a<o&&(p<l||d<h)&&(c=t,l=p,h=d)}C(c)&&c.focus()},bindEvents(){}},Ui=Object.assign(Object.create(xi),Fi);var zi=0;const Wi={projection:{type:"text",content:"Add"}},Gi={projection:{type:"text",content:"Remove"}},Ji={table:null,header:null,body:null,footer:null,caption:null,elements:null,init(){this.source.register(this),this.caption=this.schema.caption,this.elements=new Map;const{concept:e,name:t}=this.schema.template;return this.template=this.model.getModelProjectionTemplate(e,"table").projection,this},update(e,t){switch(e){case"value.added":this.addRow(t);break;case"value.removed":this.removeRow(t);break;default:console.warn(`The message '${e}' was not handled for table field`)}this.refresh()},render(){const{table:e={},action:t={},before:i={},after:n={}}=this.schema,{row:s}=this.template,o=I();if(C(this.element)||(this.element=q({class:["field","field--table"],id:this.id,tabindex:-1,dataset:{nature:"field",view:"table",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),li(this.element,this.schema.style)),C(this.notification)||(this.notification=q({class:["field-notification"],dataset:{nature:"field-component",view:"table",id:this.id}}),o.appendChild(this.notification)),C(this.statusElement)||(this.statusElement=Y({class:["field-status"],dataset:{nature:"field-component",view:"table",id:this.id}}),this.notification.appendChild(this.statusElement)),i.projection){let e=On.call(this,i.projection);e.classList.add("field--table__before"),o.appendChild(e)}if(!C(this.table)){const{style:t,header:i,body:n={},footer:s}=e;if(this.table=se({class:["field--table__table"],tabindex:0,dataset:{nature:"field-component",view:"table",id:this.id,caption:this.caption}}),i){const{style:e}=i;this.header=oe({class:["field--table-header"],dataset:{nature:"field-component",view:"table",id:this.id}}),li(this.header,e),this.table.append(this.header)}if(n){const{style:e}=n;this.body=re({class:["field--table-body"],dataset:{nature:"field-component",view:"table",id:this.id}}),li(this.body,e),this.table.append(this.body)}if(s){const{style:e}=s;this.footer=ce({class:["field--table-footer"],dataset:{nature:"field-component",view:"table",id:this.id}}),li(this.footer,e),this.table.append(this.footer)}li(this.table,t),o.appendChild(this.table)}if(e.header){let e=le({class:["field--table-header-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id}});s.forEach((t=>{const{header:i}=t,{style:n,content:s}=i;var a=On.call(this,s),o=he({class:["field--table-header-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},a);li(o,n),e.appendChild(o)}));let t=pe({class:["field--table-header-cell","field--table-header-cell--action"]},"Action");e.appendChild(t),this.header.appendChild(e)}if(!C(this.btnAdd)){let{projection:e,style:i}=a(t.add,Wi),n=On.call(this,e,null,{focusable:!1});this.btnAdd=ne({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"add"}},n),li(this.btnAdd,i),o.appendChild(this.btnAdd)}if(this.source.hasValue()&&this.source.getValue().forEach((e=>{this.addRow(e)})),n.projection){let e=On.call(this,n.projection);e.classList.add("field--table__after"),o.appendChild(e)}return o.hasChildNodes()&&(this.element.appendChild(o),this.bindEvents()),this.refresh(),this.element},hasChanges:()=>!1,hasValue(){return this.body.rows.length>0},getValue(){return this.table.rows},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){var e,t;this.hasValue()?this.table.classList.remove("empty"):this.table.classList.add("empty"),this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change"),we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(("error",e=this.errors,t=J({class:["notification-message","notification-message--error"]},e),Array.isArray(e)?t.style.minWidth=`${Math.min(.5*e[0].length,30)}em`:t.style.minWidth=`${Math.min(.5*e.length,30)}em`,t))):(this.element.classList.remove("error"),this.statusElement.classList.remove("error"))},createElement(){return this.source.createElement()},addRow(e){const{action:t={},before:i={},after:n={}}=this.schema,{row:s}=this.template,o=a(e.index,this.table.rows.length),r="row"+zi++,c=le({class:["field--table-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id,index:o,elementId:r}});this.elements.set(r,c),s.forEach((t=>{const{body:i}=t,{style:n,content:s}=i;var a=On.call(this,s,e),o=pe({class:["field--table-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},a);li(o,n),c.appendChild(o)}));var l=pe({class:["field--table__cell-action"]}),{projection:h,style:p}=a(t.remove,Gi),d=On.call(this,h),u=ne({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"remove",rowId:r}},d),m=ne({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-up",rowId:r}},"Move up"),y=ne({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-down",rowId:r}},"Move down");li(u,p),l.append(u,m,y),c.appendChild(l),this.body.appendChild(c)},removeRow(e){console.log(e);var t=this.body.rows.item(e.index);if(!C(t))throw new Error("Table error: Row not found");we(t),t.remove();for(let t=e.index;t<this.body.rows.length;t++){const e=this.body.rows.item(t),{index:i}=e.dataset;e.dataset.index=+i-1}},removeElement(e){return this.source.removeElement(e)},delete(e){if(e===this.element||e===this.table)return void this.source.delete();const{index:t}=e.dataset;this.source.removeElementAt(+t)?this.environment.notify("The element was successfully deleted"):(this.environment.notify("This element cannot be deleted"),Me(e))},bindEvents(){this.element.addEventListener("click",(e=>{const{target:t}=e,i=function(e){const t="field-component";return e.dataset.nature===t?e:ge(e,(e=>e.dataset.nature===t))}(t);if(!C(i))return;const{id:n,action:s}=i.dataset;if(n===this.id)if("add"===s)this.createElement();else if("remove"===s){const{rowId:e}=i.dataset;let t=this.elements.get(e);this.delete(t)}else if("move-up"===s){const{rowId:e}=i.dataset;let t=this.elements.get(e),n=t.previousElementSibling;n&&n.before(t)}else if("move-down"===s){const{rowId:e}=i.dataset;let t=this.elements.get(e),n=t.nextElementSibling;n&&n.after(t)}}),!0)}},Xi=Object.assign(Object.create(xi),Ji),Yi=e=>C(e,["input","textarea"]);function Ki(){return C(this.messageElement)||(this.messageElement=Y({class:["field-message","hidden"],dataset:{nature:"field-component",view:"text",id:this.id}}),this.notification.appendChild(this.messageElement)),this.messageElement}function Qi(){return C(this.choice)||(this.choice=F({class:["bare-list","field--textbox__choices"],dataset:{nature:"field-component",view:"text",component:"choice",id:this.id}}),this.append(this.choice)),this.choice}function Zi(e){return U({class:["field--textbox__choice"],tabindex:0,dataset:{nature:"field-component",view:"text",component:"choice-item",value:e,id:this.id}},e)}const en="info";function tn(e,t){var i=J({class:["notification-message",`notification-message--${e}`]},t);return Array.isArray(t)?i.style.minWidth=`${Math.min(.5*t[0].length,30)}em`:i.style.minWidth=`${Math.min(.5*t.length,30)}em`,i}function nn(e){return e||("concept"===this.source.object?this.source.getAlias():"Enter a value")}function sn(e){return e.parentElement===this.choice?e:ge(e,(e=>e.parentElement===this.choice),3)}const an={input:null,choice:null,value:"",placeholder:null,multiline:!1,init(){return this.source.register(this),this.multiline=a(this.schema.multiline,!1),this.focusable=a(this.schema.focusable,!0),b(this.schema,"choice")||(this.schema.choice={}),this},update(e,t){switch(e){case"value.changed":this.setValue(t);break;default:console.warn(`The message '${e}' was not handled for text field`)}this.refresh()},focusIn(){return this.focused=!0,this.value=this.getValue(),this.element.classList.add("active"),this.element.classList.add("focus"),this},focusOut(){return this.hasChanges()&&this.setValue(this.getValue(),!0),u(this.getValue())&&(this.input.textContent=""),this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.choice&&Pe(this.choice),this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("focus"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!==this.getValue()},hasValue(){return!o(this.getValue())},getValue(){return Yi(this.input)?this.input.value:this.input.textContent},setValue(e,t=!1){var i;i=t?this.source.setValue(e):{success:!0},this.errors=[],i.success||(this.environment.notify(i.message,"error"),this.errors.push(...i.errors)),Yi(this.input)?this.input.value=e:this.input.textContent=e,this.value=e,this.refresh()},getCandidates(){return this.source.getCandidates()},enable(){return this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1,this.element.classList.add("disabled"),this},disable(){return this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0,this.element.classList.remove("disabled"),this},refresh(){this.hasValue()?this.element.classList.remove("empty"):this.element.classList.add("empty"),this.element.dataset.value=this.value,this.hasChanges()?this.statusElement.classList.add("change"):this.statusElement.classList.remove("change"),we(this.statusElement),this.hasError?(this.element.classList.add("error"),this.input.classList.add("error"),this.statusElement.classList.add("error"),this.statusElement.appendChild(tn("error",this.errors))):(this.element.classList.remove("error"),this.input.classList.remove("error"),this.statusElement.classList.remove("error")),this.choice&&this.filterChoice(this.getValue())},render(){const e=I(),{content:t,style:i}=this.schema;if(!Array.isArray(t))throw new Error("Empty content for textfield");return C(this.element)||(this.element=q({id:this.id,class:["field","field--textbox"],dataset:{nature:"field",view:"text",id:this.id,disabled:this.disabled,readonly:this.readonly,value:""}}),this.readonly&&this.element.classList.add("readonly"),li(this.element,this.schema.style)),C(this.notification)||(this.notification=q({class:["field-notification"],dataset:{nature:"field-component",view:"text",id:this.id}}),e.appendChild(this.notification)),C(this.statusElement)||(this.statusElement=Y({class:["field-status"],dataset:{nature:"field-component",view:"text",id:this.id}}),this.notification.appendChild(this.statusElement)),t.forEach((t=>{if("input"===t.type){const{placeholder:i,style:n,type:s}=a(t.input,{});let o=nn.call(this,i);this.readonly?this.input=J({class:["field--textbox__input","readonly"],dataset:{nature:"field-component",view:"text",id:this.id}}):this.multiline?this.input=Q({class:["field--textbox__input","field--textbox__input--multiline"],placeholder:o,dataset:{nature:"field-component",view:"text",id:this.id}}):this.input=K({type:a(s,"text"),class:["field--textbox__input"],placeholder:o,dataset:{nature:"field-component",view:"text",id:this.id}}),this.disabled&&(this.element.classList.add("disabled"),this.input.disabled=!0),this.focusable?this.input.tabIndex=0:(this.element.dataset.ignore="all",this.input.dataset.ignore="all");let r="";this.source.hasValue()&&(r=this.source.getValue()),u(r)||(this.input.textContent=r,this.value=r),li(this.input,n),e.appendChild(this.input)}else{let i=On.call(this,t);e.appendChild(i)}})),li(this.element,i),e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),this.source.hasValue()&&this.setValue(this.source.getValue()),this.refresh(),this.element},filterChoice(e){const{children:t}=this.choice;if(u(e)){for(let e=0;e<t.length;e++){const i=t[e];Ve(i),i.hidden=!1}return!0}let i=e.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let e=0;e<t.length;e++){const n=t[e],{value:s}=n.dataset;i.some((e=>s.toLowerCase().includes(e)))?(Ve(n),n.hidden=!1):(Pe(n),n.hidden=!0)}return!0},selectChoice(e){if(!C(e))return;const t=function(e){return e.dataset.value}(e);return this.setValue(t,!0),this.input.focus(),Pe(this.choice),this},append(e){if(!C(e))throw new TypeError("Bad argument: The 'element' argument must be an HTML Element");return this.element.appendChild(e),this},spaceHandler(e){const t=this.getCandidates();if(!Array.isArray(t))throw new TypeError("Bad values");if(Ki.call(this),we(this.messageElement),o(t))this.messageElement.appendChild(tn(en,"Enter any text.")),Ve(this.messageElement);else{Qi.call(this);const e=I();t.forEach((t=>e.appendChild(Zi.call(this,t)))),we(this.choice).appendChild(e),this.filterChoice(this.getValue()),Ve(this.choice),this.messageElement.appendChild(tn(en,"Select an element from the list.")),Ve(this.messageElement)}},escapeHandler(e){this.input.focus(),this.messageElement&&Pe(this.messageElement),this.choice&&Pe(this.choice)},enterHandler(e){const t=sn.call(this,e);t?this.selectChoice(t):this.multiline||e===this.input&&this.setValue(this.getValue(),!0)},backspaceHandler(e){sn.call(this,e)&&this.input.focus()},clickHandler(e){const t=sn.call(this,e);C(t)&&this.selectChoice(t)},arrowHandler(e,t){const i=sn.call(this,t);if(C(i)){let t=null;"up"===e?t=fe(i,(e=>!e.hidden)):"down"===e&&(t=be(i,(e=>!e.hidden))),C(t)&&t.focus()}},controlHandler(e){this.toolbar&&this.toolbar.remove()},bindEvents(){this.element.addEventListener("input",(e=>{this.refresh()}))}},on=Object.assign(Object.create(xi),an),rn={binary:(e,t,i)=>Object.create(Ci,{object:{value:"field"},name:{value:"binary-field"},type:{value:"binary"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),choice:(e,t,i)=>Object.create(Ai,{object:{value:"field"},name:{value:"choice-field"},type:{value:"choice"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),link:(e,t,i)=>Object.create(Ri,{object:{value:"field"},name:{value:"link-field"},type:{value:"link"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),list:(e,t,i)=>Object.create(Ui,{object:{value:"field"},name:{value:"list-field"},type:{value:"list"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),table:(e,t,i)=>Object.create(Xi,{object:{value:"field"},name:{value:"table-field"},type:{value:"table"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),text:(e,t,i)=>Object.create(on,{object:{value:"field"},name:{value:"text-field"},type:{value:"text"},id:{value:ln()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}})};var cn=0;const ln=()=>"field"+cn++,hn={createField(e,t,i){const{type:n}=t,s=rn[n];if(y(s))throw new Error(`Missing handler: The '${name}' field could not be handled`);var o=s(e,t,i);if(y(o))throw new Error(`Bad request: The '${name}' field could not be created`);return o.errors=[],o.readonly=a(t.readonly,!1),o.initObserver(),y(o.id)&&(o.id=ln()),o}},pn={init(){throw new Error("This function has not been implemented")},element:null,statusElement:null,attached:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasAttached(){return!o(this.attached)},attach(e,t){this.attached.push(e)},detach(e){this.attached.slice(this.attached.indexOf(e),1)},getAttached(e){return c(e)?this.attached.filter((t=>e(t))):this.attached},show(){return Ve(this.element),this.visible=!0,this.active=!0,this},hide(){return Pe(this.element),this.visible=!1,this},focus(){return this.element.focus(),this.focused=!0,this.active=!0,this},clear:()=>!0,delete(){this.clear(),we(this.element),this.element.remove()}},dn=Object.assign(pn,Ke),un={init(){return this},render(){const e=I(),{help:t,style:i,content:n}=this.schema;return C(this.element)||(this.element=G({class:["audio"],src:n,dataset:{ignore:"all"}})),y(t)||(this.element.title=t),li(this.element,i),e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},bindEvents(){}},mn=Object.assign(Object.create(dn),un);function yn(e){return e.startsWith("http://")||e.startsWith("https://")?new URL(e).href:yn(`https://${e}`)}const fn={url:null,alt:null,width:null,height:null,init(){const{url:e,width:t,height:i,alt:n}=this.schema;return this.url=yn(e),this.width=t,this.height=i,this.alt=n,this},render(){const{help:e,style:t}=this.schema;return C(this.element)||(this.element=W({class:["image"],src:this.url,alt:this.alt,dataset:{ignore:"all"}})),y(this.width)||isNaN(this.width)||(this.element.width=this.width),y(this.height)||isNaN(this.height)||(this.element.height=this.height),y(e)||(this.element.title=e),li(this.element,t),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this}},bn=Object.assign(Object.create(dn),fn),gn={email:e=>`mailto:${e}`,phone:e=>`tel:${e}`,link:e=>`${e}`};function vn(e){return e.startsWith("http://")||e.startsWith("https://")?new URL(e).href:vn(`https://${e}`)}const jn={url:null,urlType:null,href:null,content:null,init(){const{url:e,content:t=[],urlType:i="link"}=this.schema;this.url=vn(e),this.content=t,this.urlType=i;const n=gn[this.urlType];if(!c(n))throw new TypeError("type not handled");return this.href=n(this.url),this},render(){if(u(this.url))throw new Error("There is no URL defined for this link");if(o(this.content))throw new Error("There is no content defined for this link");const e=I(),{help:t,style:i}=this.schema;return C(this.element)||(this.element=z({class:["link"],href:this.href,target:"_blank",dataset:{ignore:"all"}})),this.content.forEach((t=>{let i=On.call(this,t);e.appendChild(i)})),y(t)||(this.element.title=t),li(this.element,i),e.hasChildNodes()&&this.element.appendChild(e),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this}},wn=Object.assign(Object.create(dn),jn),xn={contentType:null,init(){const{contentType:e="text"}=this.schema;return this.contentType=e,this},render(){const e=I(),{help:t,style:i,content:n}=this.schema;return C(this.element)||(this.element=J({class:["text"],dataset:{ignore:"all"}}),"html"===this.contentType?this.element.append(_(n)):this.element.textContent=n),y(t)||(this.element.title=t),li(this.element,i),e.hasChildNodes()&&(this.element.appendChild(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&(Pe(this.messageElement),we(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},bindEvents(){}},En=Object.assign(Object.create(dn),xn),Cn={template:null,selector:null,content:null,init(){var e;return this.selector=this.schema.selector,this.template=(e=this.selector,"content"in document.createElement("template")?me(e,undefined):null),this},render(){const{style:e,content:t}=this.schema;var i;return x(this.element)||(this.element=(i=this.template)?document.importNode(i.content,a(undefined,!0)):i),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this}},kn=Object.assign(Object.create(dn),Cn);var Tn=0;const Ln=()=>"static"+Tn++,_n={audio:(e,t,i)=>Object.create(mn,{object:{value:"static"},name:{value:"audio-static"},type:{value:"audio"},id:{value:Ln()},model:{value:e},schema:{value:t},projection:{value:i}}),image:(e,t,i)=>Object.create(bn,{object:{value:"static"},name:{value:"image-static"},type:{value:"image"},id:{value:Ln()},model:{value:e},schema:{value:t},projection:{value:i}}),link:(e,t,i)=>Object.create(wn,{object:{value:"field"},name:{value:"image-static"},type:{value:"image"},id:{value:Ln()},model:{value:e},schema:{value:t},projection:{value:i}}),text:(e,t,i)=>Object.create(En,{object:{value:"static"},name:{value:"text-static"},type:{value:"text"},id:{value:Ln()},model:{value:e},schema:{value:t},projection:{value:i}}),html:(e,t,i)=>Object.create(kn,{object:{value:"static"},name:{value:"html-static"},type:{value:"html"},id:{value:Ln()},model:{value:e},schema:{value:t},projection:{value:i}})},An={createStatic(e,t,i){const{type:n}=t,s=_n[n];if(y(s))throw new Error(`Missing handler: The '${n}' static could not be handled`);var a=s(e,t,i);if(y(a))throw new Error(`Bad request: The '${n}' static could not be created`);return a.errors=[],a.initObserver(),y(a.id)&&(a.id=Ln()),a}};function On(e,t,i){const n=a(t,this.projection.concept);if("layout"===e.type){let t=Dn.createLayout(this.model,e.layout,this.projection).init(i);return t.parent=this,t.render()}if("field"===e.type){let t=hn.createField(this.model,e,this.projection).init(i);return t.model=this.model,t.render()}if("static"===e.type){let t=An.createStatic(this.model,e.static,this.projection).init(i);return t.parent=this,t.render()}if("attribute"===e.type)return bi.call(this,e,n);if("property"===e.type)return Sn.call(this,e,n);if("projection"===e.type){const{tag:n,style:s}=e,a=this.projection.schema.findIndex((e=>e.tags.includes(n))),o=ne({class:["btn"]},On.call(this,e.content,t,i));return o.addEventListener("click",(()=>{this.projection.changeView(a)})),li(o,s),o}throw console.error(e),new TypeError("Bad argument: The type is not recognized")}function Sn(e,t){const{help:i,style:n,name:s}=e,a=t.getProperty(s),o=J({class:["text"],dataset:{property:s,ignore:"all"}},a);return i&&(o.title=i),li(o,n),o}const Vn={container:null,orientation:null,elements:null,focusable:null,edit:!1,btnEdit:!1,menu:!1,init(e){return this.orientation=a(this.schema.orientation,"horizontal"),this.collapsible=a(this.schema.collapsible,!1),this.focusable=a(this.schema.focusable,!0),this.elements=[],Object.assign(this,a(e,{})),this},setOrientation(e){["horizontal","vertical"].includes(e)&&(this.orientation=e)},getStyle(){return this.schema.style},setStyle(e){this.schema.style=e,li.call(this,this.container,e)},render(){const{disposition:e,style:t}=this.schema;if(!Array.isArray(e)||o(e))throw new SyntaxError("Bad disposition");const i=I();C(this.container)||(this.container=q({class:["layout-container"],dataset:{nature:"layout",layout:"stack"}})),this.focusable?this.container.tabIndex=-1:this.container.dataset.ignore="all";for(let t=0;t<e.length;t++){let n=On.call(this,e[t]);this.elements.push(n),i.appendChild(n)}return li.call(this,this.container,t),i.hasChildNodes()&&(this.container.appendChild(i),this.bindEvents()),this.container.style.display="flex",this.container.style.alignItems="flex-start",this.refresh(),this.container},refresh(){return"vertical"===this.orientation&&(this.container.style.flexDirection="column"),"horizontal"===this.orientation&&(this.container.style.flexDirection="row"),this},openMenu(){if(!C(this.menu)){this.menu=q({class:["layout-menu"]});let e=Pn.call(this),t=Mn.call(this);this.menu.append(e,t),this.btnEdit.after(this.menu)}this.menu.prepend(this.btnEdit),this.menu.classList.add("open")},closeMenu(){C(this.menu)&&(this.menu.classList.remove("open"),setTimeout((()=>{this.menu.before(this.btnEdit)}),200))},bindEvents(){this.container.addEventListener("change",(e=>{const{target:t}=e,{prop:i}=t.dataset;"orientation"===i&&(this.setOrientation(t.value),this.refresh())}))}};function Pn(){var e=K({type:"radio",class:["stack-orientation__input"],name:`${this.id}orientation`,value:"vertical",checked:"vertical"===this.orientation,dataset:{prop:"orientation"}}),t=K({type:"radio",class:["stack-orientation__input"],name:`${this.id}orientation`,value:"horizontal",checked:"horizontal"===this.orientation,dataset:{prop:"orientation"}}),i=Z({class:["stack-orientation"]},[e,"Vertical"]),n=Z({class:["stack-orientation"]},[t,"Horizontal"]);return q({class:["radio-group"]},[i,n])}function Mn(){return q({class:["style-container"]})}const Nn={container:null,elements:null,focusable:null,init(e){return this.collapsible=a(this.schema.collapsible,!1),this.focusable=a(this.schema.focusable,!0),this.elements=[],Object.assign(this,a(e,{})),this},render(){const{disposition:e,style:t,help:i}=this.schema;if(!Array.isArray(e))throw new SyntaxError("Bad disposition");const n=I();C(this.container)||(this.container=q({class:["layout-container"],title:i,dataset:{nature:"layout",layout:"wrap"}})),this.focusable?this.container.tabIndex=-1:this.container.dataset.ignore="all";for(let t=0;t<e.length;t++){let i=On.call(this,e[t]);this.elements.push(i),n.appendChild(i)}return li.call(this,this.container,t),n.hasChildNodes()&&(this.container.appendChild(n),this.bindEvents()),this.refresh(),this.container},openMenu(){if(!C(this.menu)){this.menu=q({class:["layout-menu"]});let e=In.call(this),t=Rn.call(this);this.menu.append(e,t),this.btnEdit.after(this.menu)}this.menu.prepend(this.btnEdit),this.menu.classList.add("open")},closeMenu(){C(this.menu)&&(this.menu.classList.remove("open"),setTimeout((()=>{this.menu.before(this.btnEdit)}),200))},refresh(){return this},bindEvents(){}};function In(){var e=K({type:"radio",class:["stack-orientation__input"],name:`${this.id}orientation`,value:"vertical",checked:"vertical"===this.orientation,dataset:{prop:"orientation"}}),t=K({type:"radio",class:["stack-orientation__input"],name:`${this.id}orientation`,value:"horizontal",checked:"horizontal"===this.orientation,dataset:{prop:"orientation"}}),i=Z({class:["stack-orientation"]},[e,"Vertical"]),n=Z({class:["stack-orientation"]},[t,"Horizontal"]);return q({class:["radio-group"]},[i,n])}function Rn(){return q({class:["style-container"]})}var $n=0;const Bn=()=>"layout"+$n++,qn={stack:(e,t,i)=>Object.create(Vn,{object:{value:"layout"},name:{value:"stack-layout"},type:{value:"stack"},id:{value:Bn()},model:{value:e},schema:{value:t},projection:{value:i}}),wrap:(e,t,i)=>Object.create(Nn,{object:{value:"layout"},name:{value:"wrap-layout"},type:{value:"wrap"},id:{value:Bn()},model:{value:e},schema:{value:t},projection:{value:i}})},Dn={createLayout(e,t,i){const{type:n}=t,s=qn[n];if(y(s))throw new TypeError(`Missing handler: The '${n}' layout could not be handled`);const a=s(e,t,i);if(a.createLayout=this.createLayout,y(a))throw new Error(`Bad request: The '${n}' layout could not be created`);return y(a.id)&&(a.id=Bn()),a}};var Hn=0;const Fn={createProjection(e,t,i,n){var s=Object.create(Un,{id:{value:a(t.id,"projection"+Hn++)},model:{value:e},schema:{value:t,writable:!0},environment:{value:n}});return s.concept=i,s}},Un={init(e){return this.containers=[],this.attributes=[],this.components=[],e&&(this.concept=e),this.concept.register(this),this},schema:null,concept:null,environment:null,parent:null,containers:null,element:null,attributes:null,components:null,index:0,get hasMultipleViews(){return this.schema.length>1},get isReadOnly(){return a(this.getSchema().readonly,!1)},getSchema(){return this.schema[this.index]},getStyle(){const{style:e}=this.getSchema();return e},remove(){return this.container.parentElement,we(this.container),C(this.container),this.concept.unregister(this),!0},update(e,t){if(o(this.containers))return;if("delete"===e)return this.concept.unregister(this),this.concept=null,this.containers.forEach((e=>{we(e),e.remove()})),void this.model.removeProjection(this.id);if(!/attribute.(added|removed)/gi.test(e))return void console.warn(`Projection does not support message ${e}`);const[i,n]=e.split(".");var s=null;if("attribute"===i&&(s=this.attributes.filter((e=>e.name===t.name))),o(s))return void console.warn(`${i} not found in projection`);const a="attribute"===i?t.target:t;switch(n){case"added":s.forEach((e=>{const{schema:t,name:i}=e,n=this.model.createProjection(a,t.tag).init();n.parent=this,n.optional=!0;const s=n.render();li(s,t.style),e.element=s,e.optional.after(s),Pe(e.optional)}));break;case"removed":s.forEach((e=>{e.element=null,Ve(e.optional)}))}},render(){const e=this.getSchema(),{type:t,projection:i}=e;var n=null;if("layout"===t?this.element=Dn.createLayout(this.model,i,this).init():"field"===t&&(this.element=hn.createField(this.model,i,this).init(),this.environment.registerField(this.element)),n=this.element.render(),!x(n))throw new Error("Projection element container could not be created");if(Object.assign(n.dataset,{projection:this.id,object:this.concept.object,alt:this.schema.length}),this.optional){let e=ne({class:["btn","structure__btn-delete"],title:`Delete ${this.concept.ref.name.toLowerCase()}`});e.addEventListener("click",(e=>{this.concept.delete()})),n.classList.add("has-toolbar"),n.prepend(e)}if(this.hasMultipleViews){let e=Y({class:["badge","badge--alt"]});n.prepend(e)}return this.containers.push(n),n},changeView(e){if(!(this.schema.length<2)){var t=this.containers[this.index];this.index=a(e,(this.index+1)%this.schema.length);var i=this.containers[this.index];return i||(i=this.render()),t.replaceWith(i),i.focus(),this}this.environment.notify("There is no alternative projection for this concept")},bindEvents(){this.schema.length>1&&(C(this.btnPrev)||(this.btnPrev=ne({type:"button",class:["btn","btn-projection","btn-projection--previous","hidden"],disabled:this.index<=0,dataset:{context:"projection",action:"previous"}},"Previous Projection")),C(this.btnNext)||(this.btnNext=ne({type:"button",class:["btn","btn-projection","btn-projection--next","hidden"],disabled:this.index>=this.schema.length-1,dataset:{context:"projection",action:"next"}},"Next Projection")),this.container.addEventListener("click",(e=>{var t=e.target,i=this.container;Pe(i),t===this.btnPrev?(this.index-=1,function(e,t){if(!j([e,t],E))throw new TypeError("Bad argument: The given `element` or `target` is not a valid Element");e.insertAdjacentElement("beforebegin",t)}(i,this.render())):t===this.btnNext&&(this.index+=1,function(e,t){if(!j([e,t],E))throw new TypeError("Bad argument: The given `element` or `target` is not a valid Element");e.insertAdjacentElement("afterend",t)}(i,this.render())),Ve(this.container),this.btnPrev.disabled=this.index<=0,this.btnNext.disabled=this.index>=this.schema.length-1})),this.container.append(this.btnNext,this.btnPrev))}},zn=[];function Wn(e,t){var i=Object.create(Gn,{schema:{value:e},environment:{value:t}});return zn.push(i),i}const Gn={projections:null,init(){return this.projections=[],this},createProjection(e,t){const i=this.getModelProjection(e,t);o(i)&&console.warn(e,i,t);var n=Fn.createProjection(this,i,e,this.environment);return this.addProjection(n),n},createProjectionX(e,t,i){var n=Fn.createProjection(this,t,e,this.environment);return this.addProjection(n),n},createGlobalProjection(e){const t=this.getGlobalModelProjection(e);o(t)&&console.warn(e,t);var i=Fn.createProjection(this,t,e,this.environment);return this.addProjection(i),i},getProjection(e){return Number.isInteger(e)?this.projections[e]:this.projections.find((t=>t.id===e))},addProjection(e){if(y(e))throw new TypeError("Bad request: The 'projection' argument must be a Projection");return this.projections.push(e),this},removeProjection(e){var t=this.projections.findIndex((t=>t.id===e));return-1!==t&&(this.projections.splice(t,1),!0)},hasProjection(e){return-1!==this.schema.findIndex((t=>t.name===e))},hasConceptProjection(e,t){const i=t=>t.concept.name===e.name;return y(t)?-1!==this.schema.findIndex((e=>i(e))):-1!==this.schema.findIndex((e=>i(e)&&(e=>Array.isArray(e.tags)&&e.tags.includes(t))(e)))},hasGlobalProjection(e){return-1!==this.schema.findIndex((t=>t.concept.name===e.name&&t.global))},getModelProjection(e,t){var i=null;return r(e)?i=this.schema.filter((t=>t.concept.name===e)):e.name&&(i=this.schema.filter((t=>t.concept.name===e.name))),h(t)&&!o(t)&&(i=i.filter((e=>e.tags&&e.tags.includes(t)))),i},getGlobalModelProjection(e){var t=null;return r(e)?t=this.schema.filter((t=>t.concept.name===e)):e.name&&(t=this.schema.filter((t=>t.concept.name===e.name))),t.filter((e=>e.global))},getModelProjectionTemplate(e,t,i){var n=this.getModelProjection(e,i);return Array.isArray(n)?(n=n.filter((e=>"template"===e.type&&e.template===t)))[0]:[]},getModelProjectionLayout(e,t,i){var n=this.getModelProjection(e,i);return Array.isArray(n)?n=n.filter((e=>"layout"===e.type)).find((e=>e.name===t)):[]},getModelProjectionField(e,t,i){return this.schema.filter((t=>t.concept===e)).filter((e=>"field"===e.type)).find((e=>e.name===t))}},Jn={projection:null,container:null,content:null,btnChange:null,btnSearch:null,init(e){return e&&(this.editor=e),this},setProjection(e){this.projection!==e&&(this.projection=e),this.refresh()},refresh(){return y(this.projection)?(this.content.textContent="N/A",this.btnChange.disabled=!0,void(this.btnSearch.disabled=!0)):(this.content.textContent=this.projection.id,this.btnChange.disabled=!this.projection.hasMultipleViews,this)},clear(){return we(this.content),this},show(){return this},hide(){return Pe(this.container),this},render(){const e=I();C(this.container)||(this.container=q({class:["projection-window","hidden"],draggable:!0,title:"Click to handle projection"}));const t=J({class:["projection-window-title"],dataset:{ignore:"all"}},"Projection");return e.appendChild(t),C(this.content)||(this.content=q({class:["projection-window-content"]}),e.appendChild(this.content)),this.btnChange=ne({class:["btn","projection-window-button","projection-window-button-change"],dataset:{context:"projection",action:"change"}},"Change"),e.appendChild(this.btnChange),this.btnSearch=ne({class:["btn","projection-window-button","projection-window-button-search"],dataset:{context:"projection",action:"search"}},"Search"),e.appendChild(this.btnSearch),e.hasChildNodes()&&(this.container.appendChild(e),this.bindEvents()),this.refresh(),this.container},bindEvents(){this.container.addEventListener("click",(e=>{var t=We(e.target);const{action:i}=t.dataset;"change"===i?this.projection.changeView():"search"===i||"style"===i&&this.openStyle()}))}},Xn={createWidthControl(){const e=q({class:["control-wrapper","control-wrapper--width"]}),t=Z({class:["style-label"]},"Width"),i=Y({class:["material-icons"]},"height"),n=q({class:["input-wrapper"]}),s=K({class:["style-input","style-input--range"],type:"range",min:0,max:100,step:1}),a=K({class:["style-input","style-input--number"],type:"number",min:0,max:100});return n.append(s,a),e.append(t,i,n),e.addEventListener("input",(e=>{const{target:t}=e;this.container.style.width=`calc(300px + ${t.value}%)`,a.value=t.value,s.value=t.value})),e.addEventListener("focusin",(e=>{this.container.style.border="1px solid blue"})),e.addEventListener("focusout",(e=>{this.container.style.border=null})),e},createSizeControl(){const e=q({class:["control-wrapper","control-wrapper--size"]}),t=Z({class:["style-label"]},"Size"),i=Y({class:["material-icons"]},"format_size"),n=q({class:["input-wrapper"]}),s=K({class:["style-input","style-input--range"],type:"range",min:0,max:50,step:1}),a=K({class:["style-input","style-input--number"],type:"number",min:0,max:50});return n.append(s,a),e.append(t,i,n),e.addEventListener("input",(e=>{const{target:t}=e;this.container.style.fontSize=`${t.value}px`,a.value=t.value,s.value=t.value})),e.addEventListener("focusin",(e=>{this.container.style.border="1px solid blue"})),e.addEventListener("focusout",(e=>{this.container.style.border=null})),e},createSpaceControl(){const e=q({class:["control-wrapper","control-wrapper--space"]}),t=Z({class:["style-label"]},"Space"),i=Y({class:["material-icons"]},"format_size"),n=q({class:["input-wrapper"]}),s=K({class:["style-input","style-input--range"],type:"range",min:0,max:50,step:1}),a=K({class:["style-input","style-input--number"],type:"number",min:0,max:50});return n.append(s,a),e.append(t,i,n),e.addEventListener("input",(e=>{const{target:t}=e;this.container.style.fontSize=`${t.value}px`,a.value=t.value,s.value=t.value})),e.addEventListener("focusin",(e=>{this.container.style.border="1px solid blue"})),e.addEventListener("focusout",(e=>{this.container.style.border=null})),e}};function Yn(e){const t=q({class:["menu"],draggable:!0,title:"Click to access the import, export and build actions"}),i=J({class:["menu-title"],dataset:{ignore:"all"}},"Menu"),n=ne({class:["btn","btn-export"],dataset:{context:"model",action:"export"}},"Export"),s=ne({class:["btn","btn-import"],dataset:{context:"model",action:"import"}},"Import"),a=ne({class:["btn","btn-build"],dataset:{context:"model",action:"build"}},"Build");return t.append(i,n,s,a),t.addEventListener("click",(e=>{t.classList.toggle("open")})),t}const Kn={editor:null,container:null,title:null,selectorList:null,selectorItem:null,selectorValue:null,menu:null,body:null,init(e){return e&&(this.editor=e),this},render(){const e=I();C(this.container)||(this.container=q({class:["editor-header"]})),C(this.title)||(this.title=J({class:["editor-header-title"]},"Editor")),this.selectorList=F({class:["bare-list","editor-selector"]},["model","concept"].map((e=>U({class:["editor-selector-item"],tabindex:0,dataset:{value:e,action:`selector-${e}`}},e)))),this.selectorItem=this.selectorList.children[0],this.selectorItem.classList.add("selected"),this.selectorValue=this.selectorItem.dataset.value;let t=ne({class:["btn","btn-close"],dataset:{action:"close"}}),i=ne({class:["btn","btn-style","hidden"],dataset:{action:"style"}}),n=q({class:["editor-toolbar"]},[i,t]);return C(this.menu)||(this.menu=q({class:["editor-header-menu"]},[this.title,this.selectorList,n]),e.append(this.menu)),C(this.body)||(this.body=q({class:["editor-header-main"]}),e.append(this.body)),e.hasChildNodes()&&(this.container.appendChild(e),this.bindEvents()),this.refresh(),this.container},refresh(){b(this.editor.config,"name")&&(this.title.textContent=`Editor: ${this.editor.config.name}`)},show(){Ve(this.container)},hide(){Pe(this.container)},bindEvents(){}};function Qn(){return Object.create(Kn,{object:{value:"environment"},name:{value:"editor-header"},editor:{value:this}})}function Zn(){return Object.create(Jn,{object:{value:"environment"},name:{value:"projection-window"},type:{value:"window"},editor:{value:this}})}const es=i(12),ts=i(26),is={_initialized:!1,conceptModel:null,concept:null,projectionModel:null,projection:null,container:null,header:null,body:null,home:null,footer:null,projectionWindow:null,selectorList:null,selectorItem:null,selectorValue:null,fields:null,activeField:null,activeElement:null,activeProjection:null,activeConcept:null,menu:null,btnPrint:null,input:null,buildTarget:null,config:null,active:!1,init(e,t){return e&&(this.conceptModel=ri.createModel(e).init()),t&&(this.projectionModel=Wn(t,this).init()),this.fields=new Map,this.config={},this.config&&(this.header=Qn.call(this).init()),this.projectionWindow=Zn.call(this).init(),this.render(),this._initialized=!0,this},changeModel(e){const{concept:t,projection:i,values:n,editor:s}=e;t&&(this.conceptModel=ri.createModel(t,i).init(n)),i&&(this.projectionModel=Wn(i,this).init()),s&&(this.config=s,this.buildTarget=s.build),this.manager.refresh(),this.clear().refresh()},registerField(e){return e.environment=this,this.fields.set(e.id,e),this},unregisterField(e){var t=this.fields.get(e.id);return t&&(t.editor=null,this.fields.delete(t.id)),this},getField(e){if(!C(e))return console.warn("Field error: Bad argument"),null;const{id:t,nature:i}=e.dataset;return y(t)?(console.warn("Field error: Missing id attribute on field"),null):["field","field-component"].includes(i)?this.fields.get(t):(console.warn("Field error: Unknown nature attribute on field"),null)},undo(){return this.state.undo(),this.setState(g(this.state.current)),Ue.emit("editor.undo",this.state.hasUndo),this},redo(){return this.state.redo(),this.setState(g(this.state.current)),Ue.emit("editor.redo",this.state.hasRedo),this},save(){return this.state.set(this.concrete),Ue.emit("editor.save"),this},print(){const e="application/json";window.URL=window.webkitURL||window.URL,u(this.btnPrint.href)||window.URL.revokeObjectURL(this.btnPrint.href);var t=new Blob([JSON.stringify(this.conceptModel)],{type:e});Object.assign(this.btnPrint,{download:`model_${this.conceptModel.language}_${Date.now()}.json`,href:window.URL.createObjectURL(t)}),this.btnPrint.dataset.downloadurl=[e,this.btnPrint.download,this.btnPrint.href].join(":"),this.btnPrint.disabled=!0,setTimeout((()=>{window.URL.revokeObjectURL(this.btnPrint.href),this.btnPrint.disabled=!1}),1500)},build(e=!1){const t="application/json";window.URL=window.webkitURL||window.URL;var i=z({});this.container.appendChild(i),u(i.href)||window.URL.revokeObjectURL(i.href);var n=null;if("gentleman_concept"===this.buildTarget)try{n=this.conceptModel.buildConcept()}catch(e){return console.error(e),void this.notify("The model is not valid. Please review before the next build.","error")}else if("gentleman_projection"===this.buildTarget)try{n=this.conceptModel.buildProjection()}catch(e){return console.error(e),void this.notify("The projection are not valid. Please review before the next build.","error")}var s=new Blob([n],{type:t});return Object.assign(i,{download:"model.json",href:window.URL.createObjectURL(s)}),this.notify("The model has been successfully built. Please download the model."),i.dataset.downloadurl=[t,i.download,i.href].join(":"),e&&i.click(),setTimeout((()=>{window.URL.revokeObjectURL(i.href),i.remove()}),1500),JSON.parse(n)},export(e=!1){const t="application/json";window.URL=window.webkitURL||window.URL;var i=z({});this.container.appendChild(i),u(i.href)||window.URL.revokeObjectURL(i.href);const n={concept:this.conceptModel.schema,projection:this.projectionModel.schema,values:this.conceptModel.export()};var s=new Blob([JSON.stringify(n)],{type:t});return Object.assign(i,{download:"model.json",href:window.URL.createObjectURL(s)}),i.dataset.downloadurl=[t,i.download,i.href].join(":"),e?(function(e){if(y(e))return!1;var t=Q({value:C(e)?e.textContent:e.toString(),readonly:!0});C(t)&&(document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove())}(JSON.stringify(n)),this.notify("Export has been copied to clipboard")):(i.click(),this.notify("The model has been successfully built. Please download the model.")),setTimeout((()=>{window.URL.revokeObjectURL(i.href),i.remove()}),1500),n},open(){return Ve(this.container),this.active=!0,this.container.classList.replace("close","open"),Ue.emit("editor.open"),this},close(){return Pe(this.container),this.active=!1,this.container.classList.replace("open","close"),we(this.container),this.container.remove(),Ue.emit("editor.close"),this},clear(){return this.fields.clear(),this.conceptSection&&we(this.conceptSection),this.home&&(we(this.home),Pe(this.home)),this.activeField=null,this.activeElement=null,this.activeConcept=null,Ue.emit("editor.clear"),this},openStyle(){const e=q({class:["style-container"]}),t=Xn.createWidthControl.call(this),i=Xn.createSizeControl.call(this);e.append(t,i),this.container.after(e)},notify(e,t){var i=me(".notify:not(.open)",this.container);C(i)||(i=D({class:["notify"]}),this.container.appendChild(i)),i.textContent=e,i.classList.remove("error"),t&&i.classList.add(t),i.classList.add("open"),setTimeout((()=>{i.classList.remove("open")}),3e3)},display(e,t){var i=me(".dialog:not(.open)",this.container);C(i)||(i=q({class:["dialog-container"]}),this.container.appendChild(i)),we(i),i.appendChild(D({class:["dialog-content"]},e)),i.classList.add("open")},render(e){const t=I();return C(this.header.container)||t.appendChild(this.header.render()),C(this.body)||(this.body=q({class:["editor-body"],tabindex:0}),this.conceptSection=$({class:["model-concept-section"]}),this.body.appendChild(this.conceptSection),t.appendChild(this.body)),C(this.footer)||(this.footer=q({class:["editor-footer"],tabindex:0}),t.appendChild(this.footer)),C(this.projectionWindow.container)||t.appendChild(this.projectionWindow.render()),C(this.menu)||(this.menu=Yn.call(this),t.appendChild(this.menu)),C(this.input)||(this.input=K({type:"file",class:["hidden"],accept:".json"}),t.appendChild(this.input)),t.hasChildNodes()&&(this.container.appendChild(t),this.bindEvents()),C(e)&&e.appendChild(this.container),this.refresh(),this.container},refresh(){if(y(this.conceptModel))return this.header.hide(),this.container.classList.add("empty"),this.home=function(){const e=$({class:["editor-home"]}),t=R({class:["menu-header"]});var i=B({class:["editor-home__title"]},"Editor"),n=D({class:["menu-content"],html:"Welcome to Gentleman's editor.<br>To begin, please load a model or continue with a previous instance."});t.append(i,n);const s=q({class:["loader-container"],tabindex:-1});var a=q({class:["loader-options"]}),o=B({class:["loader-options-title"]},"Concept"),r=D({class:["loader-options-content"],html:"Create or edit a model."}),c=q({class:["loader-options-action"]}),l=ne({class:["btn","loader-option","loader-option--new"],dataset:{action:"create-metamodel"}},[J({class:["loader-option__action"],dataset:{ignore:"all"}},"New"),J({class:["loader-option__type"],dataset:{ignore:"all"}},"metamodel")]),h=ne({class:["btn","loader-option","loader-option--open"],dataset:{action:"open-model"}},[J({class:["loader-option__action"],dataset:{ignore:"all"}},"Open"),J({class:["loader-option__type"],dataset:{ignore:"all"}},"model")]);c.append(l,h),a.append(o,r,c);var p=q({class:["loader-options"]}),d=B({class:["loader-options-title"]},"Projection"),u=D({class:["loader-options-content"],html:"Create or edit a projection."}),m=q({class:["loader-options-action"]}),y=ne({class:["btn","loader-option","loader-option--new"],dataset:{action:"create-projection"}},[J({class:["loader-option__action"],dataset:{ignore:"all"}},"New"),J({class:["loader-option__type"],dataset:{ignore:"all"}},"projection")]),f=ne({class:["btn","loader-option","loader-option--open"],dataset:{action:"open-projection"}},[J({class:["loader-option__action"],dataset:{ignore:"all"}},"Open"),J({class:["loader-option__type"],dataset:{ignore:"all"}},"projection")]);return m.append(y,f),p.append(d,u,m),s.append(a,p),e.append(t,s),e}(),Ve(this.home),Pe(this.menu),this.body.append(this.home),void(this._initialized=!1);Ve(this.menu),this.header.show(),this.projectionWindow.show(),this.container.classList.remove("empty");var e=F({class:["bare-list","selector-model-concepts","font-ui"]});return this.conceptModel.schema.filter((e=>this.projectionModel.hasGlobalProjection(e))).forEach((t=>{var i=U({class:["selector-model-concept","font-ui"],title:t.description,dataset:{concept:t.name}},t.name);e.appendChild(i),this._initialized||this.conceptModel.getConcepts(t.name).forEach((e=>{let t=this.projectionModel.createGlobalProjection(e).init(),i=ne({class:["btn","model-concept-list-item__btn-delete"]},`Delete ${name.toLowerCase()}`);var n=q({class:["model-concept-list-item"]},[i,t.render()]);i.addEventListener("click",(t=>{e.delete(!0)&&(we(n),n.remove())})),this.conceptSection.appendChild(n)}))})),this._initialized=!0,e.addEventListener("click",(e=>{const{target:t}=e;if(b(t.dataset,"concept")){const{concept:e}=t.dataset;let n=this.conceptModel.createConcept({name:e}),s=this.projectionModel.createGlobalProjection(n).init(),a=ne({class:["btn","editor-concept-toolbar__btn-build"],title:`Build ${e.toLowerCase()}`}),o=ne({class:["btn","editor-concept-toolbar__btn-delete"],title:`Delete ${e.toLowerCase()}`}),r=ne({class:["btn","editor-concept-toolbar__btn-maximize"],title:`Maximize ${e.toLowerCase()}`}),c=q({class:["editor-concept-toolbar"]},[a,r,o]);var i=q({class:["editor-concept"],draggable:!0,dataset:{nature:"concept-container"}},[c,s.render()]);a.addEventListener("click",(e=>{if("gentleman_concept"===this.buildTarget)try{const e=this.conceptModel.buildSingleConcept(n);if(e.success){const t=JSON.parse(e.message);console.log(`%c Concept '${t.name}' is valid`,"padding: 4px 6px; color: #fff; font-weight: bold; background: #00AB66;"),console.log(t),this.notify("The concept is valid.")}else console.log("%c Concept is not valid","padding: 4px 6px; color: #fff; font-weight: bold; background: #DC143C;"),e.errors.forEach((e=>console.error(e))),this.notify("The concept is not valid.","error")}catch(e){console.error(e),this.notify("The model is not valid. Please review before the next build.","error")}else if("gentleman_projection"===this.buildTarget)try{const e=this.conceptModel.buildSingleProjection(n);if(e.success){const t=e.message;console.log(`%c Projection '${t.name}' is valid`,"padding: 4px 6px; color: #fff; font-weight: bold; background: #00AB66;"),console.log(t),this.notify("The projection is valid.")}else console.log("%c Projection is not valid","padding: 4px 6px; color: #fff; font-weight: bold; background: #DC143C;"),e.errors.forEach((e=>console.error(e))),this.notify("The projection is not valid.","error")}catch(e){return console.error(e),void this.notify("The projection is not valid. Please review before the next build.","error")}})),o.addEventListener("click",(e=>{n.delete(!0)&&(we(i),i.remove())})),r.addEventListener("click",(e=>{i.classList.toggle("focus")})),this.conceptSection.appendChild(i)}})),we(this.header.body).appendChild(e),this},updateActiveElement(e){var t,i,n;this.activeElement&&this.activeElement!==e&&(this.activeElement.classList.remove("active"),Array.from((t=".active-parent",n=a(i,document),u(t)?null:T(n)?n.querySelectorAll(t):ue(t)?n.getElementsByClassName(t.substring(1)):n.querySelectorAll(t))).forEach((e=>e.classList.remove("active-parent")))),this.activeElement=e,this.activeElement.classList.add("active");for(var s=this.activeElement.parentElement;s;){const{nature:e,view:t}=s.dataset;b(s.dataset,"projection")&&s.classList.add("active-parent"),"field-component"===e&&s.classList.add("active-parent"),"concept-container"===e&&s.classList.add("active-parent"),s=s.parentElement}return this.projectionWindow.setProjection(this.projectionModel.getProjection(e.dataset.projection)),this},updateActiveConcept(e){return this.activeConcept=e,this.refresh(),this},updateSelector(e){const{value:t}=e.dataset;this.selectorValue!==t&&e.parentElement===this.selectorList&&(this.selectorItem.classList.remove("selected"),this.selectorValue=t,this.selectorItem=e,this.selectorItem.classList.add("selected"),this.refresh())},bindEvents(){var e=null,t=null;function i(e){return b(e.dataset,"projection")?e:ge(e,(e=>b(e.dataset,"projection")))}this.container.addEventListener("click",(e=>{var i=We(e.target);const{action:n}=i.dataset;if(this.activeField&&this.activeField.clickHandler(i),"close"===n)this.close(),this.manager.deleteEditor(this),i.blur();else if("new"===n)this.manager.createEditor().init().open(),i.blur();else if("style"===n)this.openStyle(),i.blur();else if("import"===n){let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t=this.changeModel,this.input.dispatchEvent(e)}else if("export"===n)this.export();else if("build"===n)this.build(!0);else if("open-model"===n){let e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t=this.changeModel,this.input.dispatchEvent(e)}else"create-metamodel"===n?this.changeModel(es):"create-projection"===n?this.changeModel(ts):("selector-model"===n||"selector-concept"===n||"selector-projection"===n)&&(this.updateSelector(i),e.preventDefault())}),!0),this.input.addEventListener("change",(e=>{var i=this.input.files[0];i.name.endsWith(".json")||this.notify("This file is not supported. Please use a .json file");var n=new FileReader;n.onload=e=>{t.call(this,JSON.parse(n.result)),t=null},n.readAsText(i)})),this.body.addEventListener("keydown",(t=>{const{target:n}=t;var s=i(n),a=!1;switch(t.key){case Ne:this.activeField&&this.activeField.backspaceHandler(n);break;case Re:t.preventDefault(),a=!0;break;case He:break;case"Alt":if(t.preventDefault(),s){const{projection:e}=s.dataset;this.projectionModel.getProjection(e).changeView()}a=!0;break;case Ie:this.activeField?this.activeField.enterHandler(n):t.preventDefault();break;case Be:this.activeField&&(this.activeField.arrowHandler("up",n),t.preventDefault());break;case De:this.activeField&&(this.activeField.arrowHandler("down",n),t.preventDefault());break;case qe:this.activeField&&(this.activeField.arrowHandler("right",n),t.preventDefault());break;case"ArrowLeft":this.activeField&&(this.activeField.arrowHandler("left",n),t.preventDefault());break;case $e:this.activeField&&this.activeField.escapeHandler(n);break;case"Tab":break;case"b":e===Re&&(this.manager.createBuilder().init(this.conceptModel,this.activeConcept).open(),t.preventDefault());break;case"e":e===Re&&(this.manager.createExplorer().init(this.conceptModel,this.activeConcept).open(),t.preventDefault());break;case"i":e===Re&&(this.manager.createEditor().init(this.conceptModel,this.activeConcept).open(),t.preventDefault());break;case"g":case"q":case"p":case"s":case"z":e==Re&&t.preventDefault()}a&&(e=t.key)}),!1),this.body.addEventListener("keyup",(t=>{var i=t.target;const{nature:n}=i.dataset;switch(t.key){case" ":e===Re&&this.activeField&&this.activeField.spaceHandler(i);break;case He:e===Re&&this.activeField&&this.activeField.delete(i);break;case Re:e===Re&&this.activeField&&this.activeField.controlHandler(i)}e=-1}),!1),this.body.addEventListener("focusin",(e=>{const t=e.target,{nature:s}=t.dataset;var a=n[s];a?a.call(this,t):(this.activeField&&this.activeField.focusOut(),this.activeField=null);let o=i(t);o&&this.updateActiveElement(o)}));const n={field:s,"field-component":s};function s(e){const t=this.getField(e);this.activeField&&this.activeField!==t&&(this.activeField.focusOut(),this.activeField=null),y(t)||(this.activeField=t,this.activeField.focusIn(),this.activeField.source.getParent()&&this.updateActiveConcept(this.activeField.source))}var a=null;this.container.addEventListener("dragstart",(e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("clientX",e.clientX),e.dataTransfer.setData("clientY",e.clientY),a=e.target,this.body.classList.add("dragging")})),this.container.addEventListener("dragend",(e=>{this.body.classList.remove("dragging"),a=null})),this.body.addEventListener("drop",(e=>{var t=e.dataTransfer.getData("clientX"),i=e.dataTransfer.getData("clientY");a.style.top=a.offsetTop-(i-e.clientY)+"px",a.style.left=a.offsetLeft-(t-e.clientX)+"px"})),this.body.addEventListener("dragover",(e=>{e.preventDefault()})),Ue.on("model.change",(e=>{this.save()}))}};function ns(){return this.model.concepts.filter((e=>this.metamodel.isConcrete(e.name)))}const ss={metamodel:null,model:null,concept:null,container:null,header:null,body:null,footer:null,selectorElement:null,selectorList:null,input:null,results:null,active:!1,fields:null,init(e,t,i){return this.metamodel=e,this.model=t,this.concept=i,this.fields=new Map,this.render(),this},registerField(e){return e.editor=this,this.fields.set(e.id,e),this},unregisterField(e){var t=this.fields.get(e.id);return t&&(t.editor=null,this.fields.delete(t.id)),this},open(){return this.active=!0,Ve(this.container),this.container.classList.replace("close","open"),this.input.focus(),Ue.emit("explorer.open"),this},close(){return this.active=!1,Pe(this.container),this.container.classList.replace("open","close"),Ue.emit("explorer.close"),this},clear(){return we(this.results),this.input.value="",this},render(e){const t=I();if(!C(this.header)){this.header=q({class:["explorer-header"],tabindex:-1});let e=ne({class:["btn","btn-close"],dataset:{action:"close"}}),i=q({class:["explorer-toolbar"]},[e]);this.header.appendChild(i);const{refname:n,name:s}=this.activeConcept;this.concept&&this.header.appendChild(q({class:["explorer-header-concept"]},`${n} (${s})`)),t.appendChild(this.header)}return C(this.body)||(this.body=q({class:["explorer-body"],tabindex:-1}),t.appendChild(this.body)),C(this.footer)||(this.footer=q({class:["editor-footer"],tabindex:-1}),t.appendChild(this.footer)),C(this.selectorElement)||(this.selectorElement=ne({class:["btn","explorer-header-concept","hidden"]}),this.header.appendChild(this.selectorElement)),C(this.selectorList)||(this.selectorList=F({class:["bare-list","explorer-selector-list","hidden"]}),t.appendChild(this.selectorList)),C(this.input)||(this.input=K({class:["explorer-input","hidden"],placeholder:"Rechercher..."}),t.appendChild(this.input)),C(this.results)||(this.results=F({class:["bare-list","explorer-results"]}),this.body.appendChild(this.results)),t.hasChildNodes()&&(this.container.appendChild(t),this.bindEvents()),C(e)&&e.appendChild(this.container),this.clear(),this.refresh(),this.container},update(e){const t=I();return t.appendChild(U({class:["explorer-result-title"]},"Attribute")),e.filter((e=>"attribute"===e.type)).forEach((e=>{var i=`${e.target}${e.accept?`:${e.accept}`:""}`;t.appendChild(as(e,"Target concept",i))})),t.appendChild(U({class:["explorer-result-title"]},"Component")),e.filter((e=>"component"===e.type)).forEach((e=>{var i=e.attributes.join(", ");t.appendChild(as(e,"Attributes",i))})),we(this.results),this.results.appendChild(t),this},refresh(){return y(this.concept)?(we(this.selectorList),ns.call(this).forEach((e=>{var t=this.metamodel.getProjectionSchema(e.name).filter((e=>"explorer"===e.environment)),i=Fn.createProjection(t,e,this).init(),n=U({class:["explorer-selector","explorer-selector--concept"],dataset:{concept:e.id}},i.render());this.selectorList.appendChild(n)})),Ve(this.selectorList),Pe(this.results),Pe(this.selectorElement)):(Ve(this.selectorElement),Pe(this.selectorList),Ve(this.results),this.update(this.concept.getStructure())),this},query(e){var t=this.concept.getStructure().slice(0);if(!u(e)){var i=e.trim().replace(/\s+/g," ").split(" ");t=t.filter((e=>i.some((t=>{let i=!1;return e.alias&&(i=e.alias.includes(t)),i||e.name.includes(t)}))))}return this.update(t),this},bindEvents(){var e=0;this.container.addEventListener("keydown",(t=>{var i=!1;switch(t.key){case Ne:break;case Re:t.preventDefault(),i=!0;break;case He:break;case"Alt":i=!0;break;case Ie:case qe:break;case Be:e>0&&(e--,this.results.children[e].focus());break;case De:e<this.results.childElementCount&&(this.results.children[e].focus(),e++);break;case $e:i=!1,this.close()}i&&t.key}),!1),this.container.addEventListener("click",(e=>{"close"===e.target.dataset.action&&this.close()})),this.results.addEventListener("change",(e=>{let t=e.target,[i,n]=t.value.split(":");"attribute"===n?this.concept.createAttribute(i):"component"===n&&this.concept.createComponent(i),t.disabled=!0})),this.input.addEventListener("input",(t=>{this.query(this.input.value.trim()),e=0})),this.input.addEventListener("blur",(e=>{u(this.input.value)&&(this.input.value="")}));const t=e=>e.parentElement===this.selectorList?e:ge(e,(e=>e.parentElement===this.selectorList));this.selectorList.addEventListener("click",(e=>{const{target:i}=e,n=t(i),{concept:s}=n.dataset;if(s){let e=this.model.getConcept(s);this.concept=e,this.selectorElement.textContent=e.fullName,this.clear(),this.refresh()}})),this.selectorElement.addEventListener("click",(e=>{Ve(this.selectorList)}))}};function as(e,t,i){const{name:n,alias:s,type:o,created:r,required:c}=e,l=K({type:"checkbox",class:["explorer-result-item__checkbox"],value:`${n}:${o}`,disabled:!0});l.id=`${v(n)}${v(o)}`,l.checked=r,l.required=c;const h=J({class:["explorer-result-item__label-name"]},a(s,n)),p=J({class:["explorer-result-item__label-info"]},[`${t}: `,X({class:["concept-name"]},`${i}`)]),d=Z({class:["explorer-result-item__label"]},[h,p]);d.htmlFor=l.id;var u=ne({type:"button",class:["btn","btn-add","explorer-result-item__button"],disabled:r,dataset:{action:"add"}},"+"),m=ne({type:"button",class:["btn","btn-remove","explorer-result-item__button"],disabled:c,dataset:{action:"remove"}},"-"),y=U({class:["explorer-result-item"],dataset:{value:n,required:c}},[l,d,u,m]);return y.tabIndex=-1,y}const os="editor",rs="explorer",cs=[];var ls=0;const hs=()=>"GE"+ls++;function ps(e){return q({class:["env",`${e}-container`,"close"],tabindex:-1})}({container:null,homeContainer:null,menu:null,homePage:null,btnBuild:null,btnNew:null,get editors(){return cs.filter((e=>e.type===os))},get explorers(){return cs.filter((e=>e.type===rs))},get hasEnvironment(){return!o(cs)},get hasEditor(){return cs.some((e=>e.type===os))},get hasExplorer(){return cs.some((e=>e.type===rs))},init(e){const t=function(e){return C(e)?e:u(e)?me("[data-gentleman]"):me(e)}(e);if(!C(t))throw new TypeError("Bad argument: The container argument could not be resolved to an HTML Element.");return this.container=t,this.container.tabIndex=-1,this.bindDOM(),this.bindEvents(),this},render(){const e=I();return y(this.menu.parentElement)&&e.append(this.menu),y(this.btnBuild.parentElement)&&this.menu.append(this.btnNew,this.btnBuild),e.hasChildNodes()&&this.container.appendChild(e),this.refresh(),this.container},refresh(){if(!this.hasEnvironment)return this.createEditor().init().open(),this;let e=!1,t=!1;for(let i=0;i<this.editors.length;i++){const n=this.editors[i];"gentleman_concept"===n.buildTarget&&(e=!0),"gentleman_projection"===n.buildTarget&&(t=!0)}return this.btnBuild.disabled=!(e&&t),this},getEditors(e){const t=this.editors;return c(e)?this.editors.filter((t=>e(t))):t.filter((e=>!e.active))},getEditor(e){return e?cs((t=>t.id===e)):this.editors.find((e=>!e.active))},createEditor(e){var t=Object.create(is,{object:{value:"environment"},type:{value:"editor"},name:{value:"editor"},id:{value:hs()},manager:{value:this},model:{value:e},container:{value:ps("editor")}});return this.container.appendChild(t.container),cs.push(t),this.refresh(),t},deleteEditor(e){var t;return-1!==(t=r(e)?cs.findIndex((t=>t.id===e)):cs.indexOf(e))&&(cs.splice(t,1),this.refresh(),!0)},getExplorer(e){return e?cs((t=>t.id===e)):this.explorers.find((e=>!e.active))},createExplorer(){const e=Object.create(ss,{object:{value:"environment"},type:{value:"explorer"},name:{value:"explorer"},id:{value:hs()},manager:{value:this},container:{value:ps("explorer")}});return this.container.appendChild(e.container),cs.push(e),this.refresh(),e},bindDOM(){C(this.menu)||(this.menu=q({class:["manager-menu"]})),C(this.btnBuild)||(this.btnBuild=ne({id:"btnBuildModel",class:["btn","manager__button","manager__btn-build"]},"Build")),C(this.btnNew)||(this.btnNew=ne({id:"btnNewEditor",class:["btn","manager__button","manager__btn-new"]},"New"))},bindEvents(){this.menu.addEventListener("click",(e=>{const{target:t}=e;t===this.btnNew&&this.createEditor().init().open()})),this.btnBuild.addEventListener("click",(e=>{var t=[];for(let e=0;e<this.editors.length;e++){const i=this.editors[e];"gentleman_concept"===i.buildTarget&&t.push(i.build()),"gentleman_projection"===i.buildTarget&&t.push(i.build())}const[i,n]=t;console.log(i,n),this.createEditor("gentleman_concept").init(i,n).open()}))}}).init().render()})()})();